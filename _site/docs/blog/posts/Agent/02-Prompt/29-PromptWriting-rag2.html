<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.543">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kwangmin Kim">
<meta name="description" content="Retrieval Augmented Generation (RAG)ì˜ ì •ì˜ë¶€í„° ì‹¤ì „ êµ¬í˜„ê¹Œì§€ ì²´ê³„ì ìœ¼ë¡œ ì„¤ëª…í•œë‹¤. Lewis et al.&nbsp;(2020) â€œRetrieval-Augmented Generation for Knowledge-Intensive NLP Tasksâ€ ì—°êµ¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì™¸ë¶€ ë¬¸ì„œ ê²€ìƒ‰(Retrieval)ê³¼ ìƒì„±(Generation)ì˜ ê²°í•© ì›ë¦¬, ë²¡í„° ì„ë² ë”©ê³¼ ìœ ì‚¬ë„ ê²€ìƒ‰ ë©”ì»¤ë‹ˆì¦˜, ì²­í‚¹(Chunking) ì „ëµê³¼ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰(Hybrid Search) ê¸°ë²•ì„ ë¶„ì„í•œë‹¤. RAG + Chain-of-Thought, RAG + Self-Consistency, RAG + Prompt Chaining ë“± í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ì¡°í•© íŒ¨í„´ì„ ì œì‹œí•˜ê³ , Multi-hop QA, Iterative RAG, Fallback ì „ëµ ë“± ê³ ê¸‰ í™œìš© ì‚¬ë¡€ì™€ Python êµ¬í˜„ ì½”ë“œ(Anthropic Claude API, ë²¡í„° DB í™œìš©)ë¥¼ í†µí•´ ì‹¤ì „ êµ¬ì¶• ë°©ë²•ì„ ìƒì„¸íˆ ë‹¤ë£¬ë‹¤. ê²€ìƒ‰ í’ˆì§ˆ ìµœì í™”, ì²­í¬ í¬ê¸° ì„¤ì •, ë¹„ìš©-ì„±ëŠ¥ íŠ¸ë ˆì´ë“œì˜¤í”„ ë¶„ì„, RAG vs Fine-tuning ë¹„êµ, Modular RAGì™€ Agentic RAG ë“± ìµœì‹  íŠ¸ë Œë“œë¥¼ ì œì‹œí•œë‹¤.">

<title>Kwangmin Kim - RAG (Retrieval Augmented Generation): ì™¸ë¶€ ì§€ì‹ê³¼ ìƒì„±ì˜ ê²°í•©</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../site_libs/quarto-search/quarto-search.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete-preset-algolia.umd.js"></script>
<meta name="quarto:offset" content="../../../../../">
<script src="../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "algolia": {
    "application-id": "DUOR1DRC9D",
    "search-only-api-key": "f264da5dea684ffb9e9b4a574af3ed61",
    "index-name": "prod_QUARTO",
    "analytics-events": true,
    "show-logo": true,
    "libDir": "site_libs"
  },
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": true,
  "language": {
    "search-no-results-text": "ì¼ì¹˜ ì—†ìŒ",
    "search-matching-documents-text": "ì¼ì¹˜ëœ ë¬¸ì„œ",
    "search-copy-link-title": "ê²€ìƒ‰ ë§í¬ ë³µì‚¬",
    "search-hide-matches-text": "ì¶”ê°€ ê²€ìƒ‰ ê²°ê³¼ ìˆ¨ê¸°ê¸°",
    "search-more-match-text": "ì¶”ê°€ ê²€ìƒ‰ê²°ê³¼",
    "search-more-matches-text": "ì¶”ê°€ ê²€ìƒ‰ê²°ê³¼",
    "search-clear-button-title": "ì œê±°",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "ì·¨ì†Œ",
    "search-submit-button-title": "ê²€ìƒ‰",
    "search-label": "ê²€ìƒ‰"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js"></script>


<script type="text/javascript">
var ALGOLIA_INSIGHTS_SRC = "https://cdn.jsdelivr.net/npm/search-insights/dist/search-insights.iife.min.js";
!function(e,a,t,n,s,i,c){e.AlgoliaAnalyticsObject=s,e[s]=e[s]||function(){
(e[s].queue=e[s].queue||[]).push(arguments)},i=a.createElement(t),c=a.getElementsByTagName(t)[0],
i.async=1,i.src=n,c.parentNode.insertBefore(i,c)
}(window,document,"script",ALGOLIA_INSIGHTS_SRC,"aa");
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@algolia/autocomplete-plugin-algolia-insights">

</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6W0EKFMWBN"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-6W0EKFMWBN', { 'anonymize_ip': true});
</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: black;
      }

      .quarto-title-block .quarto-title-banner {
        color: black;
background: #EDF3F9;
      }
</style>
<style>
.custom-footer { 
  text-align: center; 
  font-size: 0.8em; 
  color: #666; 
  margin-top: 2rem; 
}
</style>


<link rel="stylesheet" href="../../../../../styles.css">
<meta property="og:title" content="Kwangmin Kim - RAG (Retrieval Augmented Generation): ì™¸ë¶€ ì§€ì‹ê³¼ ìƒì„±ì˜ ê²°í•©">
<meta property="og:description" content="Retrieval Augmented Generation (RAG)ì˜ ì •ì˜ë¶€í„° ì‹¤ì „ êµ¬í˜„ê¹Œì§€ ì²´ê³„ì ìœ¼ë¡œ ì„¤ëª…í•œë‹¤. Lewis et al.&nbsp;(2020) â€œRetrieval-Augmented Generation for Knowledge-Intensive NLP Tasksâ€ ì—°êµ¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì™¸ë¶€ ë¬¸ì„œ ê²€ìƒ‰(Retrieval)ê³¼ ìƒì„±(Generation)ì˜ ê²°í•© ì›ë¦¬, ë²¡í„° ì„ë² ë”©ê³¼ ìœ ì‚¬ë„ ê²€ìƒ‰ ë©”ì»¤ë‹ˆì¦˜, ì²­í‚¹(Chunking) ì „ëµê³¼ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰(Hybrid Search) ê¸°ë²•ì„ ë¶„ì„í•œë‹¤. RAG + Chain-of-Thought, RAG + Self-Consistency, RAG + Prompt Chaining ë“± í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ì¡°í•© íŒ¨í„´ì„ ì œì‹œí•˜ê³ , Multi-hop QA, Iterative RAG, Fallback ì „ëµ ë“± ê³ ê¸‰ í™œìš© ì‚¬ë¡€ì™€ Python êµ¬í˜„ ì½”ë“œ(Anthropic Claude API, ë²¡í„° DB í™œìš©)ë¥¼ í†µí•´ ì‹¤ì „ êµ¬ì¶• ë°©ë²•ì„ ìƒì„¸íˆ ë‹¤ë£¬ë‹¤. ê²€ìƒ‰ í’ˆì§ˆ ìµœì í™”, ì²­í¬ í¬ê¸° ì„¤ì •, ë¹„ìš©-ì„±ëŠ¥ íŠ¸ë ˆì´ë“œì˜¤í”„ ë¶„ì„, RAG vs Fine-tuning ë¹„êµ, Modular RAGì™€ Agentic RAG ë“± ìµœì‹  íŠ¸ë Œë“œë¥¼ ì œì‹œí•œë‹¤.">
<meta property="og:site_name" content="Kwangmin Kim">
<meta name="twitter:title" content="Kwangmin Kim - RAG (Retrieval Augmented Generation): ì™¸ë¶€ ì§€ì‹ê³¼ ìƒì„±ì˜ ê²°í•©">
<meta name="twitter:description" content="Retrieval Augmented Generation (RAG)ì˜ ì •ì˜ë¶€í„° ì‹¤ì „ êµ¬í˜„ê¹Œì§€ ì²´ê³„ì ìœ¼ë¡œ ì„¤ëª…í•œë‹¤. Lewis et al.&nbsp;(2020) â€œRetrieval-Augmented Generation for Knowledge-Intensive NLP Tasksâ€ ì—°êµ¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì™¸ë¶€ ë¬¸ì„œ ê²€ìƒ‰(Retrieval)ê³¼ ìƒì„±(Generation)ì˜ ê²°í•© ì›ë¦¬, ë²¡í„° ì„ë² ë”©ê³¼ ìœ ì‚¬ë„ ê²€ìƒ‰ ë©”ì»¤ë‹ˆì¦˜, ì²­í‚¹(Chunking) ì „ëµê³¼ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰(Hybrid Search) ê¸°ë²•ì„ ë¶„ì„í•œë‹¤. RAG + Chain-of-Thought, RAG + Self-Consistency, RAG + Prompt Chaining ë“± í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ì¡°í•© íŒ¨í„´ì„ ì œì‹œí•˜ê³ , Multi-hop QA, Iterative RAG, Fallback ì „ëµ ë“± ê³ ê¸‰ í™œìš© ì‚¬ë¡€ì™€ Python êµ¬í˜„ ì½”ë“œ(Anthropic Claude API, ë²¡í„° DB í™œìš©)ë¥¼ í†µí•´ ì‹¤ì „ êµ¬ì¶• ë°©ë²•ì„ ìƒì„¸íˆ ë‹¤ë£¬ë‹¤. ê²€ìƒ‰ í’ˆì§ˆ ìµœì í™”, ì²­í¬ í¬ê¸° ì„¤ì •, ë¹„ìš©-ì„±ëŠ¥ íŠ¸ë ˆì´ë“œì˜¤í”„ ë¶„ì„, RAG vs Fine-tuning ë¹„êµ, Modular RAGì™€ Agentic RAG ë“± ìµœì‹  íŠ¸ë Œë“œë¥¼ ì œì‹œí•œë‹¤.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../.././images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../../../index.html">
    <span class="navbar-title">Kwangmin Kim</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="ê²€ìƒ‰"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="íƒìƒ‰ ì „í™˜" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../../docs/blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../about.html"> 
<span class="menu-text">Me</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/kmink3225"> <i class="bi bi-github" role="img" aria-label="Github">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/kwangmin-kim-a5241b200/"> <i class="bi bi-linkedin" role="img" aria-label="Linkedin">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="ë‹¤í¬ ëª¨ë“œ ì „í™˜"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <h1 class="title">RAG (Retrieval Augmented Generation): ì™¸ë¶€ ì§€ì‹ê³¼ ìƒì„±ì˜ ê²°í•©</h1>
            <p class="subtitle lead">ê²€ìƒ‰ê³¼ ìƒì„±ì„ ê²°í•©í•˜ì—¬ LLMì˜ ì§€ì‹ í•œê³„ë¥¼ ê·¹ë³µí•˜ëŠ” í•µì‹¬ ê¸°ë²•</p>
                  <div>
        <div class="description">
          <p>Retrieval Augmented Generation (RAG)ì˜ ì •ì˜ë¶€í„° ì‹¤ì „ êµ¬í˜„ê¹Œì§€ ì²´ê³„ì ìœ¼ë¡œ ì„¤ëª…í•œë‹¤. Lewis et al.&nbsp;(2020) â€œRetrieval-Augmented Generation for Knowledge-Intensive NLP Tasksâ€ ì—°êµ¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì™¸ë¶€ ë¬¸ì„œ ê²€ìƒ‰(Retrieval)ê³¼ ìƒì„±(Generation)ì˜ ê²°í•© ì›ë¦¬, ë²¡í„° ì„ë² ë”©ê³¼ ìœ ì‚¬ë„ ê²€ìƒ‰ ë©”ì»¤ë‹ˆì¦˜, ì²­í‚¹(Chunking) ì „ëµê³¼ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰(Hybrid Search) ê¸°ë²•ì„ ë¶„ì„í•œë‹¤. RAG + Chain-of-Thought, RAG + Self-Consistency, RAG + Prompt Chaining ë“± í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ì¡°í•© íŒ¨í„´ì„ ì œì‹œí•˜ê³ , Multi-hop QA, Iterative RAG, Fallback ì „ëµ ë“± ê³ ê¸‰ í™œìš© ì‚¬ë¡€ì™€ Python êµ¬í˜„ ì½”ë“œ(Anthropic Claude API, ë²¡í„° DB í™œìš©)ë¥¼ í†µí•´ ì‹¤ì „ êµ¬ì¶• ë°©ë²•ì„ ìƒì„¸íˆ ë‹¤ë£¬ë‹¤. ê²€ìƒ‰ í’ˆì§ˆ ìµœì í™”, ì²­í¬ í¬ê¸° ì„¤ì •, ë¹„ìš©-ì„±ëŠ¥ íŠ¸ë ˆì´ë“œì˜¤í”„ ë¶„ì„, RAG vs Fine-tuning ë¹„êµ, Modular RAGì™€ Agentic RAG ë“± ìµœì‹  íŠ¸ë Œë“œë¥¼ ì œì‹œí•œë‹¤.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Prompt Engineering</div>
                <div class="quarto-category">LLM</div>
                <div class="quarto-category">AI</div>
                <div class="quarto-category">Agent</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta column-page-left">

      <div>
      <div class="quarto-title-meta-heading">ì €ì</div>
      <div class="quarto-title-meta-contents">
               <p>Kwangmin Kim </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">ê³µê°œ</div>
      <div class="quarto-title-meta-contents">
        <p class="date">2025ë…„ 01ì›” 30ì¼</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">ëª©ì°¨</h2>
   
  <ul>
  <li><a href="#ë“¤ì–´ê°€ë©°" id="toc-ë“¤ì–´ê°€ë©°" class="nav-link active" data-scroll-target="#ë“¤ì–´ê°€ë©°"><span class="header-section-number">1</span> ë“¤ì–´ê°€ë©°</a></li>
  <li><a href="#í”„ë¡¬í”„íŠ¸-ì—”ì§€ë‹ˆì–´ë§ê³¼-ragì˜-ì‹œë„ˆì§€" id="toc-í”„ë¡¬í”„íŠ¸-ì—”ì§€ë‹ˆì–´ë§ê³¼-ragì˜-ì‹œë„ˆì§€" class="nav-link" data-scroll-target="#í”„ë¡¬í”„íŠ¸-ì—”ì§€ë‹ˆì–´ë§ê³¼-ragì˜-ì‹œë„ˆì§€"><span class="header-section-number">2</span> í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ê³¼ RAGì˜ ì‹œë„ˆì§€</a>
  <ul class="collapse">
  <li><a href="#íŒ¨í„´-1-rag-chain-of-thought" id="toc-íŒ¨í„´-1-rag-chain-of-thought" class="nav-link" data-scroll-target="#íŒ¨í„´-1-rag-chain-of-thought"><span class="header-section-number">2.1</span> íŒ¨í„´ 1: RAG + Chain-of-Thought</a></li>
  <li><a href="#íŒ¨í„´-2-rag-self-consistency" id="toc-íŒ¨í„´-2-rag-self-consistency" class="nav-link" data-scroll-target="#íŒ¨í„´-2-rag-self-consistency"><span class="header-section-number">2.2</span> íŒ¨í„´ 2: RAG + Self-Consistency</a></li>
  <li><a href="#íŒ¨í„´-3-rag-prompt-chaining" id="toc-íŒ¨í„´-3-rag-prompt-chaining" class="nav-link" data-scroll-target="#íŒ¨í„´-3-rag-prompt-chaining"><span class="header-section-number">2.3</span> íŒ¨í„´ 3: RAG + Prompt Chaining</a></li>
  <li><a href="#íŒ¨í„´-4-rag-few-shot-learning" id="toc-íŒ¨í„´-4-rag-few-shot-learning" class="nav-link" data-scroll-target="#íŒ¨í„´-4-rag-few-shot-learning"><span class="header-section-number">2.4</span> íŒ¨í„´ 4: RAG + Few-Shot Learning</a></li>
  </ul></li>
  <li><a href="#ragì˜-í•œê³„ì™€-ëŒ€ì•ˆ" id="toc-ragì˜-í•œê³„ì™€-ëŒ€ì•ˆ" class="nav-link" data-scroll-target="#ragì˜-í•œê³„ì™€-ëŒ€ì•ˆ"><span class="header-section-number">3</span> RAGì˜ í•œê³„ì™€ ëŒ€ì•ˆ</a>
  <ul class="collapse">
  <li><a href="#ê²€ìƒ‰ì—-ì˜ì¡´ì " id="toc-ê²€ìƒ‰ì—-ì˜ì¡´ì " class="nav-link" data-scroll-target="#ê²€ìƒ‰ì—-ì˜ì¡´ì "><span class="header-section-number">3.1</span> ê²€ìƒ‰ì— ì˜ì¡´ì </a></li>
  <li><a href="#ì°½ì˜ì -ì‘ì—…ì—-ë¶€ì í•©" id="toc-ì°½ì˜ì -ì‘ì—…ì—-ë¶€ì í•©" class="nav-link" data-scroll-target="#ì°½ì˜ì -ì‘ì—…ì—-ë¶€ì í•©"><span class="header-section-number">3.2</span> ì°½ì˜ì  ì‘ì—…ì— ë¶€ì í•©</a></li>
  <li><a href="#ë¬¸ì„œ-ê°„-ì •ë³´-ì¢…í•©-ì–´ë ¤ì›€" id="toc-ë¬¸ì„œ-ê°„-ì •ë³´-ì¢…í•©-ì–´ë ¤ì›€" class="nav-link" data-scroll-target="#ë¬¸ì„œ-ê°„-ì •ë³´-ì¢…í•©-ì–´ë ¤ì›€"><span class="header-section-number">3.3</span> ë¬¸ì„œ ê°„ ì •ë³´ ì¢…í•© ì–´ë ¤ì›€</a></li>
  </ul></li>
  <li><a href="#rag-ë‹¤ë¥¸-ê³ ê¸‰-ê¸°ë²•-ì¡°í•©" id="toc-rag-ë‹¤ë¥¸-ê³ ê¸‰-ê¸°ë²•-ì¡°í•©" class="nav-link" data-scroll-target="#rag-ë‹¤ë¥¸-ê³ ê¸‰-ê¸°ë²•-ì¡°í•©"><span class="header-section-number">4</span> RAG + ë‹¤ë¥¸ ê³ ê¸‰ ê¸°ë²• ì¡°í•©</a>
  <ul class="collapse">
  <li><a href="#rag-generate-knowledge" id="toc-rag-generate-knowledge" class="nav-link" data-scroll-target="#rag-generate-knowledge"><span class="header-section-number">4.1</span> RAG + Generate Knowledge</a></li>
  <li><a href="#rag-tree-of-thoughts" id="toc-rag-tree-of-thoughts" class="nav-link" data-scroll-target="#rag-tree-of-thoughts"><span class="header-section-number">4.2</span> RAG + Tree of Thoughts</a></li>
  </ul></li>
  <li><a href="#ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤-ì²´í¬ë¦¬ìŠ¤íŠ¸" id="toc-ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤-ì²´í¬ë¦¬ìŠ¤íŠ¸" class="nav-link" data-scroll-target="#ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤-ì²´í¬ë¦¬ìŠ¤íŠ¸"><span class="header-section-number">5</span> ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ì²´í¬ë¦¬ìŠ¤íŠ¸</a>
  <ul class="collapse">
  <li><a href="#ë°ì´í„°-ì¤€ë¹„" id="toc-ë°ì´í„°-ì¤€ë¹„" class="nav-link" data-scroll-target="#ë°ì´í„°-ì¤€ë¹„"><span class="header-section-number">5.1</span> ë°ì´í„° ì¤€ë¹„</a></li>
  <li><a href="#ì²­í‚¹-ì „ëµ" id="toc-ì²­í‚¹-ì „ëµ" class="nav-link" data-scroll-target="#ì²­í‚¹-ì „ëµ"><span class="header-section-number">5.2</span> ì²­í‚¹ ì „ëµ</a></li>
  <li><a href="#ê²€ìƒ‰-ìµœì í™”" id="toc-ê²€ìƒ‰-ìµœì í™”" class="nav-link" data-scroll-target="#ê²€ìƒ‰-ìµœì í™”"><span class="header-section-number">5.3</span> ê²€ìƒ‰ ìµœì í™”</a></li>
  <li><a href="#í”„ë¡¬í”„íŠ¸-ì„¤ê³„" id="toc-í”„ë¡¬í”„íŠ¸-ì„¤ê³„" class="nav-link" data-scroll-target="#í”„ë¡¬í”„íŠ¸-ì„¤ê³„"><span class="header-section-number">5.4</span> í”„ë¡¬í”„íŠ¸ ì„¤ê³„</a></li>
  <li><a href="#ì„±ëŠ¥-ìµœì í™”" id="toc-ì„±ëŠ¥-ìµœì í™”" class="nav-link" data-scroll-target="#ì„±ëŠ¥-ìµœì í™”"><span class="header-section-number">5.5</span> ì„±ëŠ¥ ìµœì í™”</a></li>
  <li><a href="#í‰ê°€-ë°-ëª¨ë‹ˆí„°ë§" id="toc-í‰ê°€-ë°-ëª¨ë‹ˆí„°ë§" class="nav-link" data-scroll-target="#í‰ê°€-ë°-ëª¨ë‹ˆí„°ë§"><span class="header-section-number">5.6</span> í‰ê°€ ë° ëª¨ë‹ˆí„°ë§</a></li>
  <li><a href="#ì•ˆì „-ë°-ë³´ì•ˆ" id="toc-ì•ˆì „-ë°-ë³´ì•ˆ" class="nav-link" data-scroll-target="#ì•ˆì „-ë°-ë³´ì•ˆ"><span class="header-section-number">5.7</span> ì•ˆì „ ë° ë³´ì•ˆ</a></li>
  </ul></li>
  <li><a href="#ì¼ë°˜ì ì¸-ì‹¤ìˆ˜ì™€-í•´ê²°ì±…" id="toc-ì¼ë°˜ì ì¸-ì‹¤ìˆ˜ì™€-í•´ê²°ì±…" class="nav-link" data-scroll-target="#ì¼ë°˜ì ì¸-ì‹¤ìˆ˜ì™€-í•´ê²°ì±…"><span class="header-section-number">6</span> ì¼ë°˜ì ì¸ ì‹¤ìˆ˜ì™€ í•´ê²°ì±…</a>
  <ul class="collapse">
  <li><a href="#ë„ˆë¬´-í°-ì²­í¬" id="toc-ë„ˆë¬´-í°-ì²­í¬" class="nav-link" data-scroll-target="#ë„ˆë¬´-í°-ì²­í¬"><span class="header-section-number">6.1</span> ë„ˆë¬´ í° ì²­í¬</a></li>
  <li><a href="#top_k-ë„ˆë¬´-í¬ê²Œ-ì„¤ì •" id="toc-top_k-ë„ˆë¬´-í¬ê²Œ-ì„¤ì •" class="nav-link" data-scroll-target="#top_k-ë„ˆë¬´-í¬ê²Œ-ì„¤ì •"><span class="header-section-number">6.2</span> top_k ë„ˆë¬´ í¬ê²Œ ì„¤ì •</a></li>
  <li><a href="#ì„ë² ë”©-ëª¨ë¸-ë¶ˆì¼ì¹˜" id="toc-ì„ë² ë”©-ëª¨ë¸-ë¶ˆì¼ì¹˜" class="nav-link" data-scroll-target="#ì„ë² ë”©-ëª¨ë¸-ë¶ˆì¼ì¹˜"><span class="header-section-number">6.3</span> ì„ë² ë”© ëª¨ë¸ ë¶ˆì¼ì¹˜</a></li>
  <li><a href="#ë©”íƒ€ë°ì´í„°-ë¬´ì‹œ" id="toc-ë©”íƒ€ë°ì´í„°-ë¬´ì‹œ" class="nav-link" data-scroll-target="#ë©”íƒ€ë°ì´í„°-ë¬´ì‹œ"><span class="header-section-number">6.4</span> ë©”íƒ€ë°ì´í„° ë¬´ì‹œ</a></li>
  </ul></li>
  <li><a href="#ì •ë¦¬-ë°-ê²°ë¡ " id="toc-ì •ë¦¬-ë°-ê²°ë¡ " class="nav-link" data-scroll-target="#ì •ë¦¬-ë°-ê²°ë¡ "><span class="header-section-number">7</span> ì •ë¦¬ ë° ê²°ë¡ </a>
  <ul class="collapse">
  <li><a href="#ragì˜-í•µì‹¬-ê°€ì¹˜" id="toc-ragì˜-í•µì‹¬-ê°€ì¹˜" class="nav-link" data-scroll-target="#ragì˜-í•µì‹¬-ê°€ì¹˜"><span class="header-section-number">7.1</span> RAGì˜ í•µì‹¬ ê°€ì¹˜</a></li>
  <li><a href="#ì–¸ì œ-ragë¥¼-ì‚¬ìš©í• -ê²ƒì¸ê°€" id="toc-ì–¸ì œ-ragë¥¼-ì‚¬ìš©í• -ê²ƒì¸ê°€" class="nav-link" data-scroll-target="#ì–¸ì œ-ragë¥¼-ì‚¬ìš©í• -ê²ƒì¸ê°€"><span class="header-section-number">7.2</span> ì–¸ì œ RAGë¥¼ ì‚¬ìš©í•  ê²ƒì¸ê°€?</a></li>
  <li><a href="#rag-vs-fine-tuning" id="toc-rag-vs-fine-tuning" class="nav-link" data-scroll-target="#rag-vs-fine-tuning"><span class="header-section-number">7.3</span> RAG vs Fine-tuning</a></li>
  <li><a href="#í–¥í›„-ë°œì „-ë°©í–¥" id="toc-í–¥í›„-ë°œì „-ë°©í–¥" class="nav-link" data-scroll-target="#í–¥í›„-ë°œì „-ë°©í–¥"><span class="header-section-number">7.4</span> í–¥í›„ ë°œì „ ë°©í–¥</a></li>
  </ul></li>
  <li><a href="#ì°¸ê³ ë¬¸í—Œ" id="toc-ì°¸ê³ ë¬¸í—Œ" class="nav-link" data-scroll-target="#ì°¸ê³ ë¬¸í—Œ"><span class="header-section-number">8</span> ì°¸ê³ ë¬¸í—Œ</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content">





<section id="ë“¤ì–´ê°€ë©°" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="ë“¤ì–´ê°€ë©°"><span class="header-section-number">1</span> ë“¤ì–´ê°€ë©°</h2>
<p>ëŒ€í˜• ì–¸ì–´ ëª¨ë¸(LLM)ì€ ë°©ëŒ€í•œ ì§€ì‹ì„ í•™ìŠµí–ˆì§€ë§Œ, ì—¬ì „íˆ ê·¼ë³¸ì ì¸ í•œê³„ë¥¼ ê°€ì§€ê³  ìˆë‹¤:</p>
<ol type="1">
<li><strong>ì§€ì‹ì˜ ì‹œê°„ì  í•œê³„ (Knowledge Cutoff)</strong>: í•™ìŠµ ë°ì´í„°ì˜ ì‹œì  ì´í›„ ì •ë³´ëŠ” ì•Œì§€ ëª»í•œë‹¤</li>
<li><strong>ë„ë©”ì¸ íŠ¹í™” ì§€ì‹ ë¶€ì¡±</strong>: ê¸°ì—… ë‚´ë¶€ ë¬¸ì„œ, ì „ë¬¸ ë¶„ì•¼ ìë£Œ ë“±ì— ì ‘ê·¼ ë¶ˆê°€</li>
<li><strong>í• ë£¨ì‹œë„¤ì´ì…˜ (Hallucination)</strong>: ê·¸ëŸ´ë“¯í•˜ì§€ë§Œ ì‚¬ì‹¤ì´ ì•„ë‹Œ ì •ë³´ë¥¼ ìƒì„±</li>
<li><strong>ì¶œì²˜ ë¶ˆëª…í™•</strong>: ì–´ë””ì„œ ê°€ì ¸ì˜¨ ì •ë³´ì¸ì§€ ì¶”ì  ë¶ˆê°€ëŠ¥</li>
</ol>
<p>ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì€ ì§ˆë¬¸ì—ëŠ” ë‹µë³€í•˜ê¸° ì–´ë µë‹¤:</p>
<pre><code>âŒ "ìš°ë¦¬ íšŒì‚¬ì˜ 2024ë…„ ì‹ ì œí’ˆ ì¶œì‹œ ì¼ì •ì€?"  
   â†’ ë‚´ë¶€ ë¬¸ì„œ ì—†ìŒ

âŒ "ì–´ì œ ë°œí‘œëœ ì‹ ê¸°ìˆ ì˜ ì„¸ë¶€ ì‚¬í•­ì€?"  
   â†’ Knowledge cutoff ì´í›„

âŒ "ì´ ê³„ì•½ì„œì˜ 3ì¡° 2í•­ì— ëª…ì‹œëœ ì¡°ê±´ì€?"  
   â†’ íŠ¹ì • ë¬¸ì„œ ì ‘ê·¼ ë¶ˆê°€</code></pre>
<p><strong>Retrieval Augmented Generation (RAG)</strong>ì€ ì´ëŸ¬í•œ í•œê³„ë¥¼ ê·¹ë³µí•˜ëŠ” í•µì‹¬ ê¸°ë²•ì´ë‹¤. RAGëŠ” ì™¸ë¶€ ì§€ì‹ ë² ì´ìŠ¤ì—ì„œ ê´€ë ¨ ë¬¸ì„œë¥¼ ê²€ìƒ‰(Retrieve)í•˜ê³ , ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹µë³€ì„ ìƒì„±(Generate)í•œë‹¤.</p>
<p><strong>RAGì˜ í•µì‹¬ í”„ë¡œì„¸ìŠ¤</strong>:</p>
<pre><code>ì§ˆë¬¸ â†’ [1. ë¬¸ì„œ ê²€ìƒ‰] â†’ ê´€ë ¨ ë¬¸ì„œ â†’ [2. ë¬¸ì„œ+ì§ˆë¬¸ ì „ë‹¬] â†’ LLM â†’ [3. ë‹µë³€ ìƒì„±]</code></pre>
<p>ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” RAGì˜ ë™ì‘ ì›ë¦¬ë¥¼ ë„˜ì–´, í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ê¸°ë²•ë“¤(Chain-of-Thought, Self-Consistency, Prompt Chaining ë“±)ê³¼ RAGë¥¼ ê²°í•©í•˜ëŠ” ë‹¤ì–‘í•œ íŒ¨í„´ì„ ì‚´í´ë³¸ë‹¤. ë˜í•œ ì‹¤ë¬´ì—ì„œ ë§ˆì£¼ì¹˜ëŠ” ë¬¸ì œë“¤(ê²€ìƒ‰ ì‹¤íŒ¨, ì •ë³´ ë¶„ì‚°, ì°½ì˜ì  ì‘ì—… ë¶€ì í•© ë“±)ê³¼ í•´ê²°ì±…, ê·¸ë¦¬ê³  ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ì™€ ìµœì‹  íŠ¸ë Œë“œê¹Œì§€ ë‹¤ë£¬ë‹¤.</p>
</section>
<section id="í”„ë¡¬í”„íŠ¸-ì—”ì§€ë‹ˆì–´ë§ê³¼-ragì˜-ì‹œë„ˆì§€" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="í”„ë¡¬í”„íŠ¸-ì—”ì§€ë‹ˆì–´ë§ê³¼-ragì˜-ì‹œë„ˆì§€"><span class="header-section-number">2</span> í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ê³¼ RAGì˜ ì‹œë„ˆì§€</h2>
<p>RAGì™€ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ì„ ê²°í•©í•˜ë©´ ë” ê°•ë ¥í•œ ì‹œìŠ¤í…œì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</p>
<section id="íŒ¨í„´-1-rag-chain-of-thought" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="íŒ¨í„´-1-rag-chain-of-thought"><span class="header-section-number">2.1</span> íŒ¨í„´ 1: RAG + Chain-of-Thought</h3>
<p>ê²€ìƒ‰ëœ ë¬¸ì„œë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¨ê³„ë³„ ì¶”ë¡ ì„ ìˆ˜í–‰í•œë‹¤.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">def</span> rag_with_cot(query: <span class="bu">str</span>, rag: SimpleRAGSystem, top_k: <span class="bu">int</span> <span class="op">=</span> <span class="dv">5</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb3-2"><a href="#cb3-2"></a>    <span class="co">"""</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">    RAG + CoT ê²°í•©</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">    """</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>    <span class="co"># Step 1: ë¬¸ì„œ ê²€ìƒ‰</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>    documents <span class="op">=</span> rag.retrieve(query, top_k<span class="op">=</span>top_k)</span>
<span id="cb3-7"><a href="#cb3-7"></a>    </span>
<span id="cb3-8"><a href="#cb3-8"></a>    <span class="co"># Step 2: CoT í”„ë¡¬í”„íŠ¸ êµ¬ì„±</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>    context <span class="op">=</span> <span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>.join([</span>
<span id="cb3-10"><a href="#cb3-10"></a>        <span class="ss">f"[Document </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">]</span><span class="ch">\n</span><span class="sc">{</span>doc[<span class="st">'text'</span>]<span class="sc">}</span><span class="ss">"</span> </span>
<span id="cb3-11"><a href="#cb3-11"></a>        <span class="cf">for</span> i, doc <span class="kw">in</span> <span class="bu">enumerate</span>(documents)</span>
<span id="cb3-12"><a href="#cb3-12"></a>    ])</span>
<span id="cb3-13"><a href="#cb3-13"></a>    </span>
<span id="cb3-14"><a href="#cb3-14"></a>    cot_prompt <span class="op">=</span> <span class="ss">f"""ë‹¤ìŒ ë¬¸ì„œë“¤ì„ ì°¸ê³ í•˜ì—¬ ì§ˆë¬¸ì— ë‹µë³€í•˜ì„¸ìš”.</span></span>
<span id="cb3-15"><a href="#cb3-15"></a></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="ss">    &lt;documents&gt;</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="ss">    </span><span class="sc">{</span>context<span class="sc">}</span></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="ss">    &lt;/documents&gt;</span></span>
<span id="cb3-19"><a href="#cb3-19"></a></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="ss">    &lt;question&gt;</span></span>
<span id="cb3-21"><a href="#cb3-21"></a><span class="ss">    </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb3-22"><a href="#cb3-22"></a><span class="ss">    &lt;/question&gt;</span></span>
<span id="cb3-23"><a href="#cb3-23"></a></span>
<span id="cb3-24"><a href="#cb3-24"></a><span class="ss">    ë‹¨ê³„ë³„ë¡œ ìƒê°í•˜ë©° ë‹µë³€í•˜ì„¸ìš”:</span></span>
<span id="cb3-25"><a href="#cb3-25"></a></span>
<span id="cb3-26"><a href="#cb3-26"></a><span class="ss">    1. ë¨¼ì €, ì§ˆë¬¸ì„ ì´í•´í•©ë‹ˆë‹¤.</span></span>
<span id="cb3-27"><a href="#cb3-27"></a><span class="ss">    2. ë¬¸ì„œì—ì„œ ê´€ë ¨ ì •ë³´ë¥¼ ì°¾ìŠµë‹ˆë‹¤.</span></span>
<span id="cb3-28"><a href="#cb3-28"></a><span class="ss">    3. ì •ë³´ë“¤ì„ ì¢…í•©í•˜ì—¬ ê²°ë¡ ì„ ë„ì¶œí•©ë‹ˆë‹¤.</span></span>
<span id="cb3-29"><a href="#cb3-29"></a></span>
<span id="cb3-30"><a href="#cb3-30"></a><span class="ss">    ë‹¨ê³„ë³„ ì¶”ë¡ :"""</span></span>
<span id="cb3-31"><a href="#cb3-31"></a>    </span>
<span id="cb3-32"><a href="#cb3-32"></a>    client <span class="op">=</span> anthropic.Anthropic(api_key<span class="op">=</span><span class="st">"your-api-key"</span>)</span>
<span id="cb3-33"><a href="#cb3-33"></a>    </span>
<span id="cb3-34"><a href="#cb3-34"></a>    message <span class="op">=</span> client.messages.create(</span>
<span id="cb3-35"><a href="#cb3-35"></a>        model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb3-36"><a href="#cb3-36"></a>        max_tokens<span class="op">=</span><span class="dv">1500</span>,</span>
<span id="cb3-37"><a href="#cb3-37"></a>        temperature<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb3-38"><a href="#cb3-38"></a>        messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: cot_prompt}]</span>
<span id="cb3-39"><a href="#cb3-39"></a>    )</span>
<span id="cb3-40"><a href="#cb3-40"></a>    </span>
<span id="cb3-41"><a href="#cb3-41"></a>    <span class="cf">return</span> message.content[<span class="dv">0</span>].text</span></code><button title="í´ë¦½ë³´ë“œ ë³µì‚¬" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>íš¨ê³¼</strong>: - ì¶”ë¡  ê³¼ì •ì´ ëª…í™• - ë³µì¡í•œ ì§ˆë¬¸ì— ê°•í•¨ - ë””ë²„ê¹… ìš©ì´</p>
</section>
<section id="íŒ¨í„´-2-rag-self-consistency" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="íŒ¨í„´-2-rag-self-consistency"><span class="header-section-number">2.2</span> íŒ¨í„´ 2: RAG + Self-Consistency</h3>
<p>ì—¬ëŸ¬ ë‹µë³€ì„ ìƒì„±í•˜ê³  ì¼ê´€ëœ ë‹µë³€ì„ ì„ íƒí•œë‹¤.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">def</span> rag_with_self_consistency(</span>
<span id="cb4-2"><a href="#cb4-2"></a>    query: <span class="bu">str</span>, </span>
<span id="cb4-3"><a href="#cb4-3"></a>    rag: SimpleRAGSystem,</span>
<span id="cb4-4"><a href="#cb4-4"></a>    num_samples: <span class="bu">int</span> <span class="op">=</span> <span class="dv">5</span>,</span>
<span id="cb4-5"><a href="#cb4-5"></a>    top_k: <span class="bu">int</span> <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>) <span class="op">-&gt;</span> Dict:</span>
<span id="cb4-7"><a href="#cb4-7"></a>    <span class="co">"""</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">    RAG + Self-Consistency</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">    """</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>    <span class="co"># Step 1: ë¬¸ì„œ ê²€ìƒ‰ (í•œ ë²ˆë§Œ)</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>    documents <span class="op">=</span> rag.retrieve(query, top_k<span class="op">=</span>top_k)</span>
<span id="cb4-12"><a href="#cb4-12"></a>    </span>
<span id="cb4-13"><a href="#cb4-13"></a>    <span class="co"># Step 2: ì—¬ëŸ¬ ë‹µë³€ ìƒì„±</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>    answers <span class="op">=</span> []</span>
<span id="cb4-15"><a href="#cb4-15"></a>    </span>
<span id="cb4-16"><a href="#cb4-16"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_samples):</span>
<span id="cb4-17"><a href="#cb4-17"></a>        result <span class="op">=</span> rag.generate_answer(query, documents)</span>
<span id="cb4-18"><a href="#cb4-18"></a>        answers.append(result[<span class="st">'answer'</span>])</span>
<span id="cb4-19"><a href="#cb4-19"></a>        <span class="bu">print</span>(<span class="ss">f"ë‹µë³€ </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">/</span><span class="sc">{</span>num_samples<span class="sc">}</span><span class="ss"> ìƒì„± ì™„ë£Œ"</span>)</span>
<span id="cb4-20"><a href="#cb4-20"></a>    </span>
<span id="cb4-21"><a href="#cb4-21"></a>    <span class="co"># Step 3: ë‹µë³€ë“¤ ë¶„ì„ ë° ë‹¤ìˆ˜ê²°</span></span>
<span id="cb4-22"><a href="#cb4-22"></a>    consistency_prompt <span class="op">=</span> <span class="ss">f"""ë‹¤ìŒì€ ê°™ì€ ì§ˆë¬¸ì— ëŒ€í•œ </span><span class="sc">{</span>num_samples<span class="sc">}</span><span class="ss">ê°œì˜ ë‹µë³€ì…ë‹ˆë‹¤.</span></span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="ss">ê°€ì¥ ì¼ê´€ë˜ê³  ì •í™•í•œ ì •ë³´ë¥¼ ì¢…í•©í•˜ì—¬ ìµœì¢… ë‹µë³€ì„ ì‘ì„±í•˜ì„¸ìš”.</span></span>
<span id="cb4-24"><a href="#cb4-24"></a></span>
<span id="cb4-25"><a href="#cb4-25"></a><span class="ss">ì§ˆë¬¸: </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb4-26"><a href="#cb4-26"></a></span>
<span id="cb4-27"><a href="#cb4-27"></a><span class="ss">ë‹µë³€ë“¤:</span></span>
<span id="cb4-28"><a href="#cb4-28"></a><span class="ss">"""</span></span>
<span id="cb4-29"><a href="#cb4-29"></a>    </span>
<span id="cb4-30"><a href="#cb4-30"></a>    <span class="cf">for</span> i, ans <span class="kw">in</span> <span class="bu">enumerate</span>(answers, <span class="dv">1</span>):</span>
<span id="cb4-31"><a href="#cb4-31"></a>        consistency_prompt <span class="op">+=</span> <span class="ss">f"</span><span class="ch">\n</span><span class="ss">ë‹µë³€ </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">:</span><span class="ch">\n</span><span class="sc">{</span>ans<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span></span>
<span id="cb4-32"><a href="#cb4-32"></a>    </span>
<span id="cb4-33"><a href="#cb4-33"></a>    consistency_prompt <span class="op">+=</span> <span class="st">"</span><span class="ch">\n</span><span class="st">ìµœì¢… ë‹µë³€ (ê°€ì¥ ì¼ê´€ë˜ê³  ì •í™•í•œ ë‚´ìš©):"</span></span>
<span id="cb4-34"><a href="#cb4-34"></a>    </span>
<span id="cb4-35"><a href="#cb4-35"></a>    client <span class="op">=</span> anthropic.Anthropic(api_key<span class="op">=</span><span class="st">"your-api-key"</span>)</span>
<span id="cb4-36"><a href="#cb4-36"></a>    </span>
<span id="cb4-37"><a href="#cb4-37"></a>    message <span class="op">=</span> client.messages.create(</span>
<span id="cb4-38"><a href="#cb4-38"></a>        model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb4-39"><a href="#cb4-39"></a>        max_tokens<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb4-40"><a href="#cb4-40"></a>        temperature<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb4-41"><a href="#cb4-41"></a>        messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: consistency_prompt}]</span>
<span id="cb4-42"><a href="#cb4-42"></a>    )</span>
<span id="cb4-43"><a href="#cb4-43"></a>    </span>
<span id="cb4-44"><a href="#cb4-44"></a>    final_answer <span class="op">=</span> message.content[<span class="dv">0</span>].text</span>
<span id="cb4-45"><a href="#cb4-45"></a>    </span>
<span id="cb4-46"><a href="#cb4-46"></a>    <span class="cf">return</span> {</span>
<span id="cb4-47"><a href="#cb4-47"></a>        <span class="st">'query'</span>: query,</span>
<span id="cb4-48"><a href="#cb4-48"></a>        <span class="st">'individual_answers'</span>: answers,</span>
<span id="cb4-49"><a href="#cb4-49"></a>        <span class="st">'final_answer'</span>: final_answer</span>
<span id="cb4-50"><a href="#cb4-50"></a>    }</span></code><button title="í´ë¦½ë³´ë“œ ë³µì‚¬" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>íš¨ê³¼</strong>: - âœ… ë” ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë‹µë³€ - âœ… í• ë£¨ì‹œë„¤ì´ì…˜ ê°ì†Œ - âŒ ë¹„ìš© ì¦ê°€ (num_samplesë°°)</p>
</section>
<section id="íŒ¨í„´-3-rag-prompt-chaining" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="íŒ¨í„´-3-rag-prompt-chaining"><span class="header-section-number">2.3</span> íŒ¨í„´ 3: RAG + Prompt Chaining</h3>
<p>ë³µì¡í•œ ì‘ì—…ì„ ì—¬ëŸ¬ ë‹¨ê³„ë¡œ ë‚˜ëˆ„ê³  ê° ë‹¨ê³„ì—ì„œ RAG ì‚¬ìš©.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">class</span> RAGChain:</span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="co">"""</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">    RAG + Prompt Chaining</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">    """</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>    </span>
<span id="cb5-6"><a href="#cb5-6"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, rag: SimpleRAGSystem):</span>
<span id="cb5-7"><a href="#cb5-7"></a>        <span class="va">self</span>.rag <span class="op">=</span> rag</span>
<span id="cb5-8"><a href="#cb5-8"></a>        <span class="va">self</span>.client <span class="op">=</span> anthropic.Anthropic(api_key<span class="op">=</span><span class="st">"your-api-key"</span>)</span>
<span id="cb5-9"><a href="#cb5-9"></a>    </span>
<span id="cb5-10"><a href="#cb5-10"></a>    <span class="kw">def</span> multi_hop_qa(<span class="va">self</span>, query: <span class="bu">str</span>) <span class="op">-&gt;</span> Dict:</span>
<span id="cb5-11"><a href="#cb5-11"></a>        <span class="co">"""</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">        Multi-hop QA: ì—¬ëŸ¬ ë‹¨ê³„ì˜ ê²€ìƒ‰ì´ í•„ìš”í•œ ì§ˆë¬¸</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">        </span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">        ì˜ˆ: "Anthropicì˜ CEOê°€ ì´ì „ì— ì¼í–ˆë˜ íšŒì‚¬ì˜ ì„¤ë¦½ ì—°ë„ëŠ”?"</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">        â†’ Step 1: Anthropic CEO ì°¾ê¸° (Dario Amodei)</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">        â†’ Step 2: Darioê°€ ì´ì „ì— ì¼í•œ íšŒì‚¬ ì°¾ê¸° (OpenAI)</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">        â†’ Step 3: OpenAI ì„¤ë¦½ ì—°ë„ ì°¾ê¸° (2015)</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="co">        """</span></span>
<span id="cb5-19"><a href="#cb5-19"></a>        results <span class="op">=</span> []</span>
<span id="cb5-20"><a href="#cb5-20"></a>        </span>
<span id="cb5-21"><a href="#cb5-21"></a>        <span class="co"># Step 1: ì§ˆë¬¸ ë¶„í•´</span></span>
<span id="cb5-22"><a href="#cb5-22"></a>        decompose_prompt <span class="op">=</span> <span class="ss">f"""ë‹¤ìŒ ì§ˆë¬¸ì„ ë‹µí•˜ê¸° ìœ„í•´ í•„ìš”í•œ í•˜ìœ„ ì§ˆë¬¸ë“¤ì„ ìˆœì„œëŒ€ë¡œ ë‚˜ì—´í•˜ì„¸ìš”.</span></span>
<span id="cb5-23"><a href="#cb5-23"></a><span class="ss">ê° í•˜ìœ„ ì§ˆë¬¸ì˜ ë‹µì´ ë‹¤ìŒ í•˜ìœ„ ì§ˆë¬¸ì— í•„ìš”í•©ë‹ˆë‹¤.</span></span>
<span id="cb5-24"><a href="#cb5-24"></a></span>
<span id="cb5-25"><a href="#cb5-25"></a><span class="ss">ì§ˆë¬¸: </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb5-26"><a href="#cb5-26"></a></span>
<span id="cb5-27"><a href="#cb5-27"></a><span class="ss">í•˜ìœ„ ì§ˆë¬¸ë“¤ (ìˆœì„œëŒ€ë¡œ):</span></span>
<span id="cb5-28"><a href="#cb5-28"></a><span class="ss">1."""</span></span>
<span id="cb5-29"><a href="#cb5-29"></a>        </span>
<span id="cb5-30"><a href="#cb5-30"></a>        message <span class="op">=</span> <span class="va">self</span>.client.messages.create(</span>
<span id="cb5-31"><a href="#cb5-31"></a>            model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb5-32"><a href="#cb5-32"></a>            max_tokens<span class="op">=</span><span class="dv">300</span>,</span>
<span id="cb5-33"><a href="#cb5-33"></a>            temperature<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb5-34"><a href="#cb5-34"></a>            messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: decompose_prompt}]</span>
<span id="cb5-35"><a href="#cb5-35"></a>        )</span>
<span id="cb5-36"><a href="#cb5-36"></a>        </span>
<span id="cb5-37"><a href="#cb5-37"></a>        response <span class="op">=</span> message.content[<span class="dv">0</span>].text</span>
<span id="cb5-38"><a href="#cb5-38"></a>        </span>
<span id="cb5-39"><a href="#cb5-39"></a>        <span class="co"># í•˜ìœ„ ì§ˆë¬¸ íŒŒì‹±</span></span>
<span id="cb5-40"><a href="#cb5-40"></a>        sub_queries <span class="op">=</span> []</span>
<span id="cb5-41"><a href="#cb5-41"></a>        <span class="cf">for</span> line <span class="kw">in</span> response.split(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>):</span>
<span id="cb5-42"><a href="#cb5-42"></a>            <span class="im">import</span> re</span>
<span id="cb5-43"><a href="#cb5-43"></a>            line <span class="op">=</span> re.sub(<span class="vs">r'^\d+\.\s*'</span>, <span class="st">''</span>, line.strip())</span>
<span id="cb5-44"><a href="#cb5-44"></a>            <span class="cf">if</span> line:</span>
<span id="cb5-45"><a href="#cb5-45"></a>                sub_queries.append(line)</span>
<span id="cb5-46"><a href="#cb5-46"></a>        </span>
<span id="cb5-47"><a href="#cb5-47"></a>        <span class="bu">print</span>(<span class="ss">f"ğŸ” í•˜ìœ„ ì§ˆë¬¸ë“¤:"</span>)</span>
<span id="cb5-48"><a href="#cb5-48"></a>        <span class="cf">for</span> i, sq <span class="kw">in</span> <span class="bu">enumerate</span>(sub_queries, <span class="dv">1</span>):</span>
<span id="cb5-49"><a href="#cb5-49"></a>            <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">. </span><span class="sc">{</span>sq<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-50"><a href="#cb5-50"></a>        <span class="bu">print</span>()</span>
<span id="cb5-51"><a href="#cb5-51"></a>        </span>
<span id="cb5-52"><a href="#cb5-52"></a>        <span class="co"># Step 2: ê° í•˜ìœ„ ì§ˆë¬¸ì— ìˆœì°¨ì ìœ¼ë¡œ ë‹µë³€</span></span>
<span id="cb5-53"><a href="#cb5-53"></a>        accumulated_context <span class="op">=</span> <span class="st">""</span></span>
<span id="cb5-54"><a href="#cb5-54"></a>        </span>
<span id="cb5-55"><a href="#cb5-55"></a>        <span class="cf">for</span> i, sub_query <span class="kw">in</span> <span class="bu">enumerate</span>(sub_queries, <span class="dv">1</span>):</span>
<span id="cb5-56"><a href="#cb5-56"></a>            <span class="bu">print</span>(<span class="ss">f"ğŸ“ í•˜ìœ„ ì§ˆë¬¸ </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> ì²˜ë¦¬ ì¤‘: </span><span class="sc">{</span>sub_query<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-57"><a href="#cb5-57"></a>            </span>
<span id="cb5-58"><a href="#cb5-58"></a>            <span class="co"># ì´ì „ ë‹µë³€ì„ ì»¨í…ìŠ¤íŠ¸ë¡œ í¬í•¨</span></span>
<span id="cb5-59"><a href="#cb5-59"></a>            <span class="cf">if</span> accumulated_context:</span>
<span id="cb5-60"><a href="#cb5-60"></a>                enhanced_query <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>sub_query<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">ì´ì „ ë‹µë³€ ì°¸ê³ :</span><span class="ch">\n</span><span class="sc">{</span>accumulated_context<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb5-61"><a href="#cb5-61"></a>            <span class="cf">else</span>:</span>
<span id="cb5-62"><a href="#cb5-62"></a>                enhanced_query <span class="op">=</span> sub_query</span>
<span id="cb5-63"><a href="#cb5-63"></a>            </span>
<span id="cb5-64"><a href="#cb5-64"></a>            <span class="co"># RAGë¡œ ë‹µë³€</span></span>
<span id="cb5-65"><a href="#cb5-65"></a>            docs <span class="op">=</span> <span class="va">self</span>.rag.retrieve(enhanced_query, top_k<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb5-66"><a href="#cb5-66"></a>            answer_result <span class="op">=</span> <span class="va">self</span>.rag.generate_answer(enhanced_query, docs)</span>
<span id="cb5-67"><a href="#cb5-67"></a>            answer <span class="op">=</span> answer_result[<span class="st">'answer'</span>]</span>
<span id="cb5-68"><a href="#cb5-68"></a>            </span>
<span id="cb5-69"><a href="#cb5-69"></a>            <span class="bu">print</span>(<span class="ss">f"âœ… ë‹µë³€: </span><span class="sc">{</span>answer<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb5-70"><a href="#cb5-70"></a>            </span>
<span id="cb5-71"><a href="#cb5-71"></a>            <span class="co"># ê²°ê³¼ ì €ì¥</span></span>
<span id="cb5-72"><a href="#cb5-72"></a>            results.append({</span>
<span id="cb5-73"><a href="#cb5-73"></a>                <span class="st">'sub_query'</span>: sub_query,</span>
<span id="cb5-74"><a href="#cb5-74"></a>                <span class="st">'answer'</span>: answer,</span>
<span id="cb5-75"><a href="#cb5-75"></a>                <span class="st">'sources'</span>: docs</span>
<span id="cb5-76"><a href="#cb5-76"></a>            })</span>
<span id="cb5-77"><a href="#cb5-77"></a>            </span>
<span id="cb5-78"><a href="#cb5-78"></a>            <span class="co"># ì»¨í…ìŠ¤íŠ¸ ëˆ„ì </span></span>
<span id="cb5-79"><a href="#cb5-79"></a>            accumulated_context <span class="op">+=</span> <span class="ss">f"Q: </span><span class="sc">{</span>sub_query<span class="sc">}</span><span class="ch">\n</span><span class="ss">A: </span><span class="sc">{</span>answer<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span></span>
<span id="cb5-80"><a href="#cb5-80"></a>        </span>
<span id="cb5-81"><a href="#cb5-81"></a>        <span class="co"># Step 3: ìµœì¢… ë‹µë³€ ì¢…í•©</span></span>
<span id="cb5-82"><a href="#cb5-82"></a>        synthesis_prompt <span class="op">=</span> <span class="ss">f"""ë‹¤ìŒì€ ë³µì¡í•œ ì§ˆë¬¸ì— ëŒ€í•œ ë‹¨ê³„ë³„ ë‹µë³€ì…ë‹ˆë‹¤.</span></span>
<span id="cb5-83"><a href="#cb5-83"></a><span class="ss">ì´ë¥¼ ì¢…í•©í•˜ì—¬ ì›ë˜ ì§ˆë¬¸ì— ëŒ€í•œ ê°„ê²°í•œ ìµœì¢… ë‹µë³€ì„ ì‘ì„±í•˜ì„¸ìš”.</span></span>
<span id="cb5-84"><a href="#cb5-84"></a></span>
<span id="cb5-85"><a href="#cb5-85"></a><span class="ss">ì›ë˜ ì§ˆë¬¸: </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb5-86"><a href="#cb5-86"></a></span>
<span id="cb5-87"><a href="#cb5-87"></a><span class="ss">ë‹¨ê³„ë³„ ë‹µë³€:</span></span>
<span id="cb5-88"><a href="#cb5-88"></a><span class="sc">{</span>accumulated_context<span class="sc">}</span></span>
<span id="cb5-89"><a href="#cb5-89"></a></span>
<span id="cb5-90"><a href="#cb5-90"></a><span class="ss">ìµœì¢… ë‹µë³€:"""</span></span>
<span id="cb5-91"><a href="#cb5-91"></a>        </span>
<span id="cb5-92"><a href="#cb5-92"></a>        message <span class="op">=</span> <span class="va">self</span>.client.messages.create(</span>
<span id="cb5-93"><a href="#cb5-93"></a>            model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb5-94"><a href="#cb5-94"></a>            max_tokens<span class="op">=</span><span class="dv">500</span>,</span>
<span id="cb5-95"><a href="#cb5-95"></a>            temperature<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb5-96"><a href="#cb5-96"></a>            messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: synthesis_prompt}]</span>
<span id="cb5-97"><a href="#cb5-97"></a>        )</span>
<span id="cb5-98"><a href="#cb5-98"></a>        </span>
<span id="cb5-99"><a href="#cb5-99"></a>        final_answer <span class="op">=</span> message.content[<span class="dv">0</span>].text</span>
<span id="cb5-100"><a href="#cb5-100"></a>        </span>
<span id="cb5-101"><a href="#cb5-101"></a>        <span class="cf">return</span> {</span>
<span id="cb5-102"><a href="#cb5-102"></a>            <span class="st">'query'</span>: query,</span>
<span id="cb5-103"><a href="#cb5-103"></a>            <span class="st">'sub_queries'</span>: results,</span>
<span id="cb5-104"><a href="#cb5-104"></a>            <span class="st">'final_answer'</span>: final_answer</span>
<span id="cb5-105"><a href="#cb5-105"></a>        }</span>
<span id="cb5-106"><a href="#cb5-106"></a></span>
<span id="cb5-107"><a href="#cb5-107"></a></span>
<span id="cb5-108"><a href="#cb5-108"></a><span class="co"># ì‚¬ìš© ì˜ˆì‹œ</span></span>
<span id="cb5-109"><a href="#cb5-109"></a>rag_chain <span class="op">=</span> RAGChain(rag)</span>
<span id="cb5-110"><a href="#cb5-110"></a></span>
<span id="cb5-111"><a href="#cb5-111"></a>result <span class="op">=</span> rag_chain.multi_hop_qa(</span>
<span id="cb5-112"><a href="#cb5-112"></a>    <span class="st">"Anthropicì˜ CEOê°€ ì´ì „ì— ì¼í–ˆë˜ íšŒì‚¬ëŠ” ì–¸ì œ ì„¤ë¦½ë˜ì—ˆë‚˜?"</span></span>
<span id="cb5-113"><a href="#cb5-113"></a>)</span>
<span id="cb5-114"><a href="#cb5-114"></a></span>
<span id="cb5-115"><a href="#cb5-115"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">80</span>)</span>
<span id="cb5-116"><a href="#cb5-116"></a><span class="bu">print</span>(<span class="st">"ìµœì¢… ë‹µë³€:"</span>)</span>
<span id="cb5-117"><a href="#cb5-117"></a><span class="bu">print</span>(result[<span class="st">'final_answer'</span>])</span></code><button title="í´ë¦½ë³´ë“œ ë³µì‚¬" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="íŒ¨í„´-4-rag-few-shot-learning" class="level3" data-number="2.4">
<h3 data-number="2.4" class="anchored" data-anchor-id="íŒ¨í„´-4-rag-few-shot-learning"><span class="header-section-number">2.4</span> íŒ¨í„´ 4: RAG + Few-Shot Learning</h3>
<p>RAGë¡œ ê²€ìƒ‰ëœ ì˜ˆì‹œë¥¼ Few-shot í”„ë¡¬í”„íŠ¸ì— ì‚¬ìš©.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">def</span> rag_few_shot(query: <span class="bu">str</span>, rag: SimpleRAGSystem, num_examples: <span class="bu">int</span> <span class="op">=</span> <span class="dv">3</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb6-2"><a href="#cb6-2"></a>    <span class="co">"""</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">    RAGë¡œ ìœ ì‚¬í•œ ì˜ˆì‹œë¥¼ ê²€ìƒ‰í•˜ê³  Few-shot í”„ë¡¬í”„íŠ¸ êµ¬ì„±</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">    </span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">    ì‚¬ìš© ì‚¬ë¡€: íŠ¹ì • ìŠ¤íƒ€ì¼ë¡œ ê¸€ì“°ê¸°, ìœ ì‚¬í•œ ë¬¸ì œ í•´ê²° ë“±</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">    """</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>    <span class="co"># Step 1: ìœ ì‚¬í•œ ì˜ˆì‹œ ê²€ìƒ‰</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>    examples <span class="op">=</span> rag.retrieve(query, top_k<span class="op">=</span>num_examples)</span>
<span id="cb6-9"><a href="#cb6-9"></a>    </span>
<span id="cb6-10"><a href="#cb6-10"></a>    <span class="co"># Step 2: Few-shot í”„ë¡¬í”„íŠ¸ êµ¬ì„±</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>    few_shot_prompt <span class="op">=</span> <span class="st">"ë‹¤ìŒ ì˜ˆì‹œë“¤ì„ ì°¸ê³ í•˜ì—¬ ë¹„ìŠ·í•œ ìŠ¤íƒ€ì¼ë¡œ ë‹µë³€í•˜ì„¸ìš”.</span><span class="ch">\n\n</span><span class="st">"</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>    </span>
<span id="cb6-13"><a href="#cb6-13"></a>    <span class="cf">for</span> i, ex <span class="kw">in</span> <span class="bu">enumerate</span>(examples, <span class="dv">1</span>):</span>
<span id="cb6-14"><a href="#cb6-14"></a>        few_shot_prompt <span class="op">+=</span> <span class="ss">f"ì˜ˆì‹œ </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">:</span><span class="ch">\n</span><span class="sc">{</span>ex[<span class="st">'text'</span>]<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span></span>
<span id="cb6-15"><a href="#cb6-15"></a>    </span>
<span id="cb6-16"><a href="#cb6-16"></a>    few_shot_prompt <span class="op">+=</span> <span class="ss">f"ì´ì œ ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µë³€í•˜ì„¸ìš”:</span><span class="ch">\n</span><span class="sc">{</span>query<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">ë‹µë³€:"</span></span>
<span id="cb6-17"><a href="#cb6-17"></a>    </span>
<span id="cb6-18"><a href="#cb6-18"></a>    client <span class="op">=</span> anthropic.Anthropic(api_key<span class="op">=</span><span class="st">"your-api-key"</span>)</span>
<span id="cb6-19"><a href="#cb6-19"></a>    </span>
<span id="cb6-20"><a href="#cb6-20"></a>    message <span class="op">=</span> client.messages.create(</span>
<span id="cb6-21"><a href="#cb6-21"></a>        model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb6-22"><a href="#cb6-22"></a>        max_tokens<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb6-23"><a href="#cb6-23"></a>        temperature<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb6-24"><a href="#cb6-24"></a>        messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: few_shot_prompt}]</span>
<span id="cb6-25"><a href="#cb6-25"></a>    )</span>
<span id="cb6-26"><a href="#cb6-26"></a>    </span>
<span id="cb6-27"><a href="#cb6-27"></a>    <span class="cf">return</span> message.content[<span class="dv">0</span>].text</span></code><button title="í´ë¦½ë³´ë“œ ë³µì‚¬" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="ragì˜-í•œê³„ì™€-ëŒ€ì•ˆ" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="ragì˜-í•œê³„ì™€-ëŒ€ì•ˆ"><span class="header-section-number">3</span> RAGì˜ í•œê³„ì™€ ëŒ€ì•ˆ</h2>
<section id="ê²€ìƒ‰ì—-ì˜ì¡´ì " class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="ê²€ìƒ‰ì—-ì˜ì¡´ì "><span class="header-section-number">3.1</span> ê²€ìƒ‰ì— ì˜ì¡´ì </h3>
<p><strong>ë¬¸ì œ</strong>: ê²€ìƒ‰ì´ ì‹¤íŒ¨í•˜ë©´ ë‹µë³€ë„ ì‹¤íŒ¨</p>
<p><strong>ì˜ˆì‹œ</strong>:</p>
<pre><code>ì§ˆë¬¸: "Pythonì—ì„œ ë¦¬ìŠ¤íŠ¸ë¥¼ ì •ë ¬í•˜ëŠ” ë°©ë²•ì€?"

ê²€ìƒ‰ ê²°ê³¼: (ê²€ìƒ‰ ì‹¤íŒ¨ - ê´€ë ¨ ë¬¸ì„œ ì—†ìŒ)

ë‹µë³€: "ì œê³µëœ ë¬¸ì„œì—ì„œ ê´€ë ¨ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."

â†’ í•˜ì§€ë§Œ ì´ê±´ LLMì´ ì›ë˜ ì•Œê³  ìˆëŠ” ë‚´ìš©!</code></pre>
<p><strong>í•´ê²°ì±…</strong>: Fallback to Model Knowledge</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">def</span> rag_with_fallback(</span>
<span id="cb8-2"><a href="#cb8-2"></a>    query: <span class="bu">str</span>, </span>
<span id="cb8-3"><a href="#cb8-3"></a>    rag: SimpleRAGSystem,</span>
<span id="cb8-4"><a href="#cb8-4"></a>    confidence_threshold: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>) <span class="op">-&gt;</span> Dict:</span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="co">"""</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">    RAG + Fallback ì „ëµ</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">    </span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">    1. RAGë¡œ ë‹µë³€ ì‹œë„</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">    2. ì‹ ë¢°ë„ê°€ ë‚®ìœ¼ë©´ ëª¨ë¸ ì§€ì‹ ì‚¬ìš©</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">    """</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>    <span class="co"># Step 1: RAGë¡œ ê²€ìƒ‰</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>    documents <span class="op">=</span> rag.retrieve(query, top_k<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb8-14"><a href="#cb8-14"></a>    </span>
<span id="cb8-15"><a href="#cb8-15"></a>    <span class="co"># ê²€ìƒ‰ í’ˆì§ˆ í‰ê°€</span></span>
<span id="cb8-16"><a href="#cb8-16"></a>    <span class="cf">if</span> <span class="kw">not</span> documents <span class="kw">or</span> <span class="bu">max</span>([<span class="dv">1</span> <span class="op">-</span> d[<span class="st">'distance'</span>] <span class="cf">for</span> d <span class="kw">in</span> documents]) <span class="op">&lt;</span> confidence_threshold:</span>
<span id="cb8-17"><a href="#cb8-17"></a>        <span class="bu">print</span>(<span class="st">"âš ï¸  ê²€ìƒ‰ í’ˆì§ˆ ë‚®ìŒ - ëª¨ë¸ ì§€ì‹ìœ¼ë¡œ ë‹µë³€"</span>)</span>
<span id="cb8-18"><a href="#cb8-18"></a>        </span>
<span id="cb8-19"><a href="#cb8-19"></a>        <span class="co"># ëª¨ë¸ ì§€ì‹ë§Œ ì‚¬ìš©</span></span>
<span id="cb8-20"><a href="#cb8-20"></a>        fallback_prompt <span class="op">=</span> <span class="ss">f"""ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µë³€í•˜ì„¸ìš”:</span></span>
<span id="cb8-21"><a href="#cb8-21"></a></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb8-23"><a href="#cb8-23"></a></span>
<span id="cb8-24"><a href="#cb8-24"></a><span class="ss">ë‹µë³€:"""</span></span>
<span id="cb8-25"><a href="#cb8-25"></a>        </span>
<span id="cb8-26"><a href="#cb8-26"></a>        client <span class="op">=</span> anthropic.Anthropic(api_key<span class="op">=</span><span class="st">"your-api-key"</span>)</span>
<span id="cb8-27"><a href="#cb8-27"></a>        </span>
<span id="cb8-28"><a href="#cb8-28"></a>        message <span class="op">=</span> client.messages.create(</span>
<span id="cb8-29"><a href="#cb8-29"></a>            model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb8-30"><a href="#cb8-30"></a>            max_tokens<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb8-31"><a href="#cb8-31"></a>            temperature<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb8-32"><a href="#cb8-32"></a>            messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: fallback_prompt}]</span>
<span id="cb8-33"><a href="#cb8-33"></a>        )</span>
<span id="cb8-34"><a href="#cb8-34"></a>        </span>
<span id="cb8-35"><a href="#cb8-35"></a>        <span class="cf">return</span> {</span>
<span id="cb8-36"><a href="#cb8-36"></a>            <span class="st">'answer'</span>: message.content[<span class="dv">0</span>].text,</span>
<span id="cb8-37"><a href="#cb8-37"></a>            <span class="st">'mode'</span>: <span class="st">'model_knowledge'</span>,</span>
<span id="cb8-38"><a href="#cb8-38"></a>            <span class="st">'sources'</span>: []</span>
<span id="cb8-39"><a href="#cb8-39"></a>        }</span>
<span id="cb8-40"><a href="#cb8-40"></a>    </span>
<span id="cb8-41"><a href="#cb8-41"></a>    <span class="co"># Step 2: RAG ë‹µë³€</span></span>
<span id="cb8-42"><a href="#cb8-42"></a>    result <span class="op">=</span> rag.generate_answer(query, documents)</span>
<span id="cb8-43"><a href="#cb8-43"></a>    </span>
<span id="cb8-44"><a href="#cb8-44"></a>    <span class="cf">return</span> {</span>
<span id="cb8-45"><a href="#cb8-45"></a>        <span class="st">'answer'</span>: result[<span class="st">'answer'</span>],</span>
<span id="cb8-46"><a href="#cb8-46"></a>        <span class="st">'mode'</span>: <span class="st">'rag'</span>,</span>
<span id="cb8-47"><a href="#cb8-47"></a>        <span class="st">'sources'</span>: documents</span>
<span id="cb8-48"><a href="#cb8-48"></a>    }</span></code><button title="í´ë¦½ë³´ë“œ ë³µì‚¬" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="ì°½ì˜ì -ì‘ì—…ì—-ë¶€ì í•©" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="ì°½ì˜ì -ì‘ì—…ì—-ë¶€ì í•©"><span class="header-section-number">3.2</span> ì°½ì˜ì  ì‘ì—…ì— ë¶€ì í•©</h3>
<p><strong>ë¬¸ì œ</strong>: RAGëŠ” ì •ë³´ ê²€ìƒ‰ ê¸°ë°˜ì´ë¯€ë¡œ ì°½ì˜ì„±ì´ ì œí•œë¨</p>
<p><strong>ì˜ˆì‹œ</strong>:</p>
<pre><code>ì§ˆë¬¸: "ë¯¸ë˜ ë„ì‹œì— ëŒ€í•œ ê³µìƒê³¼í•™ ì†Œì„¤ì„ ì¨ì¤˜"

RAG: (ë¬¸ì„œ ê²€ìƒ‰) â†’ ê¸°ì¡´ SF ì†Œì„¤ ë‚´ìš©ë§Œ ì¡°í•©
â†’ ì°½ì˜ì„± ë¶€ì¡±, í‘œì ˆ ìœ„í—˜</code></pre>
<p><strong>í•´ê²°ì±…</strong>: ì‘ì—… ìœ í˜•ì— ë”°ë¼ ì„ íƒì  RAG ì‚¬ìš©</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">def</span> adaptive_rag(query: <span class="bu">str</span>, rag: SimpleRAGSystem) <span class="op">-&gt;</span> Dict:</span>
<span id="cb10-2"><a href="#cb10-2"></a>    <span class="co">"""</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co">    ì‘ì—… ìœ í˜•ì„ ë¶„ì„í•˜ê³  ì ì ˆí•œ ë°©ë²• ì„ íƒ</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co">    """</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>    <span class="co"># Step 1: ì‘ì—… ìœ í˜• ë¶„ë¥˜</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>    classify_prompt <span class="op">=</span> <span class="ss">f"""ë‹¤ìŒ ì§ˆë¬¸ì„ ë¶„ë¥˜í•˜ì„¸ìš”:</span></span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="ss">ì§ˆë¬¸: </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb10-9"><a href="#cb10-9"></a></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="ss">ì¹´í…Œê³ ë¦¬:</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="ss">- factual: ì‚¬ì‹¤ ê¸°ë°˜ ì •ë³´ ìš”ì²­</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="ss">- creative: ì°½ì˜ì  ì½˜í…ì¸  ìƒì„±</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="ss">- analytical: ë¶„ì„ ë˜ëŠ” ì¶”ë¡ </span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="ss">- conversational: ì¼ìƒ ëŒ€í™”</span></span>
<span id="cb10-15"><a href="#cb10-15"></a></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="ss">ì¹´í…Œê³ ë¦¬ (í•˜ë‚˜ë§Œ):"""</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>    </span>
<span id="cb10-18"><a href="#cb10-18"></a>    client <span class="op">=</span> anthropic.Anthropic(api_key<span class="op">=</span><span class="st">"your-api-key"</span>)</span>
<span id="cb10-19"><a href="#cb10-19"></a>    </span>
<span id="cb10-20"><a href="#cb10-20"></a>    message <span class="op">=</span> client.messages.create(</span>
<span id="cb10-21"><a href="#cb10-21"></a>        model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb10-22"><a href="#cb10-22"></a>        max_tokens<span class="op">=</span><span class="dv">20</span>,</span>
<span id="cb10-23"><a href="#cb10-23"></a>        temperature<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb10-24"><a href="#cb10-24"></a>        messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: classify_prompt}]</span>
<span id="cb10-25"><a href="#cb10-25"></a>    )</span>
<span id="cb10-26"><a href="#cb10-26"></a>    </span>
<span id="cb10-27"><a href="#cb10-27"></a>    category <span class="op">=</span> message.content[<span class="dv">0</span>].text.strip().lower()</span>
<span id="cb10-28"><a href="#cb10-28"></a>    </span>
<span id="cb10-29"><a href="#cb10-29"></a>    <span class="co"># Step 2: ì¹´í…Œê³ ë¦¬ë³„ ì²˜ë¦¬</span></span>
<span id="cb10-30"><a href="#cb10-30"></a>    <span class="cf">if</span> category <span class="op">==</span> <span class="st">'factual'</span>:</span>
<span id="cb10-31"><a href="#cb10-31"></a>        <span class="co"># RAG ì‚¬ìš©</span></span>
<span id="cb10-32"><a href="#cb10-32"></a>        <span class="cf">return</span> rag_with_fallback(query, rag)</span>
<span id="cb10-33"><a href="#cb10-33"></a>    </span>
<span id="cb10-34"><a href="#cb10-34"></a>    <span class="cf">elif</span> category <span class="op">==</span> <span class="st">'creative'</span>:</span>
<span id="cb10-35"><a href="#cb10-35"></a>        <span class="co"># ëª¨ë¸ ì§€ì‹ë§Œ ì‚¬ìš© (RAG ìŠ¤í‚µ)</span></span>
<span id="cb10-36"><a href="#cb10-36"></a>        <span class="bu">print</span>(<span class="st">"ğŸ¨ ì°½ì˜ì  ì‘ì—… - ëª¨ë¸ ì§€ì‹ ì‚¬ìš©"</span>)</span>
<span id="cb10-37"><a href="#cb10-37"></a>        </span>
<span id="cb10-38"><a href="#cb10-38"></a>        creative_prompt <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>query<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">ì°½ì˜ì ìœ¼ë¡œ ë‹µë³€í•˜ì„¸ìš”:"</span></span>
<span id="cb10-39"><a href="#cb10-39"></a>        </span>
<span id="cb10-40"><a href="#cb10-40"></a>        message <span class="op">=</span> client.messages.create(</span>
<span id="cb10-41"><a href="#cb10-41"></a>            model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb10-42"><a href="#cb10-42"></a>            max_tokens<span class="op">=</span><span class="dv">2000</span>,</span>
<span id="cb10-43"><a href="#cb10-43"></a>            temperature<span class="op">=</span><span class="fl">0.8</span>,  <span class="co"># ë†’ì€ temperature</span></span>
<span id="cb10-44"><a href="#cb10-44"></a>            messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: creative_prompt}]</span>
<span id="cb10-45"><a href="#cb10-45"></a>        )</span>
<span id="cb10-46"><a href="#cb10-46"></a>        </span>
<span id="cb10-47"><a href="#cb10-47"></a>        <span class="cf">return</span> {</span>
<span id="cb10-48"><a href="#cb10-48"></a>            <span class="st">'answer'</span>: message.content[<span class="dv">0</span>].text,</span>
<span id="cb10-49"><a href="#cb10-49"></a>            <span class="st">'mode'</span>: <span class="st">'creative'</span>,</span>
<span id="cb10-50"><a href="#cb10-50"></a>            <span class="st">'sources'</span>: []</span>
<span id="cb10-51"><a href="#cb10-51"></a>        }</span>
<span id="cb10-52"><a href="#cb10-52"></a>    </span>
<span id="cb10-53"><a href="#cb10-53"></a>    <span class="cf">else</span>:</span>
<span id="cb10-54"><a href="#cb10-54"></a>        <span class="co"># ê¸°ë³¸: RAG + ëª¨ë¸ ì§€ì‹ ê²°í•©</span></span>
<span id="cb10-55"><a href="#cb10-55"></a>        <span class="cf">return</span> rag_with_fallback(query, rag)</span></code><button title="í´ë¦½ë³´ë“œ ë³µì‚¬" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="ë¬¸ì„œ-ê°„-ì •ë³´-ì¢…í•©-ì–´ë ¤ì›€" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="ë¬¸ì„œ-ê°„-ì •ë³´-ì¢…í•©-ì–´ë ¤ì›€"><span class="header-section-number">3.3</span> ë¬¸ì„œ ê°„ ì •ë³´ ì¢…í•© ì–´ë ¤ì›€</h3>
<p><strong>ë¬¸ì œ</strong>: ì—¬ëŸ¬ ë¬¸ì„œì— ë¶„ì‚°ëœ ì •ë³´ë¥¼ ì¢…í•©í•˜ê¸° ì–´ë ¤ì›€</p>
<p><strong>ì˜ˆì‹œ</strong>:</p>
<pre><code>Doc 1: "Anthropicì€ 2021ë…„ ì„¤ë¦½"
Doc 2: "Anthropic CEOëŠ” Dario Amodei"
Doc 3: "DarioëŠ” OpenAI ì¶œì‹ "

ì§ˆë¬¸: "Anthropicì˜ ì„¤ë¦½ ì—°ë„ì™€ CEOì˜ ì´ì „ íšŒì‚¬ëŠ”?"
â†’ 3ê°œ ë¬¸ì„œë¥¼ ëª¨ë‘ ì°¸ì¡°í•´ì•¼ í•¨</code></pre>
<p><strong>í•´ê²°ì±…</strong>: Iterative RAG</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">def</span> iterative_rag(</span>
<span id="cb12-2"><a href="#cb12-2"></a>    query: <span class="bu">str</span>, </span>
<span id="cb12-3"><a href="#cb12-3"></a>    rag: SimpleRAGSystem,</span>
<span id="cb12-4"><a href="#cb12-4"></a>    max_iterations: <span class="bu">int</span> <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>) <span class="op">-&gt;</span> Dict:</span>
<span id="cb12-6"><a href="#cb12-6"></a>    <span class="co">"""</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co">    ë°˜ë³µì  RAG: ë‹µë³€ì´ ë¶ˆì™„ì „í•˜ë©´ ì¶”ê°€ ê²€ìƒ‰</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co">    """</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>    accumulated_docs <span class="op">=</span> []</span>
<span id="cb12-10"><a href="#cb12-10"></a>    accumulated_context <span class="op">=</span> <span class="st">""</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>    </span>
<span id="cb12-12"><a href="#cb12-12"></a>    <span class="cf">for</span> iteration <span class="kw">in</span> <span class="bu">range</span>(max_iterations):</span>
<span id="cb12-13"><a href="#cb12-13"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">ğŸ”„ Iteration </span><span class="sc">{</span>iteration <span class="op">+</span> <span class="dv">1</span><span class="sc">}</span><span class="ss">/</span><span class="sc">{</span>max_iterations<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb12-14"><a href="#cb12-14"></a>        </span>
<span id="cb12-15"><a href="#cb12-15"></a>        <span class="co"># Step 1: ê²€ìƒ‰ (ì´ì „ ì»¨í…ìŠ¤íŠ¸ í¬í•¨)</span></span>
<span id="cb12-16"><a href="#cb12-16"></a>        <span class="cf">if</span> accumulated_context:</span>
<span id="cb12-17"><a href="#cb12-17"></a>            enhanced_query <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>query<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">ì´ë¯¸ ì•Œê³  ìˆëŠ” ì •ë³´:</span><span class="ch">\n</span><span class="sc">{</span>accumulated_context<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb12-18"><a href="#cb12-18"></a>        <span class="cf">else</span>:</span>
<span id="cb12-19"><a href="#cb12-19"></a>            enhanced_query <span class="op">=</span> query</span>
<span id="cb12-20"><a href="#cb12-20"></a>        </span>
<span id="cb12-21"><a href="#cb12-21"></a>        docs <span class="op">=</span> rag.retrieve(enhanced_query, top_k<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb12-22"><a href="#cb12-22"></a>        </span>
<span id="cb12-23"><a href="#cb12-23"></a>        <span class="co"># ì¤‘ë³µ ì œê±°í•˜ë©° ëˆ„ì </span></span>
<span id="cb12-24"><a href="#cb12-24"></a>        new_docs <span class="op">=</span> [d <span class="cf">for</span> d <span class="kw">in</span> docs <span class="cf">if</span> d <span class="kw">not</span> <span class="kw">in</span> accumulated_docs]</span>
<span id="cb12-25"><a href="#cb12-25"></a>        accumulated_docs.extend(new_docs)</span>
<span id="cb12-26"><a href="#cb12-26"></a>        </span>
<span id="cb12-27"><a href="#cb12-27"></a>        <span class="bu">print</span>(<span class="ss">f"  ìƒˆë¡œìš´ ë¬¸ì„œ: </span><span class="sc">{</span><span class="bu">len</span>(new_docs)<span class="sc">}</span><span class="ss">ê°œ"</span>)</span>
<span id="cb12-28"><a href="#cb12-28"></a>        </span>
<span id="cb12-29"><a href="#cb12-29"></a>        <span class="co"># Step 2: ë‹µë³€ ìƒì„±</span></span>
<span id="cb12-30"><a href="#cb12-30"></a>        result <span class="op">=</span> rag.generate_answer(query, accumulated_docs)</span>
<span id="cb12-31"><a href="#cb12-31"></a>        answer <span class="op">=</span> result[<span class="st">'answer'</span>]</span>
<span id="cb12-32"><a href="#cb12-32"></a>        </span>
<span id="cb12-33"><a href="#cb12-33"></a>        <span class="co"># Step 3: ì™„ì„±ë„ í‰ê°€</span></span>
<span id="cb12-34"><a href="#cb12-34"></a>        completeness_prompt <span class="op">=</span> <span class="ss">f"""ë‹¤ìŒ ë‹µë³€ì´ ì§ˆë¬¸ì— ì™„ì „íˆ ë‹µí–ˆëŠ”ì§€ í‰ê°€í•˜ì„¸ìš”.</span></span>
<span id="cb12-35"><a href="#cb12-35"></a></span>
<span id="cb12-36"><a href="#cb12-36"></a><span class="ss">ì§ˆë¬¸: </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb12-37"><a href="#cb12-37"></a></span>
<span id="cb12-38"><a href="#cb12-38"></a><span class="ss">ë‹µë³€: </span><span class="sc">{</span>answer<span class="sc">}</span></span>
<span id="cb12-39"><a href="#cb12-39"></a></span>
<span id="cb12-40"><a href="#cb12-40"></a><span class="ss">í‰ê°€:</span></span>
<span id="cb12-41"><a href="#cb12-41"></a><span class="ss">- complete: ì§ˆë¬¸ì— ì™„ì „íˆ ë‹µí•¨</span></span>
<span id="cb12-42"><a href="#cb12-42"></a><span class="ss">- incomplete: ì¶”ê°€ ì •ë³´ í•„ìš”</span></span>
<span id="cb12-43"><a href="#cb12-43"></a></span>
<span id="cb12-44"><a href="#cb12-44"></a><span class="ss">í‰ê°€ (í•˜ë‚˜ë§Œ):"""</span></span>
<span id="cb12-45"><a href="#cb12-45"></a>        </span>
<span id="cb12-46"><a href="#cb12-46"></a>        client <span class="op">=</span> anthropic.Anthropic(api_key<span class="op">=</span><span class="st">"your-api-key"</span>)</span>
<span id="cb12-47"><a href="#cb12-47"></a>        </span>
<span id="cb12-48"><a href="#cb12-48"></a>        message <span class="op">=</span> client.messages.create(</span>
<span id="cb12-49"><a href="#cb12-49"></a>            model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb12-50"><a href="#cb12-50"></a>            max_tokens<span class="op">=</span><span class="dv">20</span>,</span>
<span id="cb12-51"><a href="#cb12-51"></a>            temperature<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb12-52"><a href="#cb12-52"></a>            messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: completeness_prompt}]</span>
<span id="cb12-53"><a href="#cb12-53"></a>        )</span>
<span id="cb12-54"><a href="#cb12-54"></a>        </span>
<span id="cb12-55"><a href="#cb12-55"></a>        completeness <span class="op">=</span> message.content[<span class="dv">0</span>].text.strip().lower()</span>
<span id="cb12-56"><a href="#cb12-56"></a>        </span>
<span id="cb12-57"><a href="#cb12-57"></a>        <span class="bu">print</span>(<span class="ss">f"  ì™„ì„±ë„: </span><span class="sc">{</span>completeness<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb12-58"><a href="#cb12-58"></a>        </span>
<span id="cb12-59"><a href="#cb12-59"></a>        <span class="cf">if</span> <span class="st">'complete'</span> <span class="kw">in</span> completeness:</span>
<span id="cb12-60"><a href="#cb12-60"></a>            <span class="bu">print</span>(<span class="st">"âœ… ë‹µë³€ ì™„ì„±"</span>)</span>
<span id="cb12-61"><a href="#cb12-61"></a>            <span class="cf">break</span></span>
<span id="cb12-62"><a href="#cb12-62"></a>        </span>
<span id="cb12-63"><a href="#cb12-63"></a>        <span class="co"># ë‹¤ìŒ ë°˜ë³µì„ ìœ„í•´ í˜„ì¬ ë‹µë³€ì„ ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€</span></span>
<span id="cb12-64"><a href="#cb12-64"></a>        accumulated_context <span class="op">=</span> answer</span>
<span id="cb12-65"><a href="#cb12-65"></a>    </span>
<span id="cb12-66"><a href="#cb12-66"></a>    <span class="cf">return</span> {</span>
<span id="cb12-67"><a href="#cb12-67"></a>        <span class="st">'query'</span>: query,</span>
<span id="cb12-68"><a href="#cb12-68"></a>        <span class="st">'answer'</span>: answer,</span>
<span id="cb12-69"><a href="#cb12-69"></a>        <span class="st">'iterations'</span>: iteration <span class="op">+</span> <span class="dv">1</span>,</span>
<span id="cb12-70"><a href="#cb12-70"></a>        <span class="st">'sources'</span>: accumulated_docs</span>
<span id="cb12-71"><a href="#cb12-71"></a>    }</span></code><button title="í´ë¦½ë³´ë“œ ë³µì‚¬" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="rag-ë‹¤ë¥¸-ê³ ê¸‰-ê¸°ë²•-ì¡°í•©" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="rag-ë‹¤ë¥¸-ê³ ê¸‰-ê¸°ë²•-ì¡°í•©"><span class="header-section-number">4</span> RAG + ë‹¤ë¥¸ ê³ ê¸‰ ê¸°ë²• ì¡°í•©</h2>
<section id="rag-generate-knowledge" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="rag-generate-knowledge"><span class="header-section-number">4.1</span> RAG + Generate Knowledge</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">def</span> rag_with_generated_knowledge(query: <span class="bu">str</span>, rag: SimpleRAGSystem) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb13-2"><a href="#cb13-2"></a>    <span class="co">"""</span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co">    1. ëª¨ë¸ì´ ë°°ê²½ ì§€ì‹ ìƒì„±</span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co">    2. ìƒì„±ëœ ì§€ì‹ìœ¼ë¡œ ê²€ìƒ‰</span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co">    3. ê²€ìƒ‰ ê²°ê³¼ + ìƒì„± ì§€ì‹ìœ¼ë¡œ ë‹µë³€</span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co">    """</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>    <span class="co"># Step 1: ë°°ê²½ ì§€ì‹ ìƒì„±</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>    knowledge_prompt <span class="op">=</span> <span class="ss">f"""ë‹¤ìŒ ì§ˆë¬¸ê³¼ ê´€ë ¨ëœ ë°°ê²½ ì§€ì‹ì„ ìƒì„±í•˜ì„¸ìš”:</span></span>
<span id="cb13-9"><a href="#cb13-9"></a></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="ss">ì§ˆë¬¸: </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb13-11"><a href="#cb13-11"></a></span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="ss">ë°°ê²½ ì§€ì‹:"""</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>    </span>
<span id="cb13-14"><a href="#cb13-14"></a>    client <span class="op">=</span> anthropic.Anthropic(api_key<span class="op">=</span><span class="st">"your-api-key"</span>)</span>
<span id="cb13-15"><a href="#cb13-15"></a>    </span>
<span id="cb13-16"><a href="#cb13-16"></a>    message <span class="op">=</span> client.messages.create(</span>
<span id="cb13-17"><a href="#cb13-17"></a>        model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb13-18"><a href="#cb13-18"></a>        max_tokens<span class="op">=</span><span class="dv">300</span>,</span>
<span id="cb13-19"><a href="#cb13-19"></a>        temperature<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb13-20"><a href="#cb13-20"></a>        messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: knowledge_prompt}]</span>
<span id="cb13-21"><a href="#cb13-21"></a>    )</span>
<span id="cb13-22"><a href="#cb13-22"></a>    </span>
<span id="cb13-23"><a href="#cb13-23"></a>    generated_knowledge <span class="op">=</span> message.content[<span class="dv">0</span>].text</span>
<span id="cb13-24"><a href="#cb13-24"></a>    </span>
<span id="cb13-25"><a href="#cb13-25"></a>    <span class="bu">print</span>(<span class="ss">f"ğŸ’¡ ìƒì„±ëœ ë°°ê²½ ì§€ì‹:</span><span class="ch">\n</span><span class="sc">{</span>generated_knowledge<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb13-26"><a href="#cb13-26"></a>    </span>
<span id="cb13-27"><a href="#cb13-27"></a>    <span class="co"># Step 2: ìƒì„±ëœ ì§€ì‹ì„ ì¿¼ë¦¬ì— ì¶”ê°€í•˜ì—¬ ê²€ìƒ‰</span></span>
<span id="cb13-28"><a href="#cb13-28"></a>    enhanced_query <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>query<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">ê´€ë ¨ ë°°ê²½:</span><span class="ch">\n</span><span class="sc">{</span>generated_knowledge<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb13-29"><a href="#cb13-29"></a>    </span>
<span id="cb13-30"><a href="#cb13-30"></a>    docs <span class="op">=</span> rag.retrieve(enhanced_query, top_k<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb13-31"><a href="#cb13-31"></a>    </span>
<span id="cb13-32"><a href="#cb13-32"></a>    <span class="co"># Step 3: ë°°ê²½ ì§€ì‹ + ê²€ìƒ‰ ê²°ê³¼ë¡œ ë‹µë³€</span></span>
<span id="cb13-33"><a href="#cb13-33"></a>    context <span class="op">=</span> <span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>.join([doc[<span class="st">'text'</span>] <span class="cf">for</span> doc <span class="kw">in</span> docs])</span>
<span id="cb13-34"><a href="#cb13-34"></a>    </span>
<span id="cb13-35"><a href="#cb13-35"></a>    final_prompt <span class="op">=</span> <span class="ss">f"""ë‹¤ìŒ ë°°ê²½ ì§€ì‹ê³¼ ë¬¸ì„œë“¤ì„ ì°¸ê³ í•˜ì—¬ ì§ˆë¬¸ì— ë‹µë³€í•˜ì„¸ìš”:</span></span>
<span id="cb13-36"><a href="#cb13-36"></a></span>
<span id="cb13-37"><a href="#cb13-37"></a><span class="ss">    ë°°ê²½ ì§€ì‹:</span></span>
<span id="cb13-38"><a href="#cb13-38"></a><span class="ss">    </span><span class="sc">{</span>generated_knowledge<span class="sc">}</span></span>
<span id="cb13-39"><a href="#cb13-39"></a></span>
<span id="cb13-40"><a href="#cb13-40"></a><span class="ss">    ê²€ìƒ‰ëœ ë¬¸ì„œ:</span></span>
<span id="cb13-41"><a href="#cb13-41"></a><span class="ss">    </span><span class="sc">{</span>context<span class="sc">}</span></span>
<span id="cb13-42"><a href="#cb13-42"></a></span>
<span id="cb13-43"><a href="#cb13-43"></a><span class="ss">    ì§ˆë¬¸: </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb13-44"><a href="#cb13-44"></a></span>
<span id="cb13-45"><a href="#cb13-45"></a><span class="ss">    ë‹µë³€:"""</span></span>
<span id="cb13-46"><a href="#cb13-46"></a>    </span>
<span id="cb13-47"><a href="#cb13-47"></a>    message <span class="op">=</span> client.messages.create(</span>
<span id="cb13-48"><a href="#cb13-48"></a>        model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb13-49"><a href="#cb13-49"></a>        max_tokens<span class="op">=</span><span class="dv">1000</span>,</span>
<span id="cb13-50"><a href="#cb13-50"></a>        temperature<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb13-51"><a href="#cb13-51"></a>        messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: final_prompt}]</span>
<span id="cb13-52"><a href="#cb13-52"></a>    )</span>
<span id="cb13-53"><a href="#cb13-53"></a>    </span>
<span id="cb13-54"><a href="#cb13-54"></a>    <span class="cf">return</span> message.content[<span class="dv">0</span>].text</span></code><button title="í´ë¦½ë³´ë“œ ë³µì‚¬" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="rag-tree-of-thoughts" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="rag-tree-of-thoughts"><span class="header-section-number">4.2</span> RAG + Tree of Thoughts</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">def</span> rag_with_tot(query: <span class="bu">str</span>, rag: SimpleRAGSystem) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb14-2"><a href="#cb14-2"></a>    <span class="co">"""</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co">    RAGë¡œ ê²€ìƒ‰ â†’ ToTë¡œ ì¶”ë¡ </span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co">    </span></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co">    ë³µì¡í•œ ë¶„ì„ ì‘ì—…ì— ìœ ìš©</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="co">    """</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>    <span class="co"># Step 1: RAGë¡œ ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>    docs <span class="op">=</span> rag.retrieve(query, top_k<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb14-9"><a href="#cb14-9"></a>    context <span class="op">=</span> <span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>.join([doc[<span class="st">'text'</span>] <span class="cf">for</span> doc <span class="kw">in</span> docs])</span>
<span id="cb14-10"><a href="#cb14-10"></a>    </span>
<span id="cb14-11"><a href="#cb14-11"></a>    <span class="co"># Step 2: ToT ìŠ¤íƒ€ì¼ í”„ë¡¬í”„íŠ¸</span></span>
<span id="cb14-12"><a href="#cb14-12"></a>    tot_prompt <span class="op">=</span> <span class="ss">f"""ë‹¤ìŒ ë¬¸ì„œë“¤ì„ ì°¸ê³ í•˜ì—¬ ì§ˆë¬¸ì— ë‹µë³€í•˜ì„¸ìš”.</span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="ss">    ì—¬ëŸ¬ ì ‘ê·¼ ë°©ë²•ì„ ê³ ë ¤í•˜ê³ , ê°€ì¥ ì¢‹ì€ ë°©ë²•ì„ ì„ íƒí•˜ì„¸ìš”.</span></span>
<span id="cb14-14"><a href="#cb14-14"></a></span>
<span id="cb14-15"><a href="#cb14-15"></a><span class="ss">    ë¬¸ì„œ:</span></span>
<span id="cb14-16"><a href="#cb14-16"></a><span class="ss">    </span><span class="sc">{</span>context<span class="sc">}</span></span>
<span id="cb14-17"><a href="#cb14-17"></a></span>
<span id="cb14-18"><a href="#cb14-18"></a><span class="ss">    ì§ˆë¬¸: </span><span class="sc">{</span>query<span class="sc">}</span></span>
<span id="cb14-19"><a href="#cb14-19"></a></span>
<span id="cb14-20"><a href="#cb14-20"></a><span class="ss">    3ê°€ì§€ ì ‘ê·¼ ë°©ë²•ì„ ìƒê°í•´ë³´ê³ , ê°ê°ì„ í‰ê°€í•œ í›„ ìµœì„ ì˜ ë‹µë³€ì„ ì œì‹œí•˜ì„¸ìš”:</span></span>
<span id="cb14-21"><a href="#cb14-21"></a></span>
<span id="cb14-22"><a href="#cb14-22"></a><span class="ss">    ì ‘ê·¼ 1:</span></span>
<span id="cb14-23"><a href="#cb14-23"></a><span class="ss">    í‰ê°€ 1:</span></span>
<span id="cb14-24"><a href="#cb14-24"></a></span>
<span id="cb14-25"><a href="#cb14-25"></a><span class="ss">    ì ‘ê·¼ 2:</span></span>
<span id="cb14-26"><a href="#cb14-26"></a><span class="ss">    í‰ê°€ 2:</span></span>
<span id="cb14-27"><a href="#cb14-27"></a></span>
<span id="cb14-28"><a href="#cb14-28"></a><span class="ss">    ì ‘ê·¼ 3:</span></span>
<span id="cb14-29"><a href="#cb14-29"></a><span class="ss">    í‰ê°€ 3:</span></span>
<span id="cb14-30"><a href="#cb14-30"></a></span>
<span id="cb14-31"><a href="#cb14-31"></a><span class="ss">    ìµœì¢… ë‹µë³€:"""</span></span>
<span id="cb14-32"><a href="#cb14-32"></a>    </span>
<span id="cb14-33"><a href="#cb14-33"></a>    client <span class="op">=</span> anthropic.Anthropic(api_key<span class="op">=</span><span class="st">"your-api-key"</span>)</span>
<span id="cb14-34"><a href="#cb14-34"></a>    </span>
<span id="cb14-35"><a href="#cb14-35"></a>    message <span class="op">=</span> client.messages.create(</span>
<span id="cb14-36"><a href="#cb14-36"></a>        model<span class="op">=</span><span class="st">"claude-sonnet-4-20250514"</span>,</span>
<span id="cb14-37"><a href="#cb14-37"></a>        max_tokens<span class="op">=</span><span class="dv">2000</span>,</span>
<span id="cb14-38"><a href="#cb14-38"></a>        temperature<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb14-39"><a href="#cb14-39"></a>        messages<span class="op">=</span>[{<span class="st">"role"</span>: <span class="st">"user"</span>, <span class="st">"content"</span>: tot_prompt}]</span>
<span id="cb14-40"><a href="#cb14-40"></a>    )</span>
<span id="cb14-41"><a href="#cb14-41"></a>    </span>
<span id="cb14-42"><a href="#cb14-42"></a>    <span class="cf">return</span> message.content[<span class="dv">0</span>].text</span></code><button title="í´ë¦½ë³´ë“œ ë³µì‚¬" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤-ì²´í¬ë¦¬ìŠ¤íŠ¸" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤-ì²´í¬ë¦¬ìŠ¤íŠ¸"><span class="header-section-number">5</span> ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
<section id="ë°ì´í„°-ì¤€ë¹„" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="ë°ì´í„°-ì¤€ë¹„"><span class="header-section-number">5.1</span> ë°ì´í„° ì¤€ë¹„</h3>
<ul>
<li><strong>ë¬¸ì„œ í’ˆì§ˆ í™•ì¸</strong>: ì˜¤íƒ€, í˜•ì‹ ì˜¤ë¥˜ ì œê±°</li>
<li><strong>ë©”íƒ€ë°ì´í„° ì¶”ê°€</strong>: ì¶œì²˜, ë‚ ì§œ, ì¹´í…Œê³ ë¦¬ ë“±</li>
<li><strong>ì¤‘ë³µ ì œê±°</strong>: ë™ì¼í•˜ê±°ë‚˜ ë§¤ìš° ìœ ì‚¬í•œ ë¬¸ì„œ ì œê±°</li>
<li><strong>ì ‘ê·¼ ì œì–´</strong>: ë¯¼ê° ì •ë³´ í•„í„°ë§</li>
</ul>
</section>
<section id="ì²­í‚¹-ì „ëµ" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="ì²­í‚¹-ì „ëµ"><span class="header-section-number">5.2</span> ì²­í‚¹ ì „ëµ</h3>
<ul>
<li><strong>ì ì ˆí•œ ì²­í¬ í¬ê¸°</strong>: 512-1024 í† í° (ì¼ë°˜ì )</li>
<li><strong>ì˜¤ë²„ë© ì„¤ì •</strong>: 50-100 í† í°</li>
<li><strong>êµ¬ì¡° ë³´ì¡´</strong>: ë¬¸ì¥/ë¬¸ë‹¨ ê²½ê³„ ì¡´ì¤‘</li>
<li><strong>ë©”íƒ€ë°ì´í„° ìœ ì§€</strong>: ê° ì²­í¬ì— ì¶œì²˜ ì •ë³´</li>
</ul>
</section>
<section id="ê²€ìƒ‰-ìµœì í™”" class="level3" data-number="5.3">
<h3 data-number="5.3" class="anchored" data-anchor-id="ê²€ìƒ‰-ìµœì í™”"><span class="header-section-number">5.3</span> ê²€ìƒ‰ ìµœì í™”</h3>
<ul>
<li><strong>Hybrid Search ê³ ë ¤</strong>: ì˜ë¯¸ë¡  + í‚¤ì›Œë“œ</li>
<li><strong>ì ì ˆí•œ top_k</strong>: 3-5ê°œ (ì¼ë°˜ì )</li>
<li><strong>Re-ranking ì ìš©</strong>: ê²€ìƒ‰ í’ˆì§ˆ ê°œì„ </li>
<li><strong>ì¿¼ë¦¬ ë³€í™˜ í™œìš©</strong>: í™•ì¥, ë¶„í•´, HyDE ë“±</li>
</ul>
</section>
<section id="í”„ë¡¬í”„íŠ¸-ì„¤ê³„" class="level3" data-number="5.4">
<h3 data-number="5.4" class="anchored" data-anchor-id="í”„ë¡¬í”„íŠ¸-ì„¤ê³„"><span class="header-section-number">5.4</span> í”„ë¡¬í”„íŠ¸ ì„¤ê³„</h3>
<ul>
<li><strong>ëª…í™•í•œ ì§€ì‹œ</strong>: â€œë¬¸ì„œ ê¸°ë°˜ ë‹µë³€â€ ëª…ì‹œ</li>
<li><strong>í• ë£¨ì‹œë„¤ì´ì…˜ ë°©ì§€</strong>: â€œë¬¸ì„œì— ì—†ìœ¼ë©´ ëª¨ë¥¸ë‹¤ê³  ë‹µë³€â€</li>
<li><strong>ì¶œì²˜ ì–¸ê¸‰ ìœ ë„</strong>: â€œì–´ëŠ ë¬¸ì„œì—ì„œ ê°€ì ¸ì™”ëŠ”ì§€ ëª…ì‹œâ€</li>
<li><strong>í˜•ì‹ ì§€ì •</strong>: ì›í•˜ëŠ” ë‹µë³€ í˜•ì‹ ì˜ˆì‹œ ì œê³µ</li>
</ul>
</section>
<section id="ì„±ëŠ¥-ìµœì í™”" class="level3" data-number="5.5">
<h3 data-number="5.5" class="anchored" data-anchor-id="ì„±ëŠ¥-ìµœì í™”"><span class="header-section-number">5.5</span> ì„±ëŠ¥ ìµœì í™”</h3>
<ul>
<li><strong>ìºì‹± í™œìš©</strong>: ë°˜ë³µ ì¿¼ë¦¬ ìºì‹±</li>
<li><strong>ë°°ì¹˜ ì²˜ë¦¬</strong>: ì„ë² ë”© ìƒì„± ì‹œ ë°°ì¹˜</li>
<li><strong>ë¹„ë™ê¸° ì²˜ë¦¬</strong>: ê²€ìƒ‰ê³¼ ìƒì„± íŒŒì´í”„ë¼ì¸í™”</li>
<li><strong>ì¡°ê¸° ì¢…ë£Œ</strong>: ì¶©ë¶„íˆ ì¢‹ì€ ë‹µë³€ ì‹œ ì¤‘ë‹¨</li>
</ul>
</section>
<section id="í‰ê°€-ë°-ëª¨ë‹ˆí„°ë§" class="level3" data-number="5.6">
<h3 data-number="5.6" class="anchored" data-anchor-id="í‰ê°€-ë°-ëª¨ë‹ˆí„°ë§"><span class="header-section-number">5.6</span> í‰ê°€ ë° ëª¨ë‹ˆí„°ë§</h3>
<ul>
<li><strong>ê²€ìƒ‰ í’ˆì§ˆ ì¸¡ì •</strong>: Precision, Recall, MRR</li>
<li><strong>ë‹µë³€ í’ˆì§ˆ í‰ê°€</strong>: Faithfulness, Relevance</li>
<li><strong>ì§€ì—° ì‹œê°„ ëª¨ë‹ˆí„°ë§</strong>: ê²€ìƒ‰/ìƒì„± ì‹œê°„ ì¶”ì </li>
<li><strong>ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘</strong>: ì¸ì—…/ì¸ë‹¤ìš´, ìƒì„¸ í”¼ë“œë°±</li>
</ul>
</section>
<section id="ì•ˆì „-ë°-ë³´ì•ˆ" class="level3" data-number="5.7">
<h3 data-number="5.7" class="anchored" data-anchor-id="ì•ˆì „-ë°-ë³´ì•ˆ"><span class="header-section-number">5.7</span> ì•ˆì „ ë° ë³´ì•ˆ</h3>
<ul>
<li><strong>ì…ë ¥ ê²€ì¦</strong>: ì•…ì˜ì  ì¿¼ë¦¬ í•„í„°ë§</li>
<li><strong>ì¶œë ¥ ê²€ì¦</strong>: ìœ í•´ ì½˜í…ì¸  íƒì§€</li>
<li><strong>ì ‘ê·¼ ì œì–´</strong>: ì‚¬ìš©ìë³„ ë¬¸ì„œ ê¶Œí•œ</li>
<li><strong>ê°œì¸ì •ë³´ ë³´í˜¸</strong>: PII ë§ˆìŠ¤í‚¹</li>
</ul>
</section>
</section>
<section id="ì¼ë°˜ì ì¸-ì‹¤ìˆ˜ì™€-í•´ê²°ì±…" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="ì¼ë°˜ì ì¸-ì‹¤ìˆ˜ì™€-í•´ê²°ì±…"><span class="header-section-number">6</span> ì¼ë°˜ì ì¸ ì‹¤ìˆ˜ì™€ í•´ê²°ì±…</h2>
<section id="ë„ˆë¬´-í°-ì²­í¬" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="ë„ˆë¬´-í°-ì²­í¬"><span class="header-section-number">6.1</span> ë„ˆë¬´ í° ì²­í¬</h3>
<ul>
<li>ì²­í¬ í¬ê¸°: 5000 í† í°</li>
<li>ê²°ê³¼: ê´€ë ¨ ì—†ëŠ” ë‚´ìš©ì´ ë§ì´ í¬í•¨ë¨</li>
<li><strong>í•´ê²°ì±…</strong>
<ul>
<li>ì²­í¬ í¬ê¸° ì¤„ì´ê¸° or</li>
<li>ê³„ì¸µì  ì ‘ê·¼ or</li>
<li>Parent Retriver</li>
</ul></li>
</ul>
</section>
<section id="top_k-ë„ˆë¬´-í¬ê²Œ-ì„¤ì •" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="top_k-ë„ˆë¬´-í¬ê²Œ-ì„¤ì •"><span class="header-section-number">6.2</span> top_k ë„ˆë¬´ í¬ê²Œ ì„¤ì •</h3>
<ul>
<li>top_k = 50</li>
<li>ê²°ê³¼: ë…¸ì´ì¦ˆê°€ ë§ì•„ ë‹µë³€ í’ˆì§ˆ ì €í•˜</li>
<li><strong>í•´ê²°ì±…</strong>:
<ul>
<li>ëŒ€ë¶€ë¶„ì˜ ê²½ìš°: top_k = 3-5</li>
<li>ë˜ëŠ” ë™ì  ê²°ì •</li>
</ul></li>
</ul>
</section>
<section id="ì„ë² ë”©-ëª¨ë¸-ë¶ˆì¼ì¹˜" class="level3" data-number="6.3">
<h3 data-number="6.3" class="anchored" data-anchor-id="ì„ë² ë”©-ëª¨ë¸-ë¶ˆì¼ì¹˜"><span class="header-section-number">6.3</span> ì„ë² ë”© ëª¨ë¸ ë¶ˆì¼ì¹˜</h3>
<ul>
<li>ì¸ë±ì‹±: text-embedding-ada-002</li>
<li>ê²€ìƒ‰: text-embedding-3-large</li>
<li>ê²°ê³¼: ê²€ìƒ‰ í’ˆì§ˆ ë§¤ìš° ë‚˜ì¨</li>
<li>í•´ê²°ì±…: í•­ìƒ ê°™ì€ Embedding ëª¨ë¸ ì‚¬ìš©</li>
</ul>
</section>
<section id="ë©”íƒ€ë°ì´í„°-ë¬´ì‹œ" class="level3" data-number="6.4">
<h3 data-number="6.4" class="anchored" data-anchor-id="ë©”íƒ€ë°ì´í„°-ë¬´ì‹œ"><span class="header-section-number">6.4</span> ë©”íƒ€ë°ì´í„° ë¬´ì‹œ</h3>
<ul>
<li>ëª¨ë“  ë¬¸ì„œë¥¼ ë‚ ì§œ êµ¬ë¶„ ì—†ì´ ì €ì¥</li>
<li>ê²°ê³¼: ì˜¤ë˜ëœ ì •ë³´ê°€ ê²€ìƒ‰ë¨</li>
<li><strong>í•´ê²°ì±…</strong>: ë©”íƒ€ë°ì´í„° í™œìš©í•˜ì—¬ ê²€ìƒ‰</li>
</ul>
</section>
</section>
<section id="ì •ë¦¬-ë°-ê²°ë¡ " class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="ì •ë¦¬-ë°-ê²°ë¡ "><span class="header-section-number">7</span> ì •ë¦¬ ë° ê²°ë¡ </h2>
<section id="ragì˜-í•µì‹¬-ê°€ì¹˜" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="ragì˜-í•µì‹¬-ê°€ì¹˜"><span class="header-section-number">7.1</span> RAGì˜ í•µì‹¬ ê°€ì¹˜</h3>
<ul>
<li>âœ… ì§€ì‹ì˜ ì‹œê°„ì  í•œê³„ ê·¹ë³µ (ìµœì‹  ì •ë³´)</li>
<li>âœ… ë„ë©”ì¸ íŠ¹í™” ì§€ì‹ ë¶€ì¡± ê·¹ë³µ (ë‚´ë¶€ ë¬¸ì„œ)</li>
<li>âœ… í• ë£¨ì‹œë„¤ì´ì…˜ ê·¹ë³µ (ì‹¤ì œ ì¶œì²˜ ê¸°ë°˜)</li>
<li>âœ… ì¶œì²˜ ì¶”ì  ê·¹ë³µ (ì–´ë””ì„œ ì™”ëŠ”ì§€ ëª…í™•)</li>
</ul>
</section>
<section id="ì–¸ì œ-ragë¥¼-ì‚¬ìš©í• -ê²ƒì¸ê°€" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="ì–¸ì œ-ragë¥¼-ì‚¬ìš©í• -ê²ƒì¸ê°€"><span class="header-section-number">7.2</span> ì–¸ì œ RAGë¥¼ ì‚¬ìš©í•  ê²ƒì¸ê°€?</h3>
<p><strong>RAG ì í•©</strong>: - âœ… ì‚¬ì‹¤ ê¸°ë°˜ Q&amp;A - âœ… ë¬¸ì„œ ê²€ìƒ‰ ë° ë¶„ì„ - âœ… ê³ ê° ì§€ì› (FAQ, ë§¤ë‰´ì–¼) - âœ… ì—°êµ¬ ë³´ì¡° (ë…¼ë¬¸, ë³´ê³ ì„œ) - âœ… ë‚´ë¶€ ì§€ì‹ ê´€ë¦¬</p>
<p><strong>RAG ë¶€ì í•©</strong>: - âŒ ì°½ì˜ì  ì½˜í…ì¸  ìƒì„± - âŒ ì¼ë°˜ ìƒì‹ ì§ˆë¬¸ (ëª¨ë¸ ì§€ì‹ìœ¼ë¡œ ì¶©ë¶„) - âŒ ë³µì¡í•œ ì¶”ë¡  (ë‹¤ë¥¸ ê¸°ë²• í•„ìš”) - âŒ ì‹¤ì‹œê°„ ëŒ€í™” (ê²€ìƒ‰ ì§€ì—°)</p>
</section>
<section id="rag-vs-fine-tuning" class="level3" data-number="7.3">
<h3 data-number="7.3" class="anchored" data-anchor-id="rag-vs-fine-tuning"><span class="header-section-number">7.3</span> RAG vs Fine-tuning</h3>
<table class="table">
<thead>
<tr class="header">
<th>íŠ¹ì„±</th>
<th>RAG</th>
<th>Fine-tuning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ë¹„ìš©</strong></td>
<td>ë‚®ìŒ</td>
<td>ë†’ìŒ (ì¬í•™ìŠµ í•„ìš”)</td>
</tr>
<tr class="even">
<td><strong>ì—…ë°ì´íŠ¸</strong></td>
<td>ì‰¬ì›€ (ë¬¸ì„œë§Œ ì¶”ê°€)</td>
<td>ì–´ë ¤ì›€ (ì¬í•™ìŠµ)</td>
</tr>
<tr class="odd">
<td><strong>ì¶œì²˜</strong></td>
<td>ëª…í™•</td>
<td>ë¶ˆëª…í™•</td>
</tr>
<tr class="even">
<td><strong>ë„ë©”ì¸ ì ì‘</strong></td>
<td>ë¹ ë¦„</td>
<td>ëŠë¦¼</td>
</tr>
<tr class="odd">
<td><strong>ì¶”ë¡  ëŠ¥ë ¥</strong></td>
<td>ì œí•œì </td>
<td>ê°•í™” ê°€ëŠ¥</td>
</tr>
<tr class="even">
<td><strong>ì¶”ì²œ</strong></td>
<td>ëŒ€ë¶€ë¶„ì˜ ê²½ìš° â­</td>
<td>íŠ¹ìˆ˜ ë„ë©”ì¸ë§Œ</td>
</tr>
</tbody>
</table>
</section>
<section id="í–¥í›„-ë°œì „-ë°©í–¥" class="level3" data-number="7.4">
<h3 data-number="7.4" class="anchored" data-anchor-id="í–¥í›„-ë°œì „-ë°©í–¥"><span class="header-section-number">7.4</span> í–¥í›„ ë°œì „ ë°©í–¥</h3>
<p><strong>í˜„ì¬ íŠ¸ë Œë“œ</strong>: 1. <strong>Modular RAG</strong>: ê° ì»´í¬ë„ŒíŠ¸ë¥¼ êµì²´ ê°€ëŠ¥í•˜ê²Œ 2. <strong>Agentic RAG</strong>: LLMì´ ìŠ¤ìŠ¤ë¡œ ê²€ìƒ‰ ì „ëµ ê²°ì • 3. <strong>Multi-modal RAG</strong>: í…ìŠ¤íŠ¸, ì´ë¯¸ì§€, í…Œì´ë¸” í†µí•© 4. <strong>Contextual RAG</strong>: ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ê³ ë ¤ 5. <strong>Self-improving RAG</strong>: í”¼ë“œë°±ìœ¼ë¡œ ìë™ ê°œì„ </p>
<p><strong>ê¸°ëŒ€ë˜ëŠ” ë°œì „</strong>: - ë” ê¸´ ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° â†’ ê²€ìƒ‰ í•„ìš”ì„± ê°ì†Œ - ë” ë˜‘ë˜‘í•œ ê²€ìƒ‰ â†’ ì •í™•ë„ í–¥ìƒ - ë” ë¹ ë¥¸ ì²˜ë¦¬ â†’ ì‹¤ì‹œê°„ ì‘ë‹µ ê°€ëŠ¥ - ë” ì €ë ´í•œ ë¹„ìš© â†’ ë„ë¦¬ ë³´ê¸‰</p>
</section>
</section>
<section id="ì°¸ê³ ë¬¸í—Œ" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="ì°¸ê³ ë¬¸í—Œ"><span class="header-section-number">8</span> ì°¸ê³ ë¬¸í—Œ</h2>
<ol type="1">
<li><p>Lewis, P., Perez, E., Piktus, A., Petroni, F., Karpukhin, V., Goyal, N., â€¦ &amp; Kiela, D. (2020). <strong>Retrieval-augmented generation for knowledge-intensive nlp tasks.</strong> <em>Advances in Neural Information Processing Systems, 33</em>, 9459-9474.</p></li>
<li><p>Gao, Y., Xiong, Y., Gao, X., Jia, K., Pan, J., Bi, Y., â€¦ &amp; Wang, H. (2023). <strong>Retrieval-augmented generation for large language models: A survey.</strong> <em>arXiv preprint arXiv:2312.10997</em>.</p></li>
<li><p>Izacard, G., &amp; Grave, E. (2021). <strong>Leveraging passage retrieval with generative models for open domain question answering.</strong> <em>EACL 2021</em>.</p></li>
<li><p>Borgeaud, S., et al.&nbsp;(2022). <strong>Improving language models by retrieving from trillions of tokens.</strong> <em>ICML 2022</em>.</p></li>
<li><p>Khattab, O., et al.&nbsp;(2022). <strong>Demonstrate-Search-Predict: Composing retrieval and language models for knowledge-intensive NLP.</strong> <em>arXiv preprint arXiv:2212.14024</em>.</p></li>
</ol>


</section>

</main> <!-- /main -->
<script type="text/javascript">

// replace cmd keyboard shortcut w/ control on non-Mac platforms
const kPlatformMac = typeof navigator !== 'undefined' ? /Mac/.test(navigator.platform) : false;
if (!kPlatformMac) {
   var kbds = document.querySelectorAll("kbd")
   kbds.forEach(function(kbd) {
      kbd.innerHTML = kbd.innerHTML.replace(/âŒ˜/g, 'âŒƒ');
   });
}

// tweak headings in pymd
document.querySelectorAll(".pymd span.co").forEach(el => {
   if (!el.innerText.startsWith("#|")) {
      el.style.fontWeight = 1000;
   }
});

</script>
<!-- Begin Mailchimp Signup Form -->
<div id="mc_embed_signup" style="padding-bottom: 1em; max-width: 400px;" class="ms-auto me-auto">
  <p style="font-weight: 600; margin-bottom: 0;">Subscribe</p>
  <span style="font-size: 0.9em;">Enjoy this blog? Get notified of new posts by email:</span>
<form action="https://quarto.us14.list-manage.com/subscribe/post?u=c79fb56a311ae347fbe916740&amp;id=ec05dfca03" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
    <div id="mc_embed_signup_scroll">
	
        <div class="input-group mt-1 mb-2">
        <input type="email" class="form-control" placeholder="Email Address" aria-label="Email Address" name="EMAIL" style="font-size: 0.8em; padding: .2em;">
        </div>              

	<div id="mce-responses" class="clear foot">
		<div class="response" id="mce-error-response" style="display:none"></div>
		<div class="response" id="mce-success-response" style="display:none"></div>
	</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_c79fb56a311ae347fbe916740_ec05dfca03" tabindex="-1" value=""></div>
        <div class="optionalParent">
            <div class="clear foot" style="display: flex; align-items: center; justify-content: center;">
              
              
                <input type="submit" value="Subscribe" name="subscribe" style="min-width: 150px; font-size: 0.8em;" id="mc-embedded-subscribe" class="button btn btn-light btn-sm ms-auto me-auto">
            </div>
        </div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "ë³µì‚¬ì™„ë£Œ!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "ë³µì‚¬ì™„ë£Œ!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="kmink3225/blog" data-repo-id="R_kgDOLCZyDg" data-category="Blog" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Â© Kwangmin Kim</p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../../../../about.html">
<p>About</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/kmink3225/blog">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>