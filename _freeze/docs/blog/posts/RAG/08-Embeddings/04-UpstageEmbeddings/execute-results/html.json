{
  "hash": "a2c431461a67f8bcbf5b62379ff67280",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Upstage\"\nsubtitle: 임베딩\ndescription: |\n  텍스트를 벡터로 변환하는 다양한 임베딩 모델을 다룬다.\ncategories:\n  - AI\n  - RAG\n  - LangChain\nauthor: Kwangmin Kim\ndate: 12/31/2024\nformat: \n  html:\n    page-layout: full\n    code-fold: true\n    toc: true\n    number-sections: true\ndraft: False\nexecute:\n    eval: false\n---\n\nUpstage는 인공지능(AI) 기술, 특히 대규모 언어 모델(LLM)과 문서 AI 분야에 특화된 국내 스타트업입니다.\n\n**API 키 발급**\n\n- API 키 발급은 [Upstage API Console](https://console.upstage.ai/api-keys)에서 가능합니다.\n\n::: {#b6952dee .cell execution_count=1}\n``` {.python .cell-code}\n# API KEY를 환경변수로 관리하기 위한 설정 파일\nfrom dotenv import load_dotenv\n\n# API KEY 정보로드\nload_dotenv()\n```\n:::\n\n\n::: {#0595a173 .cell execution_count=2}\n``` {.python .cell-code}\n# LangSmith 추적을 설정합니다. https://smith.langchain.com\n# !pip install langchain-teddynote\nfrom langchain_teddynote import logging\n\n# 프로젝트 이름을 입력합니다.\nlogging.langsmith(\"CH08-Embeddings\")\n```\n:::\n\n\n::: {#563f2a01 .cell execution_count=3}\n``` {.python .cell-code}\ntexts = [\n    \"안녕, 만나서 반가워.\",\n    \"LangChain simplifies the process of building applications with large language models\",\n    \"랭체인 한국어 튜토리얼은 LangChain의 공식 문서, cookbook 및 다양한 실용 예제를 바탕으로 하여 사용자가 LangChain을 더 쉽고 효과적으로 활용할 수 있도록 구성되어 있습니다. \",\n    \"LangChain은 초거대 언어모델로 애플리케이션을 구축하는 과정을 단순화합니다.\",\n    \"Retrieval-Augmented Generation (RAG) is an effective technique for improving AI responses.\",\n]\n```\n:::\n\n\n**지원되는 임베딩 모델 확인**\n\n- https://developers.upstage.ai/docs/apis/embeddings\n\n모델 정보\n\n| Model                              | Release date | Context Length | Description                                                                                         |\n|------------------------------------|--------------|----------------|-----------------------------------------------------------------------------------------------------|\n| solar-embedding-1-large-query      | 2024-05-10   | 4000           | 4k 컨텍스트 제한이 있는 Solar-base Query Embedding 모델입니다. 이 모델은 검색 및 재정렬과 같은 정보 탐색 작업에서 사용자의 질문을 임베딩하는 데 최적화되어 있습니다. |\n| solar-embedding-1-large-passage    | 2024-05-10   | 4000           | 4k 컨텍스트 제한이 있는 Solar-base Passage Embedding 모델입니다. 이 모델은 검색할 문서나 텍스트를 임베딩하는 데 최적화되어 있습니다.                                           |\n\n::: {#5f1f6000 .cell execution_count=4}\n``` {.python .cell-code}\nfrom langchain_upstage import UpstageEmbeddings\n\n# 쿼리 전용 임베딩 모델\nquery_embeddings = UpstageEmbeddings(model=\"solar-embedding-1-large-query\")\n\n# 문장 전용 임베딩 모델\npassage_embeddings = UpstageEmbeddings(model=\"solar-embedding-1-large-passage\")\n```\n:::\n\n\n`Query` 를 임베딩 합니다.\n\n::: {#afc037a3 .cell execution_count=5}\n``` {.python .cell-code}\n# 쿼리 임베딩\nembedded_query = query_embeddings.embed_query(\"LangChain 에 대해서 상세히 알려주세요.\")\n# 임베딩 차원 출력\nlen(embedded_query)\n```\n:::\n\n\n문서를 임베딩 합니다.\n\n::: {#e3082762 .cell execution_count=6}\n``` {.python .cell-code}\n# 문서 임베딩\nembedded_documents = passage_embeddings.embed_documents(texts)\n```\n:::\n\n\n유사도 계산 결과를 출력합니다.\n\n::: {#6c722034 .cell execution_count=7}\n``` {.python .cell-code}\nimport numpy as np\n\n# 질문(embedded_query): LangChain 에 대해서 알려주세요.\nsimilarity = np.array(embedded_query) @ np.array(embedded_documents).T\n\n# 유사도 기준 내림차순 정렬\nsorted_idx = (np.array(embedded_query) @ np.array(embedded_documents).T).argsort()[::-1]\n\n# 결과 출력\nprint(\"[Query] LangChain 에 대해서 알려주세요.\\n====================================\")\nfor i, idx in enumerate(sorted_idx):\n    print(f\"[{i}] 유사도: {similarity[idx]:.3f} | {texts[idx]}\")\n    print()\n```\n:::\n\n\n",
    "supporting": [
      "04-UpstageEmbeddings_files"
    ],
    "filters": [],
    "includes": {}
  }
}