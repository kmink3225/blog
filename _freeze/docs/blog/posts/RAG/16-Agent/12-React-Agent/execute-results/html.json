{
  "hash": "995c74beae6af63f46e5da840bd18610",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"ReAct Agent\"\nsubtitle: Reasoning and Acting 패턴을 활용한 에이전트\ndescription: |\n  ReAct(Reasoning and Acting) 패턴을 활용하여 추론과 행동을 결합한 에이전트 구현을 다룬다.\ncategories:\n  - AI\n  - RAG\n  - LangChain\n  - Agent\n  - ReAct\nauthor: Kwangmin Kim\ndate: 07/25/2025\nformat: \n  html:\n    page-layout: full\n    code-fold: true\n    toc: true\n    number-sections: true\ndraft: False\nexecute:\n    eval: false\n---\n\n::: {#044c86e0 .cell execution_count=1}\n``` {.python .cell-code}\n# API 키를 환경변수로 관리하기 위한 설정 파일\nfrom dotenv import load_dotenv\n\n# API 키 정보 로드\nload_dotenv()\n```\n:::\n\n\n::: {#90e50166 .cell execution_count=2}\n``` {.python .cell-code}\n# LangSmith 추적을 설정합니다. https://smith.langchain.com\n# !pip install -qU langchain-teddynote\nfrom langchain_teddynote import logging\n\n# 프로젝트 이름을 입력합니다.\nlogging.langsmith(\"CH15-React-Agent\")\n```\n:::\n\n\n![](assets/agent.png)\n\n::: {#64fd976c .cell execution_count=3}\n``` {.python .cell-code}\nfrom langchain_openai import ChatOpenAI\nfrom langchain_teddynote.tools.tavily import TavilySearch\nfrom langchain_core.messages import HumanMessage\nfrom langgraph.checkpoint.memory import MemorySaver\nfrom langgraph.prebuilt import create_react_agent\n\n# 메모리 설정\nmemory = MemorySaver()\n\n# 모델 설정\nmodel = ChatOpenAI(model_name=\"gpt-4o-mini\")\n```\n:::\n\n\n## 도구 설정\n\n### 웹 검색\n\n::: {#d21de7ce .cell execution_count=4}\n``` {.python .cell-code}\nfrom langchain_teddynote.tools.tavily import TavilySearch\n\n\nweb_search = TavilySearch(\n    topic=\"general\",  # 뉴스 주제 (general 또는 news)\n    max_results=5,  # 최대 검색 결과\n    include_answer=False,\n    include_raw_content=False,\n    include_images=False,\n    format_output=False,  # 결과 포맷팅\n)\n\nweb_search.name = \"web_search\"\nweb_search.description = (\n    \"Use this tool to search on the web for any topic other than news.\"\n)\n```\n:::\n\n\n::: {#f89219dd .cell execution_count=5}\n``` {.python .cell-code}\nresult = web_search.search(\"SK AI SUMMIT 2024 관련된 정보를 찾아줘\")\nprint(result)\n```\n:::\n\n\n### 파일 관리\n\n::: {#4e7b6572 .cell execution_count=6}\n``` {.python .cell-code}\nfrom langchain_community.agent_toolkits import FileManagementToolkit\n\n# 'tmp'라는 이름의 디렉토리를 작업 디렉토리로 설정합니다.\nworking_directory = \"tmp\"\n\n# FileManagementToolkit 객체를 생성합니다.\nfile_management_tools = FileManagementToolkit(\n    root_dir=str(working_directory),\n).get_tools()\n```\n:::\n\n\n::: {#b485e696 .cell execution_count=7}\n``` {.python .cell-code}\n# 파일 관리 도구 출력\nfile_management_tools\n```\n:::\n\n\n## Retriever 도구\n\n::: {#2faac95e .cell execution_count=8}\n``` {.python .cell-code}\nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\nfrom langchain_community.vectorstores import FAISS\nfrom langchain_openai import OpenAIEmbeddings\nfrom langchain.document_loaders import PDFPlumberLoader\n\n# PDF 파일 로드. 파일의 경로 입력\nloader = PDFPlumberLoader(\"data/SPRI_AI_Brief_2023년12월호_F.pdf\")\n\n# 텍스트 분할기를 사용하여 문서를 분할합니다.\ntext_splitter = RecursiveCharacterTextSplitter(chunk_size=1000, chunk_overlap=100)\n\n# 문서를 로드하고 분할합니다.\nsplit_docs = loader.load_and_split(text_splitter)\n\n# VectorStore를 생성합니다.\nvector = FAISS.from_documents(split_docs, OpenAIEmbeddings())\n\n# Retriever를 생성합니다.\npdf_retriever = vector.as_retriever()\n```\n:::\n\n\n::: {#9b6fb6cc .cell execution_count=9}\n``` {.python .cell-code}\nfrom langchain_core.tools.retriever import create_retriever_tool\nfrom langchain_core.prompts import PromptTemplate\n\n# PDF 문서를 기반으로 검색 도구 생성\nretriever_tool = create_retriever_tool(\n    pdf_retriever,\n    \"pdf_retriever\",\n    \"Search and return information about SPRI AI Brief PDF file. It contains useful information on recent AI trends. The document is published on Dec 2023.\",\n    document_prompt=PromptTemplate.from_template(\n        \"<document><context>{page_content}</context><metadata><source>{source}</source><page>{page}</page></metadata></document>\"\n    ),\n)\n```\n:::\n\n\n도구 목록을 정의합니다.\n\n::: {#b032fd5f .cell execution_count=10}\n``` {.python .cell-code}\ntools = [web_search, *file_management_tools, retriever_tool]\ntools\n```\n:::\n\n\n## 에이전트 생성\n\n::: {#26d4c2d0 .cell execution_count=11}\n``` {.python .cell-code}\nfrom langgraph.prebuilt import create_react_agent\n\nagent_executor = create_react_agent(model, tools, checkpointer=memory)\n```\n:::\n\n\n에이전트를 시각화 합니다.\n\n::: {#14afd61c .cell execution_count=12}\n``` {.python .cell-code}\nfrom langchain_teddynote.graphs import visualize_graph\n\nvisualize_graph(agent_executor)\n```\n:::\n\n\n## 출력 함수 정의\n\n::: {#de352df2 .cell execution_count=13}\n``` {.python .cell-code}\nfrom langchain_teddynote.messages import stream_graph\n```\n:::\n\n\n::: {#cd083e18 .cell execution_count=14}\n``` {.python .cell-code}\n# Config 설정\nconfig = {\"configurable\": {\"thread_id\": \"abc123\"}}\ninputs = {\"messages\": [(\"human\", \"안녕? 내 이름은 테디야\")]}\n\n# 그래프 스트림\nstream_graph(agent_executor, inputs, config, node_names=[\"agent\"])\n```\n:::\n\n\n::: {#59688085 .cell execution_count=15}\n``` {.python .cell-code}\nconfig = {\"configurable\": {\"thread_id\": \"abc123\"}}\ninputs = {\"messages\": [(\"human\", \"내 이름이 뭐라고?\")]}\n\n# 그래프 스트림\nstream_graph(agent_executor, inputs, config, node_names=[\"agent\"])\n```\n:::\n\n\n::: {#b4c3bb8a .cell execution_count=16}\n``` {.python .cell-code}\nconfig = {\"configurable\": {\"thread_id\": \"abc123\"}}\ninputs = {\n    \"messages\": [\n        (\"human\", \"AI Brief 보고서에서 Anthropic 투자 관련된 정보를 요약해줘.\")\n    ]\n}\nstream_graph(agent_executor, inputs, config, node_names=[\"agent\", \"tools\"])\n```\n:::\n\n\n::: {#549d0340 .cell execution_count=17}\n``` {.python .cell-code}\nconfig = {\"configurable\": {\"thread_id\": \"abc123\"}}\ninputs = {\n    \"messages\": [\n        (\n            \"human\",\n            \"한강 작가의 노벨상 수상 관련된 뉴스를 검색하고 보고서 형식에 맞게 작성해줘\",\n        )\n    ]\n}\nstream_graph(agent_executor, inputs, config, node_names=[\"agent\", \"tools\"])\n```\n:::\n\n\n::: {#e836f581 .cell execution_count=18}\n``` {.python .cell-code}\ninstruction = \"\"\"\n당신의 임무는 `보도자료`를 작성하는 것입니다.\n----\n다음의 내용을 순서대로 처리해 주세요.\n1. `한강 작가의 노벨상 수상` 관련된 뉴스를 검색해 주세요.\n2. 노벨상 수상 관련 뉴스를 바탕으로 보고서 / 보드자료 작성해 주세요.\n3. 단, 중간에 요점 정리를 위한 markdown 테이블 형식 요약을 적극 활용해 주세요.\n4. 출력 결과를 파일로 저장해 주세요. (파일 이름은 \"agent_press_release.md\")\n\"\"\"\n```\n:::\n\n\n::: {#fe63171c .cell execution_count=19}\n``` {.python .cell-code}\nconfig = {\"configurable\": {\"thread_id\": \"abc123\"}}\ninputs = {\"messages\": [(\"human\", instruction)]}\nstream_graph(agent_executor, inputs, config, node_names=[\"agent\", \"tools\"])\n```\n:::\n\n\n",
    "supporting": [
      "12-React-Agent_files"
    ],
    "filters": [],
    "includes": {}
  }
}