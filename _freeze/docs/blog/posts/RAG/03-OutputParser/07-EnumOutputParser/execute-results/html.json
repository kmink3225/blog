{
  "hash": "b2d737bb176c1967306d625f12773546",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"EnumOutputParser\"\nsubtitle: 출력 파싱\ndescription: |\n  LLM 출력을 구조화된 데이터로 변환하는 다양한 파서를 다룬다.\ncategories:\n  - AI\n  - RAG\n  - LangChain\nauthor: Kwangmin Kim\ndate: 12/31/2024\nformat: \n  html:\n    page-layout: full\n    code-fold: true\n    toc: true\n    number-sections: true\ndraft: False\nexecute:\n    eval: false\n---\n\nLangChain의 EnumOutputParser는 언어 모델의 출력을 미리 정의된 열거형(Enum) 값 중 하나로 파싱하는 도구입니다. 이 파서의 주요 특징과 사용법은 다음과 같습니다.\n\n## 주요 특징\n\n- **열거형 파싱**: 문자열 출력을 미리 정의된 Enum 값으로 변환합니다.\n- **타입 안전성**: 파싱된 결과가 반드시 정의된 Enum 값 중 하나임을 보장합니다.\n- **유연성**: 공백이나 줄바꿈 문자를 자동으로 처리합니다.\n\n## 사용 방법\n\nEnumOutputParser는 언어 모델의 출력에서 유효한 Enum 값을 추출하는 데 유용합니다. 이를 통해 출력 데이터의 일관성을 유지하고 예측 가능성을 높일 수 있습니다. 파서를 사용하려면, 미리 정의된 Enum 값을 설정하고 해당 값을 기준으로 문자열 출력을 파싱합니다.\n\n::: {#51936398 .cell execution_count=1}\n``` {.python .cell-code}\nfrom dotenv import load_dotenv\n\nload_dotenv()\n```\n:::\n\n\n::: {#fa0e29f3 .cell execution_count=2}\n``` {.python .cell-code}\n# LangSmith 추적을 설정합니다. https://smith.langchain.com\n# !pip install langchain-teddynote\nfrom langchain_teddynote import logging\n\n# 프로젝트 이름을 입력합니다.\nlogging.langsmith(\"CH03-OutputParser\")\n```\n:::\n\n\n::: {#e8f836bb .cell execution_count=3}\n``` {.python .cell-code}\nfrom langchain.output_parsers.enum import EnumOutputParser\n```\n:::\n\n\n- `enum` 모듈을 사용하여 `Colors` 클래스를 정의합니다.\n- `Colors` 클래스는 `Enum`을 상속받으며, `RED`, `GREEN`, `BLUE` 세 가지 색상 값을 가집니다.\n\n::: {#bdc3d7ab .cell execution_count=4}\n``` {.python .cell-code}\nfrom enum import Enum\n\n\nclass Colors(Enum):\n    RED = \"빨간색\"\n    GREEN = \"초록색\"\n    BLUE = \"파란색\"\n```\n:::\n\n\n`EnumOutputParser` 를 생성합니다.\n\n::: {#952faf92 .cell execution_count=5}\n``` {.python .cell-code}\n# EnumOutputParser 인스턴스 생성\nparser = EnumOutputParser(enum=Colors)\n```\n:::\n\n\n::: {#de838026 .cell execution_count=6}\n``` {.python .cell-code}\nfrom langchain_core.prompts import PromptTemplate\nfrom langchain_openai import ChatOpenAI\n\n# 프롬프트 템플릿을 생성합니다.\nprompt = PromptTemplate.from_template(\n    \"\"\"다음의 물체는 어떤 색깔인가요?\n\nObject: {object}\n\nInstructions: {instructions}\"\"\"\n    # 파서에서 지시사항 형식을 가져와 부분적으로 적용합니다.\n).partial(instructions=parser.get_format_instructions())\n\n# 체인을 생성합니다.\nchain = prompt | ChatOpenAI() | parser\n```\n:::\n\n\n- `chain.invoke` 함수를 사용하여 \"하늘\"에 대한 정보를 요청합니다.\n\n::: {#d8aaf52c .cell execution_count=7}\n``` {.python .cell-code}\n# 체인을 실행합니다.\nresponse = chain.invoke({\"object\": \"하늘\"})\nprint(response)\n```\n:::\n\n\n결과를 확인합니다.\n\n::: {#308329ef .cell execution_count=8}\n``` {.python .cell-code}\n# 출력의 타입을 확인합니다.\ntype(response)\n```\n:::\n\n\n::: {#1307f745 .cell execution_count=9}\n``` {.python .cell-code}\n# 출력의 값을 확인합니다.\nresponse.value\n```\n:::\n\n\n",
    "supporting": [
      "07-EnumOutputParser_files"
    ],
    "filters": [],
    "includes": {}
  }
}