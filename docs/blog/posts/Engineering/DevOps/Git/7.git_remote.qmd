---
title: "GitHub 로컬 저장소와 원격 저장소 연결 문제 해결"
subtitle: "Git Remote 설정 및 브랜치 관리 실전 가이드"
description: |
  로컬 디렉토리를 먼저 생성한 후 GitHub 저장소를 나중에 만들었을 때 발생하는
  연결 문제와 해결 방법을 다룬다. Git remote 관리, 브랜치 이름 충돌(main/master),
  origin 재설정 등 실무에서 자주 겪는 상황을 단계별로 설명한다.
categories:
  - Engineering
  - DevOps
  - Git
author: Kwangmin Kim
date: 05/07/2023
format: 
  html:
    code-fold: true
    toc: true
    number-sections: true
draft: False
---


# GitHub 기본 기능 정리

* 프로젝트를 시작할 때 보통 github에서 repository를 생성 후 로컬에서 clone을 한 후 개발을 시작한다.
* 하지만, 간혹가다 local에서 작업한 것을 github에 올리는 경우도 종종 있다. 
* 이번 블로그에서 local 폴더를 github repository와 연결하는 내용을 정리한다.

## Git 초기화 (git init)

* 로컬에서 프로젝트 폴더를 만들고 버전 관리를 시작할 때 `git init`을 사용한다. 
* 이 명령은 해당 디렉토리에 `.git` 폴더를 생성해 Git으로 관리할 준비를 한다.

## 원격 저장소 연결 (Remote Add)

로컬 저장소와 GitHub 원격 저장소를 연결하려면 다음 명령을 사용한다.

```bash
git remote add origin <저장소주소>
```

이 과정에서 로컬 Git과 GitHub 저장소가 연결되고 push/pull이 가능해진다.

## 브랜치와 기본 브랜치(main/master)

* GitHub는 기본적으로 `main` 브랜치를 사용한다. 
* 반면 일부 로컬 환경은 여전히 `master`를 기본으로 사용할 수 있다. 
* 이 둘이 서로 다른 경우 push 시 충돌이 발생할 수 있다.
* master와 main은 깃 저장소의 기본 브랜치 이름의 변화다.
  * 기능적 차이는 전혀 없고, 이름만 다른 동일한 개념이다.
  * 원래 기본 브랜치는 master: GitHub, GitLab 등 대부분의 플랫폼은 오랫동안 기본 브랜치를 master로 설정했다.
  * 2020년 이후 기본 브랜치를 main으로 전환
  * 더 중립적이고 직관적인 용어 사용을 선호하는 방향으로 정책이 바뀌었기 때문이다.
  * 지금 GitHub에서 새로운 리포를 만들면 기본 브랜치는 보통 main이다.

### 관련 기능

- 기존 master를 main으로 바꾸고 싶다면 브랜치 이름을 변경한다. 

```bash
git branch -m master main # master를 main으로 변경
git push -u origin main # 원격에 push (최초 업로드, 후엔 그냥 git push)
git push origin --delete master # master 삭제
```

* `git push -u origin main`
  * 여기서 `-u`는 upstream 브랜치를 설정해 이후 push 명령을 단순화해준다.

## Remote 관리 기능

원격 저장소 주소가 잘못되었거나 변경이 필요할 때 사용하는 기능은 다음과 같다.

- 원격 주소 확인: `git remote -v`
- 주소 변경: `git remote set-url origin <repostory URL>`
- 기존 원격 삭제: `git remote remove origin`

# 실제로 발생한 문제 및 해결 과정

## 상황

- 로컬에서 먼저 디렉토리를 생성한 뒤 GitHub 저장소를 나중에 만든 상황
- 프로젝트 디렉토리를 먼저 만들고 GitHub에 저장소를 나중에 생성했기 때문에, 로컬 Git 구조가 GitHub 저장소와 자연스럽게 연결되지 않았다.

## 이미 `.git` 폴더가 존재해 `git init`을 다시 실행해도 새로 초기화되지 않음

- 로컬에 `git init`을 실행해 `.git`을 만들어준다.
- 만약 로컬 폴더에 `.git` 디렉토리가 남아 있는 경우 `git init` 실행 시 "Reinitialized" 메시지가 표시된다. 
- 이는 기존 버전 관리 정보가 그대로 존재한다는 뜻이다.

## `git remote add origin` 명령을 실행했을 때 오류 발생할 경우

- 기존에 존재하던 origin 항목 때문에 다음 오류가 발생할 수 있다.

```
error: remote origin already exists.
```

- 이는 이전에 잘못 연결된 origin 정보가 남아 있던 것이 원인인 것이다.

## 해결 방식

### 원격 저장소 정보 확인

```bash
git remote -v
```

### 기존 origin 삭제 또는 주소 변경

둘 중 하나를 선택해 해결할 수 있다.

#### 방법 A: 주소 변경

```bash
git remote set-url origin https://github.com/kmink3225/agent.git
```

#### 방법 B: origin 삭제 후 재등록

```bash
git remote remove origin
git remote add origin https://github.com/kmink3225/agent.git
```

### 브랜치 정리

로컬이 `master`, GitHub 기본 브랜치는 `main`이어서 충돌 위험이 있었다. 이를 정리했다.

```bash
git branch -m master main
```

### GitHub로 최종 업로드
```bash
git push -u origin main
```
