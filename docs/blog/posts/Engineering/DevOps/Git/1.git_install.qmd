---
title: "Git 설치 및 기본 개념"
subtitle: "분산형 버전 관리 시스템"
description: |
  Git은 코드 버전을 관리하는 분산형 시스템이다.
  이 문서에서는 Git의 개념 (중앙형 vs 분산형), 
  설치 방법, 기본 명령어(init, add, commit, push, pull), 
  GitHub 연동, 인증 설정을 단계별로 다룬다.
categories:
  - Engineering
  - Git
  - DevOps
author: Kwangmin Kim
date: 05/01/2023
format: 
  html:
    code-fold: true
    toc: true
    number-sections: true
draft: False
---

# Git 개념

## Git이란?

**Git**은 코드의 변경 이력을 관리하는 **분산형 버전 관리 시스템(Distributed Version Control System, DVCS)**이다.

## 버전 관리 시스템의 두 가지 아키텍처

### 중앙형 (예: SVN)

```
중앙 저장소 (Server)
       ↑↓
  유저 A, 유저 B, 유저 C
```

**특징:**
- 모든 변경사항이 중앙 저장소에 저장됨
- 인터넷 연결 필수 (커밋할 때마다)
- 충돌 시 서로 겹치면 중앙에서 에러 발생
- 백업이 중앙 저장소 하나에만 존재

**문제점:**
- 중앙 저장소 장애 → 전체 팀 작업 중단
- 커밋하려면 반드시 인터넷 필요

### 분산형 (예: Git)

```
        중앙 저장소 (GitHub/GitLab)
              ↑↓
  유저 A의      유저 B의      유저 C의
  로컬 저장소   로컬 저장소   로컬 저장소
```

**특징:**
- 각 개발자가 **전체 저장소의 복사본**을 가짐 (로컬)
- 로컬에서 커밋 (인터넷 불필요)
- 나중에 중앙 저장소에 푸시 (인터넷 필요)
- 충돌은 로컬에서 발생 → 중앙 저장소는 항상 안전

**장점:**
- 중앙 서버 장애 → 로컬 작업 계속 가능
- 오프라인 작업 가능
- 각자 독립적으로 작업 후 병합

## Git vs GitHub

| 구분 | Git | GitHub |
|------|-----|--------|
| 정의 | 버전 관리 시스템 (소프트웨어) | Git을 기반한 웹 서비스 |
| 실행 | 로컬 컴퓨터에서 실행 | 온라인 저장소 호스팅 |
| 역할 | 코드 변경 추적 및 기록 | 코드 공유, 협업, CI/CD |
| 비용 | 무료 (오픈소스) | 무료 + 유료 플랜 |

**간단한 설명:**
- Git = "책 쓰는 방법" (도구)
- GitHub = "책 출판사" (플랫폼)

## Git Workflow (기본 흐름)

```
1. 로컬에서 코드 수정
        ↓
2. git add (스테이징)
        ↓
3. git commit (로컬에 저장)
        ↓
4. git push (중앙 저장소에 업로드)
        ↓
5. 팀원이 git pull (변경사항 다운로드)
```

![Git Workflow](../../../../../images/airflow/git-docker.PNG)

# OS별 Git 설치

## Windows

[Git 다운로드](https://git-scm.com/downloads)에서 최신 버전을 설치한다.

**설치 시 주의:**
- "Add a Git Bash Profile to Windows Terminal" 옵션 선택 (PowerShell에서 Git 사용 가능)

**설치 확인:**
```powershell
git --version
```

## macOS

```bash
# Homebrew 사용
brew install git

# 설치 확인
git --version
```

## Linux (Ubuntu/Debian)

```bash
apt update                    # Ubuntu/Debian의 패키지 저장소에서 사용 가능한 패키지들의 최신 정보를 다운로드
apt install git -y            # Git 설치
git --version                 # 설치 확인
```

# Git 초기 설정

## 사용자 정보 설정

첫 커밋 전에 반드시 설정해야 한다.

```bash
git config --global user.email "you@example.com"
git config --global user.name "Your Name"
git config --list # 확인
```

## 저장소 생성

### 원격 저장소 생성 (at GitHub)

1. [GitHub](https://github.com)에 로그인
2. "+" 버튼 → "New repository"
3. 저장소 이름 입력 → "Create repository"

### 로컬 저장소 초기화

- 작업 폴더를 만들고 Git 저장소로 초기화한다. 
- `git init`은 폴더를 Git이 관리할 수 있도록 준비하는 명령어로, 숨겨진 `.git` 폴더를 생성하여 버전 관리 정보를 저장한다.

```bash
# 작업 폴더 생성
mkdir my_project
cd my_project

# Git 저장소 초기화 (.git 폴더 생성)
git init

# 상태 확인
git status
```

# Git 기본 명령어

## 주요 명령어

### 파일 추적 시작

- 단, `.gitignore` 파일을 생성하여 커밋하지 않을 파일을 지정한다.
- 버전관리를 할 필요없는 많은 파일들을 github에 올릴 필요는 없다 (권장).

```bash
# .gitignore 파일 생성
# 예: .venv/, *.log, __pycache__/, .env 등
touch .gitignore
nano .gitignore  # 편집기에서 수정

# 모든 변경사항을 스테이징 (커밋 준비)
git add .

# 또는 특정 파일만
git add filename.py
```
```
# Python
__pycache__/
*.py[cod]
*.egg-info/
.venv/
venv/

# IDE
.vscode/
.idea/
*.swp

# 환경변수
.env
.env.local

# OS
.DS_Store
```

### 커밋 (로컬에 저장)

```bash
# 변경사항을 로컬 저장소에 기록
git commit -m "커밋 메시지: 이력 관리로 나중에 버전을 추적할때 명시적으로 적어놓으면 추적하기 매우 용이"

# 예시:
git commit -m "Initial commit"
git commit -m "Fix bug in login function"
git commit -m "Add poetry dependency management"
```

**커밋 메시지 작성 팁:**
- 현재형 사용: "Add feature" (O), "Added feature" (X, 과거형 사용)
- 명확하고 간결: "Update" (X, 너무 추상적), "Fix authentication bug in login endpoint" (O)

**커밋 로그 확인:**
```bash
git log                    # 커밋 이력 조회
git log --oneline          # 한 줄로 간결하게 표시
git log -n 5               # 최근 5개만 표시
```

### 브랜치 (버전 관리)

브랜치는 독립적인 작업 흐름이다.

```bash
# 브랜치 목록 확인
git branch

# 브랜치 생성
git branch develop # 'develop' 브렌치 생성

# 브랜치 전환
git checkout develop

# 또는 한 번에 (생성 + 전환)
git checkout -b feature/new-feature

# 브랜치 이름 변경 (보통 main으로 변경)
git branch -M main

# 브랜치 삭제
git branch -d develop
```

**실무 브랜칭 전략:**

- 보통 서비스나 큰 단위 기능별로 브랜치를 만들고 코드를 업데이트 한다.

```
main (운영/배포용)
  ↓
develop (개발용)
  ↓
feature/user-login (새 기능)
feature/api-endpoint (새 기능)
```

### 원격 저장소 연동

```bash
# origin(= 원격 저장소) 추가
git remote add origin https://github.com/username/my_project.git

# 원격 저장소 확인
git remote -v

# 원격 저장소 변경
git remote set-url origin https://github.com/new_username/new_repo.git
```

### 푸시 & 풀

```bash
# 로컬 변경사항을 원격 저장소에 업로드
git push -u origin main      # 첫 푸시: 원격 저장소의 main 브렌치에 업로드
git push                      # 이후 푸시

# 원격 저장소의 변경사항을 로컬로 다운로드
git pull

# 원격 저장소 클론 (복제)
git clone https://github.com/username/my_project.git
```

# GitHub 인증 설정

## 문제: 비밀번호 인증 불가

```
remote: Support for password authentication was removed on August 13, 2021.
```

- GitHub는 보안상 이유로 비밀번호 인증을 제거했다. 
- 다음 2가지 방법 중 선택하여 로그인한다.

## 방법 1: Personal Access Token (권장)

### 토큰 생성

1. GitHub 로그인
2. 우측 상단 프로필 → **Settings**
3. 왼쪽 메뉴 → **Developer settings** → **Personal access tokens** → **Tokens (classic)**
4. **Generate new token (classic)** 클릭
5. 설정:
   - **Note:** "Local development" (또는 원하는 이름)
   - **Expiration:** "No expiration" (또는 90 days)
   - **Select scopes:** "repo" 체크박스 선택
6. **Generate token** 클릭
7. **토큰을 복사하여 안전한 곳에 저장** (다시 볼 수 없음!)

### 토큰으로 푸시

```bash
git push
# Username 입력: your_github_username
# Password 입력: (위에서 생성한 token을 붙여넣기)
```

## 방법 2: SSH Key (더 보안)

### SSH Key 생성

```bash
ssh-keygen -t ed25519 -C "you@example.com"
# 또는 (구 시스템)
ssh-keygen -t rsa -b 4096 -C "you@example.com"
```

**옵션:**
- File location: Enter (기본값)
- Passphrase: 비워두거나 입력 (선택)

### 공개키를 GitHub에 등록

1. 공개키 복사:
```bash
# Windows (PowerShell)
cat ~/.ssh/id_ed25519.pub | clip

# macOS/Linux
cat ~/.ssh/id_ed25519.pub | pbcopy
# 또는
cat ~/.ssh/id_ed25519.pub
```

2. GitHub 설정:
   - 우측 상단 프로필 → **Settings**
   - **SSH and GPG keys** → **New SSH key**
   - Title: "My laptop" 등 입력
   - Key: 위에서 복사한 공개키 붙여넣기
   - **Add SSH key**

### SSH로 푸시

```bash
# 원격 저장소를 SSH 주소로 변경
git remote set-url origin git@github.com:username/my_project.git

# 푸시
git push
```

# 자주 발생하는 문제 해결

## Author identity unknown

**에러 메시지:**
```
fatal: empty ident name not allowed
```

**원인:** 사용자 정보가 설정되지 않음

**해결:**
```bash
git config --global user.email "you@example.com"
git config --global user.name "Your Name"
```


## 잘못된 파일을 커밋했을 때

```bash
# 방법 1: 마지막 커밋 수정
git commit --amend

# 방법 2: 커밋 취소 (변경사항 유지)
git reset --soft HEAD~1

# 방법 3: 커밋 완전 취소
git reset --hard HEAD~1
```

## Pull 전에 Push하라는 오류

```
error: failed to push some refs to 'origin'
hint: Updates were rejected because the tip of your current branch is behind
```

**해결:**
```bash
# 원격 저장소의 최신 변경사항 먼저 가져오기
git pull

# 충돌이 없으면 다시 푸시
git push
```

# 권장 Git 워크플로우

## 기본 개발 프로세스

```bash
# 1. 원격 저장소 클론
git clone https://github.com/username/my_project.git
cd my_project

# 2. develop 브랜치로 이동
git checkout develop

# 3. 새 기능 브랜치 생성
git checkout -b feature/user-login

# 4. 코드 수정 & 테스트

# 5. 변경사항 스테이징
git add .

# 6. 커밋
git commit -m "Add user login feature"

# 7. 원격 저장소에 푸시
git push -u origin feature/user-login

# 8. GitHub에서 Pull Request 생성
# (팀원의 코드 리뷰 후 merge)

# 9. 로컬 develop 브랜치로 돌아가기
git checkout develop

# 10. 최신 코드 동기화
git pull origin develop
```

# 후차적인 주제

- **Git 고급:** Merge, Rebase, Stash 등
- **CI/CD:** GitHub Actions로 자동 배포
- **협업:** Pull Request, Code Review 문화
