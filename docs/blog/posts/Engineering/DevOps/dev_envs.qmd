---
title: "Poetry - Python 의존성 관리 및 패키징 도구"
subtitle: "Poetry vs Conda: Python 패키지 관리 생태계 이해"
description: |
  Poetry는 Python 프로젝트의 의존성 관리(dependency management), 가상환경(virtual environment), 
  패키징(packaging), 배포(distribution)를 통합적으로 관리하는 현대적 도구이다.
  
  이 문서에서는 Poetry와 Conda의 차이점, Poetry의 핵심 개념(pyproject.toml, poetry.lock, resolution algorithm),
  그리고 실무에서의 활용 사례(프로젝트 생성, 의존성 추가, 가상환경 관리, 패키지 빌드)를 다룬다.
  또한 pip, pipenv, requirements.txt와의 비교를 통해 Poetry 선택의 이유를 설명한다.
categories:
  - Engineering
  - Python
author: Kwangmin Kim
date: 10/01/2025
format: 
  html:
    page-layout: full
    code-fold: true
    toc: true
    number-sections: true
draft: False
---

# Poetry란?

**Poetry**는 Python 프로젝트의 라이브러리 의존성 관리, 가상환경 구성, 패키징, 배포를 **통합**으로 관리하는 도구다.

## 핵심 개념

| 개념 | 설명 |
|------|------|
| **의존성 관리** | 프로젝트가 필요로 하는 라이브러리 버전을 선언하고 자동 설치 |
| **가상환경** | 프로젝트별 독립적인 Python 환경 생성 (의존성 충돌 방지) |
| **Lock file** | `poetry.lock`: 정확히 설치된 버전을 기록 (재현성 보장) |
| **Packaging** | `poetry build`: 프로젝트를 배포 가능한 패키지로 변환 |
| **Distribution** | `poetry publish`: 패키지를 PyPI에 배포 |

## 개발 & 배포 생태계 전체 구조

Python 프로젝트는 **개발 단계** → **배포 단계** → **운영 단계**의 3단계를 거칩니다.

### 전체 생태계 계층

```
┌─────────────────────────────────────────────────────┐
│  운영 단계: Kubernetes (대규모 자동화)                │
│  - 수백 개 컨테이너 동시 관리                        │
│  - 자동 스케일링 (트래픽 많으면 자동 복사본 증가)    │
│  - 무중단 배포 (한두 개씩 교체하며 업데이트)        │
│  - 로드밸런싱 (여러 복사본 사이에 트래픽 분산)      │
│  - 자동 복구 (컨테이너 죽으면 자동 재시작)          │
│  - 언제: 대규모 서비스 (마이크로서비스, 엔터프라이즈) │
│  - 추천: ⚠️ PoC/개인 프로젝트는 오버킬              │
└─────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────┐
│  배포 단계: Docker (환경 캡슐화)                     │
│  - 개발 환경 전체를 컨테이너로 패킹                  │
│  - macOS/Linux/Windows 어디서나 동일 실행           │
│  - OS 부터 Python, 라이브러리까지 모두 포함         │
│  - 재현성 100% (언제 어디서나 같은 결과)           │
│  - 언제: 팀 협업, 클라우드 배포, CI/CD            │
│  - 추천: ✅ 권장                                   │
└─────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────┐
│  개발 단계: venv → pyenv → Poetry → Conda            │
│  (로컬 머신에서 코드 작성 & 테스트)                 │
├─────────────────────────────────────────────────────┤
│  Conda (가장 포괄적)                                │
│  - 언어 무관 + Python 버전 관리 + 이진 파일         │
│  - 추천: ✅ Data Science / 과학 계산                │
├─────────────────────────────────────────────────────┤
│  pyenv + Poetry (권장)                              │
│  - Python 의존성 + 패키징 + 가상환경                │
│  - 추천: ✅ 순수 Python 개발 / 팀 협업             │
├─────────────────────────────────────────────────────┤
│  pyenv + pip (비권장)                               │
│  - pyenv: Python 버전 관리                          │
│  - pip: 패키지 설치 (수동 관리)                    │
│  - 추천: ❌ 권장하지 않음                           │
├─────────────────────────────────────────────────────┤
│  venv + pip (기본 학습용)                           │
│  - 가상환경 + 수동 패키지 설치                      │
│  - 추천: ✅ Python 학습 초기 단계만                 │
├─────────────────────────────────────────────────────┤
│  venv (가장 기본)                                   │
│  - 가상환경 생성만                                  │
│  - 추천: ❌ 실무에서는 권장하지 않음               │
└─────────────────────────────────────────────────────┘
```


## 개발 단계의 버전관리 도구 비교

### 계층 구조 (기본 → 포괄적)

| 항목 | **venv** | **pyenv** | **Poetry** | **Conda** |
|------|----------|-----------|-----------|----------|
| **역할** | 가상환경만 | 여러 Python 버전 병렬 관리 | 의존성 + 패키징 + 환경 | 언어 무관 패키지 관리 |
| **관리 대상** | 패키지 격리 | Python 인터프리터 버전 | 패키지 + Python 버전 | 모든 언어 패키지 + 이진 파일 |
| **지원 언어** | Python만 | Python만 | Python만 | Python, R, C++, Java 등 |
| **설정 파일** | 없음 (수동) | 버전 파일만 (`.python-version`) | `pyproject.toml`, `poetry.lock` | `environment.yml`, `conda.lock` |
| **저장소** | PyPI (pip) | 없음 (Python.org) | PyPI | Conda-forge, Anaconda |
| **설치 명령** | `python -m venv` | `brew install pyenv` (또는 git clone) | `pip install poetry` | `conda install` |
| **가상환경** | ✓ 생성 | △ 조합 필요 (다른 도구와) | ✓ 자동 생성 | ✓ 생성 (이름 지정) |
| **의존성 관리** | ✗ 수동 (pip) | ✗ 없음 | ✓ 자동 + 잠금 | ✓ 자동 + 잠금 |
| **버전 해석** | PEP 440 (pip) | N/A | PEP 440 + Semantic Versioning | Conda 규칙 (유연함) |
| **패키징/배포** | ✗ 불가능 | ✗ 불가능 | ✓ 자동화 | △ 가능 (복잡) |
| **의존성 잠금** | ✗ 수동 | N/A | ✓ `poetry.lock` 자동 | ✓ 자동 (`conda-lock` 포함) |
| **재현성** | 50% (수동 관리) | 100% (버전 파일) | 100% | 100% |
| **학습곡선** | 극저 (1~2줄) | 낮음 (직관적) | 낮음 (직관적) | 중간~높음 |
| **엔터프라이즈** | 최소 (레거시) | 중간 (증가 중) | 높음 (표준화 추세) | 높음 (데이터 과학) |

Docker
├─ OS부터 시작
├─ Python 설치
├─ 라이브러리 설치
└─ 어디서나 동일하게 실행 (맥, 리눅스, 윈도우)
