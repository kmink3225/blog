---
title: "Document Intelligence"
subtitle: OCR 및 문서 레이아웃 분석
description: |
  Azure Document Intelligence를 활용한 문서 OCR 및 레이아웃 분석 방법을 설명한다.
categories:
  - AI
  - Cloud
  - Azure
author: Kwangmin Kim
date: 11/03/2025
format: 
  html:
    code-fold: true
    toc: true
    number-sections: true
draft: False
execute:
    eval: false
---

## Azure Document Intelligence란?

* Azure Document Intelligence(이전 Form Recognizer)는 AI 기반 문서 이해 서비스로, 스캔 문서나 이미지에서 텍스트, 표, 구조를 추출한다. 
* Azure Document Intelligence의 주요 기능
    * **문서 분석 모델**
    * **사전 학습된 모델**
    * **사용자 지정 모델** 

###  문서 분석 모델 (Document Analysis Models)

모든 문서 유형에 대한 기본적인 텍스트 및 구조 추출을 제공

* **읽기 (Read / OCR):**
    * 인쇄된 텍스트 및 필기체 텍스트를 정확하게 추출
    * 검색할 수 없는 PDF를 검색 가능한 PDF로 변환
    * 고해상도 추출 및 언어 감지 등의 추가 기능을 지원
* **레이아웃 (Layout):**
    * 문서의 **구조**를 이해하고 추출
    * 텍스트, 표, 표 머리글, 선택 표시(체크박스/라디오 버튼) 및 기타 구조 요소를 인식
* **일반 문서 (General Document):**
    * 키-값 쌍(Key-Value Pairs) 및 표, 선택 표시와 같은 구조를 모든 종류의 문서에서 추출하여 구조화된 비즈니스 콘텐츠를 반환

### 사전 학습된 모델 (Pre-Built Models)

특정 문서 유형에 대해 Microsoft가 미리 학습시킨 모델로, 별도의 학습 없이 바로 사용

| 모델 유형 | 추출 대상 정보 (예시) | 주요 활용 분야 |
| :--- | :--- | :--- |
| **청구서 (Invoices)** | 송장 번호, 고객 및 공급업체 세부 정보, 총액, 세금, 항목별 세부 정보 등 | 재무, 회계 자동화 |
| **영수증 (Receipts)** | 판매점 이름, 거래 날짜/시간, 세금, 총액, 품목별 구매 세부 정보 등 | 경비 처리, 재무 관리 |
| **ID 문서 (Identity Documents)** | 여권, 운전면허증 등에서 이름, 만료일, 성별, 기계 판독 영역(MRZ) 등 | 신원 확인(KYC), 온보딩 프로세스 |
| **계약서 (Contracts)** | 계약 당사자, 계약 세부 정보, 주요 날짜 등 | 법률, 금융 서비스 |
| **은행 명세서** | 계좌 정보, 거래 세부 정보 등 | 금융 서비스 |
| **세금 양식 (US Tax Forms)** | W-2, 1099, 1040 등 미국 세금 양식 정보 | 세무 자동화 |

### 사용자 지정 모델 (Custom Models)

고객의 비즈니스에 특화된 독특한 양식이나 문서에서 데이터를 추출하기 위해 맞춤형으로 학습시키는 기능

* 사용자 지정 추출 모델 (Custom Extraction):
    * **정적 레이아웃** 문서(템플릿 모델)나 **혼합 유형** 문서(신경망 모델)에서 원하는 특정 필드를 추출하도록 학습
    * **최소 5개의 문서**만으로도 모델 학습이 가능
* 사용자 지정 분류 모델 (Custom Classification):
    * 문서 세트를 분석하여 들어온 문서가 **어떤 유형**인지(예: '계약서'인지 '청구서'인지)를 분류
    * 그에 맞는 최적의 추출 모델을 자동으로 호출합니다.
* 복합 모델 (Custom Composed Model):
    * 여러 개의 사용자 지정 추출 모델을 결합하여 단일 API로 호출

### 추가적인 확장 기능 (Add-on Capabilities)

기본 기능 외에 필요에 따라 활성화할 수 있는 고급 기능

* 수식 추출 (Formulas): 문서 내의 복잡한 수학 수식을 인식하고 추출
* 바코드 추출 (Barcodes): 바코드 정보를 인식하고 추출
* 글꼴/스타일 추출 (Style/Font): 텍스트의 글꼴 속성(예: 굵은 글씨, 기울임꼴)을 추출
* 쿼리 필드 (Query Fields): 특정 데이터 필드를 추출하기 위해 자연어로 질문을 던지는 방식(Generative AI 기반)을 지원하여, 사전 정의된 모델의 한계를 넘어선 유연한 추출을 가능

이러한 기능들은 **Document Intelligence Studio**라는 온라인 도구를 통해 코드 없이도 시각적으로 탐색, 테스트, 학습 및 통합할 수 있도록 지원


Azure Document Intelligence의 요금은 **분석된 페이지 수**와 **사용하는 모델의 종류**에 따라 부과되는 **사용량 기반(Pay-as-you-go)** 방식이 기본입니다. 즉, 문서를 처리할 때만 비용이 발생합니다.

핵심 요금 정책을 정리해 드리겠습니다. (아래 요금은 일반적인 S0 표준 등급의 '종량제' 기준이며, 환율 및 지역에 따라 실제 가격은 달라질 수 있습니다.)

---

## 💰 Azure Document Intelligence 주요 요금 정보 (S0 표준 등급, 종량제)

| 요금 항목 | 모델/기능 | 가격 (1,000 페이지당) | 주요 특징 |
| :--- | :--- | :--- | :--- |
| **무료 (F0)** | 모든 모델 | **0 - 500 페이지** (월별) | 프리미엄 기능은 제외되며, 분석 응답이 처음 2페이지로 제한됨. 테스트에 유용합니다. |
| **읽기 (Read/OCR)** | 인쇄 및 필기 텍스트 추출 | **$1.50** (0~100만 페이지) | 가장 기본적인 OCR 기능. 처리량이 많아질수록 단가가 저렴해집니다. |
| **미리 학습된 모델** | 레이아웃, 일반 문서, 영수증, 송장, ID, 계약서 등 | **$10** | 특정 문서 유형에 최적화된 모델을 사용할 때 부과됩니다. |
| **쿼리 필드 (Query Fields)** | Generative AI 기반 추출 | **$10** | 사전 정의된 필드 외에 자연어 질문을 통해 데이터를 유연하게 추출할 때 사용됩니다. |
| **사용자 지정 분류** | 문서 유형 분류 (예: 송장 vs. 계약서) | **$3** | 문서의 종류를 식별하는 데 사용됩니다. |
| **사용자 지정 추출** | 사용자가 직접 학습시킨 추출 모델 | **$30** | 가장 높은 단가로, 고유한 비즈니스 양식에서 데이터를 추출하는 데 사용됩니다. |
| **추가 기능 (Add-Ons)** | 고해상도, 글꼴/스타일, 수식 추출 | **$6** (기본 모델 비용에 추가됨) | 기본 분석 외에 고급 기능을 사용할 때 추가 비용이 부과됩니다. |
| **모델 학습** | 사용자 지정 모델 학습 시간 | **시간당 $3** | 모델을 학습시키는 동안에만 발생하며, 학습된 모델을 사용(분석)할 때는 페이지당 추출 비용이 부과됩니다. |

### 💡 비용 책정의 핵심 원칙

1.  **페이지 기반 과금:** 문서 인텔리전스는 **처리하는 페이지 수**를 기준으로 요금을 계산합니다. (이미지가 포함된 페이지도 페이지당 계산됩니다.)
2.  **모델 유형별 단가:** 어떤 종류의 모델을 사용하느냐에 따라 페이지당 단가가 크게 달라집니다.
    * **Read ($1.50)** < **Prebuilt/Query ($10)** < **Custom Extraction ($30)** 순으로 단가가 높아집니다.
3.  **약정 요금제 (Commitment Tiers):** 대량의 문서를 처리하는 경우, 월별로 특정 페이지 수를 미리 약정하고 선불로 지불하면 **종량제보다 할인된 단가**로 서비스를 이용할 수 있습니다.

### 🔍 비용 절감 팁

* **가장 저렴한 모델부터 시작:** 단순히 텍스트만 추출하려면 **Read** 모델을, 구조화된 표/텍스트만 추출하려면 **Layout** 모델을 사용하는 등, 필요한 기능만 있는 가장 저렴한 모델부터 사용하세요.
* **F0(무료) 계층 활용:** 초기 테스트나 소규모 개발 단계에서는 월 500페이지까지 무료로 제공되는 **F0 계층**을 활용할 수 있습니다.

실제 비용은 [Azure 가격 책정 계산기](https://azure.microsoft.com/ko-kr/pricing/calculator/)를 사용하여 예상 사용량과 모델 유형을 입력해 확인하는 것이 가장 정확합니다.

혹시 비용을 예상해보고 싶은 특정 사용 시나리오(예: 매월 영수증 5,000장 처리)가 있으신가요?




네, Azure Document Intelligence의 기능을 \*\*CMD(명령 프롬프트)\*\*에서 사용하려면 \*\*Azure CLI (Command Line Interface)\*\*를 사용하거나, Python, C\#, JavaScript 등 지원되는 언어용 **SDK**를 사용하여 코드를 작성한 후 CMD에서 해당 스크립트를 실행해야 합니다.

가장 일반적인 두 가지 방법을 안내해 드리겠습니다.

-----

## 1\. Azure CLI를 통한 사용 (리소스 관리)

Azure CLI는 주로 **Azure 리소스를 관리**하는 데 사용되지만, Document Intelligence 서비스를 만들고 관리하는 데 CMD에서 직접 사용할 수 있습니다.

1.  **Azure CLI 설치:** 먼저 PC에 Azure CLI가 설치되어 있어야 합니다.
2.  **로그인:** CMD에서 다음 명령으로 Azure 계정에 로그인합니다.
    ```bash
    az login
    ```
3.  **리소스 생성 (예시):** Document Intelligence 서비스 리소스를 생성합니다.
    ```bash
    az cognitiveservices account create \
      --name "MyDocumentIntelService" \
      --resource-group "MyResourceGroup" \
      --kind "FormRecognizer" \
      --sku "S0" \
      --location "eastus"
    ```

**주의:** Azure CLI 자체는 **문서 분석/추출 API 호출**을 직접 지원하지 않습니다. API 호출을 위해서는 아래의 SDK 방법이 필요합니다.

-----

## 2\. SDK를 사용한 후 CMD에서 스크립트 실행 (API 호출)

실제로 문서를 처리하고 데이터를 추출하는 API를 호출하려면, 파이썬이나 다른 프로그래밍 언어의 SDK를 사용하여 스크립트를 작성하고, 이 스크립트를 CMD 환경에서 실행하는 것이 표준 방법입니다.

### A. 파이썬 스크립트 예시 (가장 일반적)

1.  **필수 사항 설치:**
      * **Python** 설치
      * **Document Intelligence SDK** 설치:
        ```bash
        pip install azure-ai-documentintelligence
        ```
2.  **파이썬 코드 작성:** 추출을 원하는 기능을 수행하는 파이썬 스크립트(`analyze_document.py`라고 가정)를 작성합니다. 이 스크립트에는 서비스 엔드포인트와 API 키, 그리고 분석할 문서의 경로가 포함됩니다.
3.  **CMD에서 실행:** CMD를 열고 해당 스크립트를 실행합니다.
    ```bash
    python analyze_document.py
    ```

### B. cURL을 사용한 직접 HTTP 요청 (고급)

SDK를 사용하지 않고 순수하게 **CMD 환경**에서만 API를 호출하고 싶다면, `cURL` 명령어를 사용하여 Document Intelligence REST API에 직접 HTTP 요청을 보낼 수 있습니다. 이 방법은 복잡하며 주로 테스트 목적으로 사용됩니다.

```bash
# cURL 명령어 예시 (분석 요청)
curl -i -X POST "https://[YOUR_ENDPOINT]/formrecognizer/documentModels/prebuilt-layout:analyze?api-version=2023-07-31" \
  -H "Content-Type: application/json" \
  -H "Ocp-Apim-Subscription-Key: [YOUR_API_KEY]" \
  -d "{'urlSource': 'https://example.com/document.pdf'}"
```

  * `[YOUR_ENDPOINT]`: 서비스의 엔드포인트 주소
  * `[YOUR_API_KEY]`: 서비스 키

-----

**요약:**

CMD에서 Document Intelligence의 기능을 사용하려면, **파이썬 SDK를 사용해 스크립트를 작성**하고 CMD에서 그 스크립트를 실행하는 것이 가장 권장되는 방법입니다.

혹시 파이썬을 이용한 특정 문서(예: 영수증) 분석 스크립트 예시를 원하시나요?