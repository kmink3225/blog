---
title: "Streamlit Session State"
subtitle: "Streamlitì˜ ìƒíƒœ ê´€ë¦¬ì™€ ë™ì‘ ì›ë¦¬"
description: | 
  Streamlitì€ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ë§ˆë‹¤ ìŠ¤í¬ë¦½íŠ¸ ì „ì²´ë¥¼ ì¬ì‹¤í–‰í•˜ëŠ” ë…íŠ¹í•œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤. session_stateëŠ” ì´ëŸ¬í•œ ì¬ì‹¤í–‰ ê°„ì—ë„ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ, ì±„íŒ… ì´ë ¥, ì‚¬ìš©ì ì„¤ì •, ìºì‹± ë“± ë‹¤ì–‘í•œ ìƒíƒœ ê´€ë¦¬ì— í™œìš©ëœë‹¤. Streamlitì˜ ë™ì‘ ì›ë¦¬ë¥¼ ì´í•´í•˜ë©´ íš¨ê³¼ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤.
categories:
  - Engineering
  - Python
  - Streamlit
  - Web Development
author: Kwangmin Kim
date: 02/14/2026
draft: false
format: 
  html:
    toc: true
    number-sections: true
    code-fold: true
    page-layout: full
execute: 
  warning: false
  message: false
  eval: false
  echo: true
---

# Streamlitì˜ ë™ì‘ ì›ë¦¬

## ì¼ë°˜ ì›¹ í”„ë ˆì„ì›Œí¬ vs Streamlit

### ì „í†µì ì¸ ì›¹ í”„ë ˆì„ì›Œí¬ (Flask, Django)

ì „í†µì ì¸ ì›¹ í”„ë ˆì„ì›Œí¬ëŠ” **ì´ë²¤íŠ¸ ê¸°ë°˜**ìœ¼ë¡œ ë™ì‘í•œë‹¤.

```python
# Flask ì˜ˆì‹œ
from flask import Flask, session

app = Flask(__name__)

@app.route('/increment')
def increment():
    session['count'] = session.get('count', 0) + 1
    return f"Count: {session['count']}"

# ë²„íŠ¼ í´ë¦­ ì‹œ /increment ì—”ë“œí¬ì¸íŠ¸ë§Œ ì‹¤í–‰ë¨
```

**íŠ¹ì§•:**
- íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ë§Œ ì‹¤í–‰
- ì„œë²„ ë©”ëª¨ë¦¬ì— ì„¸ì…˜ ìœ ì§€
- ëª…ì‹œì ì¸ ë¼ìš°íŒ… í•„ìš”

### Streamlitì˜ ë…íŠ¹í•œ ë°©ì‹

Streamlitì€ **ì „ì²´ ìŠ¤í¬ë¦½íŠ¸ ì¬ì‹¤í–‰** ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.

```python
# Streamlit ì˜ˆì‹œ
import streamlit as st

st.title("ì¹´ìš´í„°")

count = 0  # ë¬¸ì œ: ë§¤ë²ˆ 0ìœ¼ë¡œ ì´ˆê¸°í™”ë¨
if st.button("ì¦ê°€"):
    count += 1 # ì´ ì‹¤í–‰ì—ì„œë§Œ ì¦ê°€

st.write(f"Count: {count}")   # ë²„íŠ¼ í´ë¦­í•œ ì‹¤í–‰ì—ì„œëŠ” 1, ë‹¤ìŒ ì‹¤í–‰ì—ì„œëŠ” ë‹¤ì‹œ 0. ì¦‰, í•­ìƒ 0 ë˜ëŠ” 1ë§Œ í‘œì‹œ
```

- **ìƒí˜¸ì‘ìš©(ì˜ˆ. ë²„íŠ¼ í´ë¦­)ë§ˆë‹¤** ìŠ¤í¬ë¦½íŠ¸ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì‹¤í–‰
- ëª¨ë“  ë³€ìˆ˜ê°€ ë‹¤ì‹œ ìƒì„±ë¨
- ë¼ìš°íŒ… ê°œë… ì—†ìŒ (ë‹¨ì¼ í˜ì´ì§€)
- `st.session_state`ë¥¼ ì“°ë©´ ëˆ„ì Â·ìœ ì§€ ê°€ëŠ¥ (ê¶Œì¥)

```python
import streamlit as st

if "count" not in st.session_state:
    st.session_state.count = 0

if st.button("ì¦ê°€"):
    st.session_state.count += 1

st.write(st.session_state.count)
```

- `st.session_state`ëŠ” ë¸Œë¼ìš°ì € íƒ­(ì„¸ì…˜) ë‹¨ìœ„ì˜ ì¸ë©”ëª¨ë¦¬ ì €ì¥ì†Œë‹¤.  
- í‚¤ê°€ ì—†ì„ ë•Œë§Œ ì´ˆê¸°í™”í•˜ë©´ ì´í›„ ì¬ì‹¤í–‰ì—ì„œë„ ê°’ì´ ìœ ì§€ë˜ì–´ ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œë§ˆë‹¤ ëˆ„ì ëœë‹¤.  
- í‚¤(`key`): `st.session_state` ì•ˆì—ì„œ ìƒíƒœë¥¼ ì‹ë³„í•˜ëŠ” ë¬¸ìì—´(ì´ë¦„)ì´ë‹¤ â€” ì¦‰ ìƒíƒœ í•­ëª©ì˜ ê³ ìœ  ID  
    - `st.session_state`ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ í‚¤â†’ê°’ ì‚¬ì „(dict)ì´ë‹¤. í‚¤ëŠ” ìƒíƒœ í•­ëª©ì„ êµ¬ë¶„í•˜ëŠ” ë¬¸ìì—´ì´ë‹¤.  
    - ì˜ˆ: "count", "messages", "user_id" ë“±ì´ í‚¤  

## Streamlitì˜ ì‹¤í–‰ íë¦„

### ì´ˆê¸° ë¡œë“œ

```python
import streamlit as st

# === 1ì°¨ ì‹¤í–‰ (í˜ì´ì§€ ë¡œë“œ) ===
print("ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘")  # ì¶œë ¥ë¨

st.title("ì•ˆë…•í•˜ì„¸ìš”")  # í™”ë©´ì— í‘œì‹œ

count = 0
st.write(f"ì¹´ìš´íŠ¸: {count}")  # 0 í‘œì‹œ

if st.button("ì¦ê°€"):
    count += 1  # í´ë¦­ ì‹œì—ë§Œ ì‹¤í–‰

print("ìŠ¤í¬ë¦½íŠ¸ ì¢…ë£Œ")  # ì¶œë ¥ë¨
```

**ì‹¤í–‰ ìˆœì„œ:**
1. ìŠ¤í¬ë¦½íŠ¸ ì²˜ìŒë¶€í„° ì‹œì‘
2. ëª¨ë“  ë³€ìˆ˜ ì´ˆê¸°í™” (`count = 0`)
3. ìœ„ì ¯ ë Œë”ë§ (`st.title`, `st.button`)
4. ìŠ¤í¬ë¦½íŠ¸ ëê¹Œì§€ ì‹¤í–‰

### ë²„íŠ¼ í´ë¦­ í›„

```python
# === 2ì°¨ ì‹¤í–‰ (ë²„íŠ¼ í´ë¦­) ===
print("ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘")  # ë‹¤ì‹œ ì¶œë ¥ë¨!

st.title("ì•ˆë…•í•˜ì„¸ìš”")  # ë‹¤ì‹œ ë Œë”ë§

count = 0  # ë‹¤ì‹œ 0ìœ¼ë¡œ ì´ˆê¸°í™”!
st.write(f"ì¹´ìš´íŠ¸: {count}")  # ì—¬ì „íˆ 0

if st.button("ì¦ê°€"):  # ì´ë²ˆì—ëŠ” True
    count += 1  # countëŠ” 1ì´ ë¨

st.write(f"ìµœì¢…: {count}")  # 1 í‘œì‹œ (ì´ ì‹¤í–‰ì—ì„œë§Œ)

print("ìŠ¤í¬ë¦½íŠ¸ ì¢…ë£Œ")  # ë‹¤ì‹œ ì¶œë ¥ë¨!
```

**ë¬¸ì œì :**
- ë²„íŠ¼ì„ ëˆŒëŸ¬ë„ ë‹¤ìŒ ì‹¤í–‰ì—ì„œ `count = 0`ìœ¼ë¡œ ë‹¤ì‹œ ì´ˆê¸°í™”
- ê°’ì´ ëˆ„ì ë˜ì§€ ì•ŠìŒ

### ì‹œê°í™”

```
[1ì°¨ ì‹¤í–‰: í˜ì´ì§€ ë¡œë“œ]
count = 0
ë²„íŠ¼ ë Œë”ë§
í™”ë©´: "ì¹´ìš´íŠ¸: 0"

â†“ ì‚¬ìš©ìê°€ ë²„íŠ¼ í´ë¦­

[2ì°¨ ì‹¤í–‰: ì „ì²´ ìŠ¤í¬ë¦½íŠ¸ ì¬ì‹¤í–‰]
count = 0 (ë‹¤ì‹œ ì´ˆê¸°í™”!)
ë²„íŠ¼ í´ë¦­ ê°ì§€
count = 1 (ì„ì‹œë¡œë§Œ 1)
í™”ë©´: "ì¹´ìš´íŠ¸: 1"

â†“ ì‚¬ìš©ìê°€ ë‹¤ë¥¸ ë²„íŠ¼ í´ë¦­

[3ì°¨ ì‹¤í–‰: ë‹¤ì‹œ ì „ì²´ ì¬ì‹¤í–‰]
count = 0 (ë˜ ì´ˆê¸°í™”!)
í™”ë©´: "ì¹´ìš´íŠ¸: 0"
```

## session_stateì˜ í•„ìš”ì„±

### ë¬¸ì œ ìƒí™©

```python
import streamlit as st

st.title("ì±„íŒ… ì•±")

messages = []  # ë§¤ë²ˆ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì´ˆê¸°í™”!

user_input = st.text_input("ë©”ì‹œì§€ ì…ë ¥")
if st.button("ì „ì†¡"):
    messages.append(user_input)  # ì¶”ê°€í•´ë„...

# ë©”ì‹œì§€ í‘œì‹œ
for msg in messages:
    st.write(msg)  # ì•„ë¬´ê²ƒë„ í‘œì‹œ ì•ˆ ë¨!

# ë‹¤ìŒ ì‹¤í–‰ì—ì„œ messagesëŠ” ë‹¤ì‹œ []ë¡œ ì´ˆê¸°í™”ë¨
```

**ê²°ê³¼:** ìƒí˜¸ì‘ìš© ë§ˆë‹¤ ë¦¬ìŠ¤íŠ¸ê°€ ê³„ì† ì´ˆê¸°í™”ë˜ë¯€ë¡œ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ë„ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŒ

### í•´ê²°: session_state ì‚¬ìš©

```python
import streamlit as st

st.title("ì±„íŒ… ì•±")

if "messages" not in st.session_state:
    st.session_state.messages = []

user_input = st.text_input("ë©”ì‹œì§€ ì…ë ¥")
if st.button("ì „ì†¡") and user_input:
    st.session_state.messages.append(user_input)

# ë©”ì‹œì§€ í‘œì‹œ
for msg in st.session_state.messages:
    st.write(msg)
```

* `if "messages" not in st.session_state`ëŠ” "messages"ë¼ëŠ” í‚¤ê°€ st.session_state(ë‚´ë¶€ì˜ keyâ†’value ì‚¬ì „)ì— ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ Trueê°€ ë˜ì–´ ì´ˆê¸°í™” ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë¼ëŠ” ì˜ë¯¸ë‹¤.
* ì¦‰, "messagesë¼ëŠ” ì´ë¦„ì˜ ìƒíƒœ í•­ëª©ì´ ì•„ì§ ìƒì„±ë˜ì§€ ì•Šì•˜ë‹¤ë©´" ì´ë¼ëŠ” ì˜ë¯¸
* ì´í›„ ì¬ì‹¤í–‰ì—ì„œëŠ” "messages" í‚¤ê°€ ì´ë¯¸ ì¡´ì¬í•˜ë¯€ë¡œ ì´ˆê¸°í™” ì½”ë“œê°€ ì‹¤í–‰ë˜ì§€ ì•Šê³ , ê¸°ì¡´ ë¦¬ìŠ¤íŠ¸ê°€ ìœ ì§€ë˜ì–´ ë©”ì‹œì§€ê°€ ëˆ„ì ë˜ì–´ í‘œì‹œëœë‹¤.
* ì‚¬ìš©ìê°€ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ì½”ë“œì—ì„œ st.session_stateì— ê°’ì„ í• ë‹¹í•˜ë©´ í•´ë‹¹ "messages"í‚¤ê°€ ìƒê¸´ë‹¤  
* ì´í›„ ì¬ì‹¤í–‰ì—ì„œëŠ” ì´ˆê¸°í™” ì½”ë“œê°€ ê±´ë„ˆë›°ì–´ì§€ê³  ê¸°ì¡´ ê°’ì´ ìœ ì§€ë¨
* **ê²°ê³¼:** ë©”ì‹œì§€ê°€ ëˆ„ì ë˜ì–´ í‘œì‹œë¨

## session_state ë™ì‘ ì›ë¦¬

### ë‚´ë¶€ ë©”ì»¤ë‹ˆì¦˜

Streamlitì€ ë°±ì—”ë“œì—ì„œ ê° ì‚¬ìš©ì(ë¸Œë¼ìš°ì € ì„¸ì…˜)ë§ˆë‹¤ **ê³ ìœ í•œ ìƒíƒœ ì €ì¥ì†Œ**ë¥¼ ìœ ì§€í•œë‹¤.

```python
# Streamlit ë‚´ë¶€ (ë‹¨ìˆœí™”ëœ ë²„ì „)
class SessionState:
    def __init__(self):
        self._state = {}
    
    def __setitem__(self, key, value):
        self._state[key] = value
    
    def __getitem__(self, key):
        return self._state[key]
    
    def __contains__(self, key):
        return key in self._state

# ê° ì‚¬ìš©ìë§ˆë‹¤ ë³„ë„ ì¸ìŠ¤í„´ìŠ¤ ìœ ì§€
user1_session = SessionState()
user2_session = SessionState()
```

### ì‚¬ìš©ìë³„ ê²©ë¦¬

```python
# ì‚¬ìš©ì Aê°€ ì ‘ì†
st.session_state.count = 10

# ì‚¬ìš©ì Bê°€ ì ‘ì† (ë‹¤ë¥¸ ë¸Œë¼ìš°ì €)
st.session_state.count = 5

# ê° ì‚¬ìš©ìëŠ” ë…ë¦½ì ì¸ ê°’ ìœ ì§€
# A: count = 10
# B: count = 5
```

### ìƒëª…ì£¼ê¸°

```
ë¸Œë¼ìš°ì € íƒ­ ì—´ê¸°
    â†“
session_state ìƒì„± (ë¹ˆ ë”•ì…”ë„ˆë¦¬)
    â†“
ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (ì´ˆê¸°í™”)
    â†“
ì‚¬ìš©ì ìƒí˜¸ì‘ìš© (ë²„íŠ¼ í´ë¦­ ë“±)
    â†“
ìŠ¤í¬ë¦½íŠ¸ ì¬ì‹¤í–‰ (session_state ìœ ì§€)
    â†“
... ë°˜ë³µ ...
    â†“
ë¸Œë¼ìš°ì € íƒ­ ë‹«ê¸°
    â†“
session_state ì‚­ì œ
```

## session_state ì‚¬ìš© íŒ¨í„´

### ì´ˆê¸°í™” íŒ¨í„´

```python
# ê¸°ë³¸ íŒ¨í„´
if "key" not in st.session_state:
    st.session_state.key = initial_value

# ì˜ˆì‹œ: ì¹´ìš´í„°
if "count" not in st.session_state:
    st.session_state.count = 0

# ì˜ˆì‹œ: ë¦¬ìŠ¤íŠ¸
if "history" not in st.session_state:
    st.session_state.history = []

# ì˜ˆì‹œ: ë”•ì…”ë„ˆë¦¬
if "config" not in st.session_state:
    st.session_state.config = {"model": "gpt-4", "temp": 0.7}
```

**ì™œ ì´ íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ”ê°€?**
- ì²˜ìŒ ì‹¤í–‰ ì‹œì—ë§Œ ì´ˆê¸°í™”
- ì´í›„ ì¬ì‹¤í–‰ì—ì„œëŠ” ê¸°ì¡´ ê°’ ìœ ì§€
- ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€

### ê°’ ì½ê¸°/ì“°ê¸°

```python
import streamlit as st

# ì´ˆê¸°í™”
if "name" not in st.session_state:
    st.session_state.name = "Guest"

# ì½ê¸° (2ê°€ì§€ ë°©ë²•)
name1 = st.session_state.name  # ì†ì„± ë°©ì‹
name2 = st.session_state["name"]  # ë”•ì…”ë„ˆë¦¬ ë°©ì‹

# ì“°ê¸° (2ê°€ì§€ ë°©ë²•)
st.session_state.name = "Alice"
st.session_state["name"] = "Bob"

# ì‚­ì œ
del st.session_state.name
# ë˜ëŠ”
st.session_state.pop("name", None)
```

### ë¦¬ìŠ¤íŠ¸ ì¡°ì‘

```python
import streamlit as st

# ì´ˆê¸°í™”
if "tasks" not in st.session_state:
    st.session_state.tasks = [] #dictì—ì„œ task keyì— ëŒ€ì‘ë˜ëŠ” valueì— ë¹ˆ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€

# ì¶”ê°€
new_task = st.text_input("ìƒˆ ì‘ì—…")
if st.button("ì¶”ê°€") and new_task:
    st.session_state.tasks.append(new_task)

# í‘œì‹œ
for i, task in enumerate(st.session_state.tasks):
    col1, col2 = st.columns([4, 1])
    col1.write(task)
    if col2.button("ì‚­ì œ", key=f"del_{i}"):
        st.session_state.tasks.pop(i)
        st.rerun()  # í™”ë©´ ìƒˆë¡œê³ ì¹¨
```

### ì¡°ê±´ë¶€ ë Œë”ë§

```python
import streamlit as st

# ë¡œê·¸ì¸ ìƒíƒœ ê´€ë¦¬
if "logged_in" not in st.session_state:
    st.session_state.logged_in = False

if not st.session_state.logged_in:
    # ë¡œê·¸ì¸ í™”ë©´
    username = st.text_input("ì‚¬ìš©ìëª…")
    password = st.text_input("ë¹„ë°€ë²ˆí˜¸", type="password")
    
    if st.button("ë¡œê·¸ì¸"):
        if username == "admin" and password == "1234":
            st.session_state.logged_in = True
            st.session_state.username = username
            st.rerun()
        else:
            st.error("ë¡œê·¸ì¸ ì‹¤íŒ¨")
else:
    # ë©”ì¸ í™”ë©´
    st.write(f"í™˜ì˜í•©ë‹ˆë‹¤, {st.session_state.username}ë‹˜")
    
    if st.button("ë¡œê·¸ì•„ì›ƒ"):
        st.session_state.logged_in = False
        st.session_state.pop("username", None)
        st.rerun()
```

### í˜ì´ì§€ ê°„ ìƒíƒœ ê³µìœ 

```python
# pages/page1.py
import streamlit as st

if "shared_data" not in st.session_state:
    st.session_state.shared_data = "Hello"

st.write(st.session_state.shared_data)

# pages/page2.py
import streamlit as st

# ê°™ì€ session_state ì‚¬ìš©
st.write(st.session_state.shared_data)  # "Hello"
st.session_state.shared_data = "World"
```

## ì‹¤ì „ ì˜ˆì œ

### ì±„íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜

```python
import streamlit as st
from datetime import datetime

st.title("ğŸ’¬ ì±„íŒ… ì•±")

# ë©”ì‹œì§€ ì´ˆê¸°í™”
if "messages" not in st.session_state:
    st.session_state.messages = []

# ì´ì „ ë©”ì‹œì§€ í‘œì‹œ
for msg in st.session_state.messages:
    with st.chat_message(msg["role"]):
        st.write(msg["content"])
        st.caption(msg["time"])

# ì‚¬ìš©ì ì…ë ¥
if prompt := st.chat_input("ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”"):
    # ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
    user_msg = {
        "role": "user",
        "content": prompt,
        "time": datetime.now().strftime("%H:%M:%S")
    }
    st.session_state.messages.append(user_msg)
    
    # ì‚¬ìš©ì ë©”ì‹œì§€ í‘œì‹œ
    with st.chat_message("user"):
        st.write(prompt)
    
    # ë´‡ ì‘ë‹µ (ê°„ë‹¨í•œ ì˜ˆì‹œ)
    bot_response = f"ë‹¹ì‹ ì´ ë§í•œ '{prompt}'ì— ëŒ€í•œ ì‘ë‹µì…ë‹ˆë‹¤."
    bot_msg = {
        "role": "assistant",
        "content": bot_response,
        "time": datetime.now().strftime("%H:%M:%S")
    }
    st.session_state.messages.append(bot_msg)
    
    # ë´‡ ì‘ë‹µ í‘œì‹œ
    with st.chat_message("assistant"):
        st.write(bot_response)
```

### ì„¤ì • ê´€ë¦¬

```python
import streamlit as st

st.title("âš™ï¸ ì„¤ì •")

# ì„¤ì • ì´ˆê¸°í™”
if "config" not in st.session_state:
    st.session_state.config = {
        "model": "gpt-4o-mini",
        "temperature": 0.7,
        "max_tokens": 1000,
        "theme": "light"
    }

# ì‚¬ì´ë“œë°”ì— ì„¤ì •
with st.sidebar:
    st.header("ëª¨ë¸ ì„¤ì •")
    
    model = st.selectbox(
        "ëª¨ë¸ ì„ íƒ",
        ["gpt-4o-mini", "gpt-4", "gpt-3.5-turbo"],
        index=["gpt-4o-mini", "gpt-4", "gpt-3.5-turbo"].index(
            st.session_state.config["model"]
        )
    )
    
    temperature = st.slider(
        "Temperature",
        0.0, 1.0,
        st.session_state.config["temperature"]
    )
    
    max_tokens = st.number_input(
        "Max Tokens",
        100, 4000,
        st.session_state.config["max_tokens"]
    )
    
    if st.button("ì„¤ì • ì €ì¥"):
        st.session_state.config["model"] = model
        st.session_state.config["temperature"] = temperature
        st.session_state.config["max_tokens"] = max_tokens
        st.success("ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤")

# ë©”ì¸ ì˜ì—­ì— í˜„ì¬ ì„¤ì • í‘œì‹œ
st.subheader("í˜„ì¬ ì„¤ì •")
st.json(st.session_state.config)
```

### ë°ì´í„° ìºì‹± (ë¹„ìš© ì ˆê°)

```python
import streamlit as st
from datetime import datetime, timedelta

st.title("ğŸ“Š ë°ì´í„° ëŒ€ì‹œë³´ë“œ")

# ë§ˆì§€ë§‰ ë¡œë“œ ì‹œê°„ ì¶”ì 
if "last_loaded" not in st.session_state:
    st.session_state.last_loaded = None
    st.session_state.data = None

def load_data():
    """ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ë°ì´í„° ë¡œë“œ"""
    import time
    time.sleep(2)  # ì‹œë®¬ë ˆì´ì…˜
    return {"value": 42, "timestamp": datetime.now()}

# ë°ì´í„° ë¡œë“œ ë¡œì§
should_reload = (
    st.session_state.last_loaded is None or
    datetime.now() - st.session_state.last_loaded > timedelta(minutes=5)
)

if should_reload:
    with st.spinner("ë°ì´í„° ë¡œë”© ì¤‘..."):
        st.session_state.data = load_data()
        st.session_state.last_loaded = datetime.now()
    st.success("ë°ì´í„°ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤")
else:
    st.info(f"ìºì‹œëœ ë°ì´í„° ì‚¬ìš© (ë¡œë“œ ì‹œê°„: {st.session_state.last_loaded})")

# ë°ì´í„° í‘œì‹œ
if st.session_state.data:
    st.json(st.session_state.data)

# ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨
if st.button("ë°ì´í„° ìƒˆë¡œê³ ì¹¨"):
    st.session_state.last_loaded = None
    st.rerun()
```

### ë©€í‹° ìŠ¤í… í¼

```python
import streamlit as st

st.title("ğŸ“ íšŒì›ê°€ì…")

# í˜„ì¬ ë‹¨ê³„ ì¶”ì 
if "step" not in st.session_state:
    st.session_state.step = 1
    st.session_state.form_data = {}

# ì§„í–‰ ìƒíƒœ í‘œì‹œ
progress = (st.session_state.step - 1) / 2
st.progress(progress)
st.write(f"ë‹¨ê³„ {st.session_state.step}/3")

# ë‹¨ê³„ë³„ í¼
if st.session_state.step == 1:
    st.subheader("1ë‹¨ê³„: ê¸°ë³¸ ì •ë³´")
    
    name = st.text_input("ì´ë¦„", value=st.session_state.form_data.get("name", ""))
    email = st.text_input("ì´ë©”ì¼", value=st.session_state.form_data.get("email", ""))
    
    if st.button("ë‹¤ìŒ"):
        if name and email:
            st.session_state.form_data["name"] = name
            st.session_state.form_data["email"] = email
            st.session_state.step = 2
            st.rerun()
        else:
            st.error("ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”")

elif st.session_state.step == 2:
    st.subheader("2ë‹¨ê³„: ë¹„ë°€ë²ˆí˜¸")
    
    password = st.text_input("ë¹„ë°€ë²ˆí˜¸", type="password")
    confirm = st.text_input("ë¹„ë°€ë²ˆí˜¸ í™•ì¸", type="password")
    
    col1, col2 = st.columns(2)
    if col1.button("ì´ì „"):
        st.session_state.step = 1
        st.rerun()
    
    if col2.button("ë‹¤ìŒ"):
        if password and password == confirm:
            st.session_state.form_data["password"] = password
            st.session_state.step = 3
            st.rerun()
        else:
            st.error("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤")

elif st.session_state.step == 3:
    st.subheader("3ë‹¨ê³„: í™•ì¸")
    
    st.write("ì…ë ¥í•˜ì‹  ì •ë³´:")
    st.json({
        "name": st.session_state.form_data["name"],
        "email": st.session_state.form_data["email"]
    })
    
    col1, col2 = st.columns(2)
    if col1.button("ì´ì „"):
        st.session_state.step = 2
        st.rerun()
    
    if col2.button("ê°€ì… ì™„ë£Œ"):
        st.success("íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!")
        st.balloons()
        # ì´ˆê¸°í™”
        st.session_state.step = 1
        st.session_state.form_data = {}
```

## ì£¼ì˜ì‚¬í•­ ë° ê¶Œì¥ ì‚¬í•­

### ì´ˆê¸°í™” íŒ¨í„´ ì¼ê´€ì„±

```python
# âœ… ê¶Œì¥: ì¼ê´€ëœ íŒ¨í„´
if "key" not in st.session_state:
    st.session_state.key = value

# âŒ ë¹„ê¶Œì¥: get ì‚¬ìš© (ëœ ëª…í™•)
st.session_state.get("key", value)
```

### í‚¤ ë„¤ì´ë°

```python
# âœ… ëª…í™•í•œ ì´ë¦„
if "user_messages" not in st.session_state:
    st.session_state.user_messages = []

if "selected_model" not in st.session_state:
    st.session_state.selected_model = "gpt-4"

# âŒ ëª¨í˜¸í•œ ì´ë¦„
if "data" not in st.session_state:
    st.session_state.data = []

if "val" not in st.session_state:
    st.session_state.val = "something"
```

### ëŒ€ìš©ëŸ‰ ë°ì´í„° ì£¼ì˜

```python
# âš ï¸ ì£¼ì˜: í° ë°ì´í„°ëŠ” ë©”ëª¨ë¦¬ ë‚­ë¹„
if "large_data" not in st.session_state:
    st.session_state.large_data = load_huge_dataset()  # í”¼í•˜ê¸°

# âœ… ê¶Œì¥: @st.cache_data ì‚¬ìš©
@st.cache_data
def load_huge_dataset():
    return pd.read_csv("huge_file.csv")

data = load_huge_dataset()  # session_state ì—†ì´ ìºì‹±
```

### ìƒíƒœ ì´ˆê¸°í™” ìœ„ì¹˜

```python
# âœ… ê¶Œì¥: íŒŒì¼ ìƒë‹¨ì— ëª¨ì•„ë‘ê¸°
import streamlit as st

# === ìƒíƒœ ì´ˆê¸°í™” ì„¹ì…˜ ===
if "messages" not in st.session_state:
    st.session_state.messages = []

if "config" not in st.session_state:
    st.session_state.config = {}

if "user" not in st.session_state:
    st.session_state.user = None
# === ì—¬ê¸°ê¹Œì§€ ===

# ì´í›„ ì•± ë¡œì§
st.title("ì•±")
...
```

### ë””ë²„ê¹…

```python
import streamlit as st

# ë””ë²„ê·¸ ëª¨ë“œ: í˜„ì¬ ìƒíƒœ í™•ì¸
if st.sidebar.checkbox("ë””ë²„ê·¸ ëª¨ë“œ"):
    st.sidebar.subheader("Session State")
    st.sidebar.json(dict(st.session_state))
```

## Streamlit ë™ì‘ ìš”ì•½

### ì‹¤í–‰ ëª¨ë¸

```
ì‚¬ìš©ì ì ‘ì†
    â†“
[1ì°¨ ì‹¤í–‰]
- ëª¨ë“  ë³€ìˆ˜ ì´ˆê¸°í™”
- session_state ì´ˆê¸°í™” (if not in)
- ìœ„ì ¯ ë Œë”ë§
    â†“
ì‚¬ìš©ì ìƒí˜¸ì‘ìš© (ë²„íŠ¼ í´ë¦­ ë“±)
    â†“
[2ì°¨ ì‹¤í–‰]
- ëª¨ë“  ë³€ìˆ˜ ë‹¤ì‹œ ì´ˆê¸°í™” (ì¼ë°˜ ë³€ìˆ˜ëŠ” ë¦¬ì…‹)
- session_stateëŠ” ìœ ì§€ (ì¬ì´ˆê¸°í™” ì•ˆ ë¨)
- ìœ„ì ¯ ë‹¤ì‹œ ë Œë”ë§
    â†“
ë°˜ë³µ...
```

### ë°ì´í„° ìƒëª…ì£¼ê¸°

| ì €ì¥ ë°©ì‹ | ìƒëª…ì£¼ê¸° | ìš©ë„ |
|-----------|----------|------|
| ì¼ë°˜ ë³€ìˆ˜ | ë‹¨ì¼ ì‹¤í–‰ | ì„ì‹œ ê³„ì‚° |
| session_state | ë¸Œë¼ìš°ì € ì„¸ì…˜ | ìƒíƒœ ìœ ì§€ |
| @st.cache_data | ì•± ì¬ì‹œì‘ ì „ê¹Œì§€ | ë°ì´í„° ìºì‹± |
| íŒŒì¼/DB | ì˜êµ¬ | ì˜ì† ì €ì¥ |

## ê²°ë¡ 

**Streamlitì˜ í•µì‹¬:**
1. ì „ì²´ ìŠ¤í¬ë¦½íŠ¸ ì¬ì‹¤í–‰ ë°©ì‹
2. session_stateë¡œ ìƒíƒœ ìœ ì§€
3. ê°„ë‹¨í•œ APIë¡œ ë³µì¡í•œ ì›¹ì•± êµ¬í˜„

**session_state í™œìš©:**
- ì±„íŒ… ì´ë ¥, ì‚¬ìš©ì ì…ë ¥ ì €ì¥
- ì„¤ì • ë° í™˜ê²½ ë³€ìˆ˜ ìœ ì§€
- í˜ì´ì§€ ê°„ ë°ì´í„° ê³µìœ 
- ë¹„ìš© ì ˆê° (API í˜¸ì¶œ ìµœì†Œí™”)

**ê¸°ì–µí•  íŒ¨í„´:**
```python
if "key" not in st.session_state:
    st.session_state.key = initial_value
```

* ì´ í•œ ì¤„ì´ Streamlit ì•±ì˜ ìƒíƒœ ê´€ë¦¬ì˜ í•µì‹¬ì´ë‹¤.
    * ì²˜ìŒì´ë©´ ì´ˆê¸°í™”: `st.session_state.key_name = initial_value`


## ì‹¤ì œ ë™ì‘ íë¦„

### ì±„íŒ… ì•±

```python
import streamlit as st

st.title("ì±„íŒ…")

# ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™” (ì²˜ìŒë§Œ)
if "messages" not in st.session_state:
    st.session_state.messages = []

# ì´ì „ ë©”ì‹œì§€ í‘œì‹œ
for msg in st.session_state.messages:
    st.write(f"ì‚¬ìš©ì: {msg}")

# ìƒˆ ë©”ì‹œì§€ ì…ë ¥
user_input = st.text_input("ë©”ì‹œì§€ ì…ë ¥")
if st.button("ì „ì†¡"):
    st.session_state.messages.append(user_input)
    st.rerun()  # í™”ë©´ ìƒˆë¡œê³ ì¹¨
```

### ì„¤ì • ìœ ì§€

```python
import streamlit as st

# ëª¨ë¸ ì„ íƒ ì´ˆê¸°í™”
if 'selected_model' not in st.session_state:
    st.session_state.selected_model = "gpt-4o-mini"

# ì‚¬ì´ë“œë°”ì—ì„œ ì„ íƒ
model = st.sidebar.selectbox(
    "ëª¨ë¸ ì„ íƒ",
    ["gpt-4o-mini", "gpt-4", "gpt-3.5-turbo"],
    index=0 if st.session_state.selected_model == "gpt-4o-mini" else 1
)

# ì„ íƒê°’ ì €ì¥
st.session_state.selected_model = model

# ë©”ì¸ í˜ì´ì§€ì—ì„œ ì‚¬ìš©
st.write(f"í˜„ì¬ ëª¨ë¸: {st.session_state.selected_model}")
```

### ë°ì´í„° ìºì‹±

```python
import streamlit as st
from datetime import datetime

# ë§ˆì§€ë§‰ ì¸ë±ì‹± ì‹œê°„ ì´ˆê¸°í™”
if 'last_indexed' not in st.session_state:
    st.session_state.last_indexed = datetime.now()

# ë¦¬íŠ¸ë¦¬ë²„ ìºì‹±
if "retriever" not in st.session_state:
    st.session_state.retriever = create_retriever()  # í•œ ë²ˆë§Œ ìƒì„±

# ì´í›„ ì‚¬ìš©
docs = st.session_state.retriever.get_relevant_documents(query)
```

## ìš”ì•½

| ê°œë… | ì„¤ëª… |
|------|------|
| **Streamlit ì¬ì‹¤í–‰** | ìƒí˜¸ì‘ìš©ë§ˆë‹¤ ìŠ¤í¬ë¦½íŠ¸ ì „ì²´ ì¬ì‹¤í–‰ |
| **ì¼ë°˜ ë³€ìˆ˜** | ë§¤ë²ˆ ì´ˆê¸°í™”ë¨ (ê°’ ìœ ì§€ ì•ˆ ë¨) |
| **session_state** | ì¬ì‹¤í–‰ ê°„ ê°’ ìœ ì§€ |
| **ì´ˆê¸°í™” íŒ¨í„´** | `if 'key' not in st.session_state: ...` |
| **ìš©ë„** | ìƒíƒœ ìœ ì§€, ì„¤ì • ì €ì¥, ìºì‹± |

ì¦‰, `session_state`ëŠ” ë¸Œë¼ìš°ì €ì˜ **localStorage**ì²˜ëŸ¼, í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ë„ ë°ì´í„°ê°€ ìœ ì§€ë˜ëŠ” ì €ì¥ì†Œì´ë‹¤.