
## 프로젝트 개요

**과제명**: AI Agent 기반 지능형 기술 지식 플랫폼 구축

### 문제 배경
- 지식 파편화(사일로화), 정보 탐색 비효율, 인력 이탈로 인한 업무 병목
- 암묵지 의존으로 인수인계 부하 및 기술 부채 증가

### 3가지 핵심 개발 목표

| # | 기능 | 지표 |
|---|------|------|
| 1 | **지식 QnA Chatbot** - 기존 문서 행간 해석 AI | 데이터 표준화 원칙 100% 명시화 |
| 2 | **데이터 표준화 도우미 Agent** - 메타데이터 자동화 | 물리명/설명/데이터타입 3종 추천 |
| 3 | **인실리코 알고리즘 분석 Agent** - 코드 투명성 확보 | 인실리코 코드 분석 100% 커버 |

### 시스템 아키텍처

```
[FE] → [LB] → [Backend/Java] → [AI Engine (K8s/Docker)]
                                        ↓
                              RAG (FastAPI)
                              ├── Azure OpenAI Embeddings
                              ├── Azure Document Intelligence (문서 파싱)
                              ├── Vector Store (Azure AI Search)
                              ├── Rule-Based Engine (AST/CFG Parser 등)
                              └── Data-Driven Engine (DL/ML 모델)
                                        ↓
                              LLM (Azure OpenAI, OpenAI, HuggingFace 등)
                                        ↓
                              ---
                              title: "Agent 플랫폼: Azure 기반 POC 설계와 운영 고려사항"
                              subtitle: "AI Agent POC를 위한 아키텍처 설계, 인프라 선택, 운영 시 고려점"
                              description: |
                                3개의 AI Agent(지식 QnA, 데이터 표준화, 코드 분석) POC를 Azure 기반으로
                                설계·운영할 때의 주요 결정 포인트와 권장 아키텍처를 정리한다.
                              author: Kwangmin Kim
                              date: 02/20/2026
                              categories:
                                - Engineering
                                - Cloud
                              format:
                                html:
                                  code-fold: true
                                  toc: true
                                  number-sections: true
                              draft: false
                              ---

                              ## 1. 개요

                              이 글은 "AI Agent 기반 지능형 기술 지식 플랫폼" POC(Proof of Concept)를
                              Azure에서 어떻게 설계·운영할지 정리한 것이다. 목표는 빠른 기능 검증과
                              보안·비용·운영성의 균형을 맞춘 현실적인 로드맵을 제시하는 것이다.

                              ### 문제 인식
                              - 지식이 조직 내에 파편화되어 검색·활용이 비효율적이다.
                              - 암묵지 의존으로 인수인계 부담과 기술 부채가 쌓인다.

                              ### 핵심 목표
                              1. 지식 QnA Chatbot: 기존 문서의 맥락을 이해해 질문에 답한다.
                              2. 데이터 표준화 도우미 Agent: 메타데이터 자동 추천으로 표준화 지원.
                              3. 코드 분석 Agent: 인실리코(코드) 분석으로 투명성 확보.

                              ## 2. 권장 시스템 아키텍처

                              ```
                              [FE] → [LB] → [Backend/Java] → [AI Engine (K8s/Docker)]
                                                                      ↓
                                                            RAG (FastAPI)
                                                            ├── Azure OpenAI Embeddings
                                                            ├── Azure Document Intelligence (문서 파싱)
                                                            ├── Vector Store (Azure AI Search)
                                                            ├── Rule-Based Engine (AST/CFG Parser 등)
                                                            └── Data-Driven Engine (DL/ML 모델)
                                                                      ↓
                                                            LLM (Azure OpenAI, OpenAI, HuggingFace 등)
                                                                      ↓
                                                            Data Storage (SQL DW, MySQL, Data Lake)

                              [Monitoring] Azure Monitor + Log Analytics + Cost Management
                              ```

                              설계 원칙: POC 단계에서는 단순성(POC 우선)을 유지하되, Phase 2에서
                              반복되는 패턴만 공통 모듈로 추출한다.

                              ## 3. 현재 워크스페이스와 연계

                              프로토타입은 Streamlit 멀티페이지 앱으로 개발되어 있으며, 주요 파일은
                              다음과 같다.

                              - `1_QnA_Chatbot.py` — RAG 기반 QnA
                              - `2_Data_Standardizer.py` — 데이터 표준화 UI(미완성)
                              - `3_Code_Analyzer.py` — 코드 분석 UI(미완성)

                              향후 React/Vue FE + Java Backend 구조로 전환할 계획이다.

                              ## 4. 필요한 핵심 인프라(요약)

                              | 서비스 | 용도 | 권장 등급 |
                              |---|---:|---|
                              | Azure OpenAI | LLM + Embeddings | PTU 또는 Standard |
                              | Azure AI Search | Vector Store (RAG) | Standard S1+ |
                              | Azure Document Intelligence | 문서 파싱 | S0+ |
                              | AKS / Container Apps | 컨테이너 오케스트레이션 | POC: Container Apps, Prod: AKS |
                              | Azure SQL / ADLS | 데이터 저장소 | General Purpose / Gen2 |

                              추가: Azure Monitor, Log Analytics, Azure Container Registry, Storage Account.

                              ## 5. 리소스·비용 추정(간단)

                              월간 추정(한국 리전 기준, 대략):

                              ```
                              Azure OpenAI (비용 가변)    : $500–2,000
                              Azure AI Search (S1)        : ~$250
                              AKS (클러스터)              : $300–800
                              Azure SQL / ADLS            : ~$200
                              Document Intelligence       : ~$150
                              기타(모니터링·네트워크)    : ~$200
                              총계(추정)                  : $1,600–3,600/월
                              ```

                              실제 비용은 사용량(토큰량, 쿼리량)에 크게 좌우된다.

                              ## 6. 현재 PoC 상태 (2026-02-20 기준)

                              - `src/agent/` 내부에 Streamlit 앱, LLM provider 추상화, RAG 파이프라인 구현 존재.
                              - `1_QnA_Chatbot.py`가 가장 완성도가 높고, 나머지 두 페이지는 UI 위주 상태.
                              - 테스트 코드는 거의 없음.

                              주요 미완성 항목: 데이터 표준화 로직, 코드 분석 로직, docstring-generator 모듈,
                              테스트·공통 UI/유틸.

                              ## 7. 의사결정 포인트 (POC → Prod 전환 시)

                              1. 프론트엔드 호스팅: Streamlit(프로토타입) vs React(정적 호스팅 가능)
                              2. 런타임: VM 직접 운영 vs Container Apps(관리형) vs AKS(자체 K8s)
                              3. LLM 엔드포인트: Azure OpenAI(보안/컴플라이언스) vs OpenAI 직접호출(지연시간)
                              4. 검색 설정: `search_type=hybrid`로 시작, 필요 시 `semantic_hybrid`(Semantic Ranker) 검토

                              간단한 권장사항: POC 단계에서는 Container Apps + Azure OpenAI(Private Endpoint)
                              조합으로 시작하고, 로드가 커지면 AKS로 이전하는 것이 현실적이다.

                              ## 8. Azure 다중 리전(OpenAI) 전략

                              문제: Azure OpenAI는 리전별 쿼터(TPM)가 존재하므로 단일 리전만 사용하면
                              쿼터 초과나 지연 문제가 발생할 수 있다.

                              해결 방안 요약:
                              - `provider.py`에서 다중 엔드포인트 목록을 관리하고 헬스체크·라운드로빈/latency 기반
                                우선순위를 적용해 failover를 구현한다.
                              - LangChain 등 호출 레이어에는 짧은 재시도·체인 단위 타임아웃만 남긴다.
                              - 또는 Azure API Management / Traffic Manager를 앞단에 두어 라우팅·쿼터 제어를 수행한다.

                              운영 시 고려사항: 인증·프라이빗 엔드포인트 접근, 지연시간, 비용, 세션 일관성, 모니터링.

                              ## 9. 워크샵용 핵심 질문(권장)

                              1. 다중 리전 OpenAI failover 전략(Provider 수준 구현 vs APIM 같은 매니지드 방법)
                              2. Document Intelligence 도입 가치(표·레이아웃이 복잡한 문서에서 DI가 유리)
                              3. 현재 VNet 구성 최적화(POC 단계에서 다중 VNet이 필요한지 여부)

                              ## 10. 결론 및 다음 단계

                              요약: POC는 "POC 우선" 원칙으로 단순하게 유지하되, LLM provider 추상화,
                              검색 설정(hybrid), Container Apps 기반 배포로 빠르게 실험을 돌리는 것이 좋다.

                              다음 작업 제안:
                              1. `provider.py`에 다중 엔드포인트·헬스체크 기본 구현 추가
                              2. `2_Data_Standardizer.py`, `3_Code_Analyzer.py`의 기능 구현 우선순위 설정
                              3. 모니터링(토큰 사용량·latency) 대시보드 초안 구성

                              ---
