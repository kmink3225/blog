---
title: "Split code"
subtitle: í…ìŠ¤íŠ¸ ë¶„í• 
description: |
  íš¨ìœ¨ì ì¸ ë¬¸ì„œ ì²­í‚¹ì„ ìœ„í•œ ë‹¤ì–‘í•œ í…ìŠ¤íŠ¸ ë¶„í•  ì „ëµì„ ë‹¤ë£¬ë‹¤.
categories:
  - AI
  - RAG
  - LangChain
author: Kwangmin Kim
date: 12/31/2024
format: 
  html:
    page-layout: full
    code-fold: true
    toc: true
    number-sections: true
draft: False
execute:
    eval: false
---


CodeTextSplitterë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ì–‘í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ ì‘ì„±ëœ ì½”ë“œë¥¼ ë¶„í• í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë¥¼ ìœ„í•´ì„œëŠ” `Language` enumì„ importí•˜ê³ , í•´ë‹¹í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ì§€ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤.


`RecursiveCharacterTextSplitter`ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ìŠ¤íŠ¸ë¥¼ ë¶„í• í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.

- `langchain_text_splitters` ëª¨ë“ˆì—ì„œ `Language`ì™€ `RecursiveCharacterTextSplitter` í´ë˜ìŠ¤ë¥¼ ì„í¬íŠ¸í•©ë‹ˆë‹¤.
- `RecursiveCharacterTextSplitter`ëŠ” í…ìŠ¤íŠ¸ë¥¼ ë¬¸ì ë‹¨ìœ„ë¡œ ì¬ê·€ì ìœ¼ë¡œ ë¶„í• í•˜ëŠ” í…ìŠ¤íŠ¸ ë¶„í• ê¸°ì…ë‹ˆë‹¤.

```{python}
from langchain_text_splitters import (
    Language,
    RecursiveCharacterTextSplitter,
)
```

ì§€ì›ë˜ëŠ” ì–¸ì–´ì˜ ì „ì²´ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

```{python}
# ì§€ì›ë˜ëŠ” ì–¸ì–´ì˜ ì „ì²´ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
[e.value for e in Language]
```

`RecursiveCharacterTextSplitter` í´ë˜ìŠ¤ì˜ `get_separators_for_language` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ì–¸ì–´ì— ì‚¬ìš©ë˜ëŠ” êµ¬ë¶„ì(separators)ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì˜ˆì‹œì—ì„œëŠ” `Language.PYTHON` ì—´ê±°í˜• ê°’ì„ ì¸ìë¡œ ì „ë‹¬í•˜ì—¬ Python ì–¸ì–´ì— ì‚¬ìš©ë˜ëŠ” êµ¬ë¶„ìë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

```{python}
# ì£¼ì–´ì§„ ì–¸ì–´ì— ëŒ€í•´ ì‚¬ìš©ë˜ëŠ” êµ¬ë¶„ìë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
RecursiveCharacterTextSplitter.get_separators_for_language(Language.PYTHON)
```

## Python

`RecursiveCharacterTextSplitter` ì‚¬ìš©í•œ ì˜ˆì œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- `RecursiveCharacterTextSplitter`ë¥¼ ì‚¬ìš©í•˜ì—¬ Python ì½”ë“œë¥¼ ë¬¸ì„œ ë‹¨ìœ„ë¡œ ë¶„í• í•©ë‹ˆë‹¤.
  - `language` ë§¤ê°œë³€ìˆ˜ì— `Language.PYTHON`ì„ ì§€ì •í•˜ì—¬ Python ì–¸ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
  - `chunk_size`ë¥¼ 50ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ê° ë¬¸ì„œì˜ ìµœëŒ€ í¬ê¸°ë¥¼ ì œí•œí•©ë‹ˆë‹¤.
  - `chunk_overlap`ì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë¬¸ì„œ ê°„ì˜ ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```{python}
PYTHON_CODE = """
def hello_world():
    print("Hello, World!")

hello_world()
"""

python_splitter = RecursiveCharacterTextSplitter.from_language(
    language=Language.PYTHON, chunk_size=50, chunk_overlap=0
)
```

`Document` ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ìƒì„±ëœ `Document` ëŠ” ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.

```{python}
python_docs = python_splitter.create_documents([PYTHON_CODE])
python_docs
```

```{python}
for doc in python_docs:
    print(doc.page_content, end="\n==================\n")
```

## JS

ë‹¤ìŒì€ JS í…ìŠ¤íŠ¸ ë¶„í• ê¸°ë¥¼ ì‚¬ìš©í•œ ì˜ˆì‹œì…ë‹ˆë‹¤

```{python}
JS_CODE = """
function helloWorld() {
  console.log("Hello, World!");
}

helloWorld();
"""

js_splitter = RecursiveCharacterTextSplitter.from_language(
    language=Language.JS, chunk_size=60, chunk_overlap=0
)

js_docs = js_splitter.create_documents([JS_CODE])
js_docs
```

## TS

ë‹¤ìŒì€ TS í…ìŠ¤íŠ¸ ë¶„í• ê¸°ë¥¼ ì‚¬ìš©í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.

```{python}
TS_CODE = """
function helloWorld(): void {
  console.log("Hello, World!");
}

helloWorld();
"""

ts_splitter = RecursiveCharacterTextSplitter.from_language(
    language=Language.TS, chunk_size=60, chunk_overlap=0
)
ts_docs = ts_splitter.create_documents([TS_CODE])
ts_docs
```

## Markdown

ë‹¤ìŒì€ Markdown í…ìŠ¤íŠ¸ ë¶„í• ê¸°ë¥¼ ì‚¬ìš©í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.

```{python}
markdown_text = """
# ğŸ¦œï¸ğŸ”— LangChain

âš¡ LLMì„ í™œìš©í•œ ì´ˆìŠ¤í”¼ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶• âš¡

## ë¹ ë¥¸ ì„¤ì¹˜

```bash
pip install langchain
```

# ë¹ ë¥´ê²Œ ë°œì „í•˜ëŠ” ë¶„ì•¼ì˜ ì˜¤í”ˆ ì†ŒìŠ¤ í”„ë¡œì íŠ¸ ì…ë‹ˆë‹¤. ë§ê´€ë¶€ ğŸ™
"""
```

ë¶„í• í•˜ê³  ê²°ê³¼ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

```{python}
md_splitter = RecursiveCharacterTextSplitter.from_language(
    # ë§ˆí¬ë‹¤ìš´ ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ìŠ¤íŠ¸ ë¶„í• ê¸° ìƒì„±
    language=Language.MARKDOWN,
    # ì²­í¬ í¬ê¸°ë¥¼ 60ìœ¼ë¡œ ì„¤ì •
    chunk_size=60,
    # ì²­í¬ ê°„ ì¤‘ë³µë˜ëŠ” ë¶€ë¶„ì´ ì—†ë„ë¡ ì„¤ì •
    chunk_overlap=0,
)
# ë§ˆí¬ë‹¤ìš´ í…ìŠ¤íŠ¸ë¥¼ ë¶„í• í•˜ì—¬ ë¬¸ì„œ ìƒì„±
md_docs = md_splitter.create_documents([markdown_text])
# ìƒì„±ëœ ë¬¸ì„œ ì¶œë ¥
md_docs
```

## Latex

LaTeXëŠ” ë¬¸ì„œ ì‘ì„±ì„ ìœ„í•œ ë§ˆí¬ì—… ì–¸ì–´ë¡œ, ìˆ˜í•™ ê¸°í˜¸ì™€ ìˆ˜ì‹ì„ í‘œí˜„í•˜ëŠ” ë° ë„ë¦¬ ì‚¬ìš©ë©ë‹ˆë‹¤.

ë‹¤ìŒì€ LaTeX í…ìŠ¤íŠ¸ì˜ ì˜ˆì‹œì…ë‹ˆë‹¤.

```{python}
latex_text = """
\documentclass{article}

\begin{document}

\maketitle

\section{Introduction}
% LLMì€ ë°©ëŒ€í•œ ì–‘ì˜ í…ìŠ¤íŠ¸ ë°ì´í„°ë¡œ í•™ìŠµí•˜ì—¬ ì‚¬ëŒê³¼ ìœ ì‚¬í•œ ì–¸ì–´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê¸°ê³„ í•™ìŠµ ëª¨ë¸ì˜ í•œ ìœ í˜•ì…ë‹ˆë‹¤.
% ìµœê·¼ ëª‡ ë…„ ë™ì•ˆ LLMì€ ì–¸ì–´ ë²ˆì—­, í…ìŠ¤íŠ¸ ìƒì„±, ê°ì„± ë¶„ì„ ë“± ë‹¤ì–‘í•œ ìì—°ì–´ ì²˜ë¦¬ ì‘ì—…ì—ì„œ ìƒë‹¹í•œ ë°œì „ì„ ì´ë£¨ì—ˆìŠµë‹ˆë‹¤.

\subsection{History of LLMs}
% ì´ˆê¸° LLMì€ 1980ë…„ëŒ€ì™€ 1990ë…„ëŒ€ì— ê°œë°œë˜ì—ˆì§€ë§Œ, ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë°ì´í„° ì–‘ê³¼ ë‹¹ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í“¨íŒ… ëŠ¥ë ¥ìœ¼ë¡œ ì¸í•´ ì œí•œë˜ì—ˆìŠµë‹ˆë‹¤.
% ê·¸ëŸ¬ë‚˜ ì§€ë‚œ 10ë…„ ë™ì•ˆ í•˜ë“œì›¨ì–´ì™€ ì†Œí”„íŠ¸ì›¨ì–´ì˜ ë°œì „ìœ¼ë¡œ ëŒ€ê·œëª¨ ë°ì´í„° ì„¸íŠ¸ì— ëŒ€í•´ LLMì„ í•™ìŠµì‹œí‚¬ ìˆ˜ ìˆê²Œ ë˜ì—ˆê³ , ì´ëŠ” ì„±ëŠ¥ì˜ í° í–¥ìƒìœ¼ë¡œ ì´ì–´ì¡ŒìŠµë‹ˆë‹¤.

\subsection{Applications of LLMs}
% LLMì€ ì±—ë´‡, ì½˜í…ì¸  ìƒì„±, ê°€ìƒ ì–´ì‹œìŠ¤í„´íŠ¸ ë“± ì‚°ì—… ë¶„ì•¼ì—ì„œ ë§ì€ ì‘ìš© ë¶„ì•¼ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
% ë˜í•œ ì–¸ì–´í•™, ì‹¬ë¦¬í•™, ì»´í“¨í„° ì–¸ì–´í•™ ì—°êµ¬ë¥¼ ìœ„í•´ í•™ê³„ì—ì„œë„ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

\end{document}
"""
```

ë¶„í• í•˜ê³  ê²°ê³¼ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

```{python}
latex_splitter = RecursiveCharacterTextSplitter.from_language(
    # ë§ˆí¬ë‹¤ìš´ ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ìŠ¤íŠ¸ë¥¼ ë¶„í• í•©ë‹ˆë‹¤.
    language=Language.LATEX,
    # ê° ì²­í¬ì˜ í¬ê¸°ë¥¼ 60ìë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
    chunk_size=60,
    # ì²­í¬ ê°„ì˜ ì¤‘ë³µë˜ëŠ” ë¬¸ì ìˆ˜ë¥¼ 0ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
    chunk_overlap=0,
)
# latex_textë¥¼ ë¶„í• í•˜ì—¬ ë¬¸ì„œ ëª©ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤.
latex_docs = latex_splitter.create_documents([latex_text])
# ìƒì„±ëœ ë¬¸ì„œ ëª©ë¡ì„ ì¶œë ¥í•©ë‹ˆë‹¤.
latex_docs
```

## HTML

HTML í…ìŠ¤íŠ¸ ë¶„í• ê¸°ë¥¼ ì‚¬ìš©í•œ ì˜ˆì œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```{python}
html_text = """
<!DOCTYPE html>
<html>
    <head>
        <title>ğŸ¦œï¸ğŸ”— LangChain</title>
        <style>
            body {
                font-family: Arial, sans-serif;  
            }
            h1 {
                color: darkblue;
            }
        </style>
    </head>
    <body>
        <div>
            <h1>ğŸ¦œï¸ğŸ”— LangChain</h1>
            <p>âš¡ Building applications with LLMs through composability âš¡</p>  
        </div>
        <div>
            As an open-source project in a rapidly developing field, we are extremely open to contributions.
        </div>
    </body>
</html>
"""
```

ë¶„í• í•˜ê³  ê²°ê³¼ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

```{python}
html_splitter = RecursiveCharacterTextSplitter.from_language(
    # HTML ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ìŠ¤íŠ¸ ë¶„í• ê¸° ìƒì„±
    language=Language.HTML,
    # ì²­í¬ í¬ê¸°ë¥¼ 60ìœ¼ë¡œ ì„¤ì •
    chunk_size=60,
    # ì²­í¬ ê°„ ì¤‘ë³µë˜ëŠ” ë¶€ë¶„ì´ ì—†ë„ë¡ ì„¤ì •
    chunk_overlap=0,
)
# ì£¼ì–´ì§„ HTML í…ìŠ¤íŠ¸ë¥¼ ë¶„í• í•˜ì—¬ ë¬¸ì„œ ìƒì„±
html_docs = html_splitter.create_documents([html_text])
# ìƒì„±ëœ ë¬¸ì„œ ì¶œë ¥
html_docs
```

## Solidity

Solidity í…ìŠ¤íŠ¸ ë¶„í• ê¸°ë¥¼ ì‚¬ìš©í•œ ì˜ˆì œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

- Solidity ì½”ë“œë¥¼ ë¬¸ìì—´ í˜•íƒœë¡œ `SOL_CODE` ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.
- `RecursiveCharacterTextSplitter`ë¥¼ ì‚¬ìš©í•˜ì—¬ Solidity ì½”ë“œë¥¼ ì²­í¬ ë‹¨ìœ„ë¡œ ë¶„í• í•˜ëŠ” `sol_splitter`ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
  - `language` ë§¤ê°œë³€ìˆ˜ë¥¼ `Language.SOL`ë¡œ ì„¤ì •í•˜ì—¬ Solidity ì–¸ì–´ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
  - `chunk_size`ë¥¼ 128ë¡œ ì„¤ì •í•˜ì—¬ ê° ì²­í¬ì˜ ìµœëŒ€ í¬ê¸°ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
  - `chunk_overlap`ì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì²­í¬ ê°„ì˜ ì¤‘ë³µì„ ì—†ì•±ë‹ˆë‹¤.
- `sol_splitter.create_documents()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ `SOL_CODE`ë¥¼ ì²­í¬ ë‹¨ìœ„ë¡œ ë¶„í• í•˜ê³ , ë¶„í• ëœ ì²­í¬ë¥¼ `sol_docs` ë³€ìˆ˜ì— ì €ì¥í•©ë‹ˆë‹¤.
- `sol_docs`ë¥¼ ì¶œë ¥í•˜ì—¬ ë¶„í• ëœ Solidity ì½”ë“œ ì²­í¬ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

```{python}
SOL_CODE = """
pragma solidity ^0.8.20; 
contract HelloWorld {  
   function add(uint a, uint b) pure public returns(uint) {
       return a + b;
   }
}
"""

# ë¶„í• í•˜ê³  ê²°ê³¼ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
sol_splitter = RecursiveCharacterTextSplitter.from_language(
    language=Language.SOL, chunk_size=128, chunk_overlap=0
)

sol_docs = sol_splitter.create_documents([SOL_CODE])
sol_docs
```

## C#

C# í…ìŠ¤íŠ¸ ë¶„í• ê¸°ë¥¼ ì‚¬ìš©í•œ ì˜ˆì œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```{python}
C_CODE = """
using System;
class Program
{
    static void Main()
    {
        Console.WriteLine("Enter a number (1-5):");
        int input = Convert.ToInt32(Console.ReadLine());
        for (int i = 1; i <= input; i++)
        {
            if (i % 2 == 0)
            {
                Console.WriteLine($"{i} is even.");
            }
            else
            {
                Console.WriteLine($"{i} is odd.");
            }
        }
        Console.WriteLine("Goodbye!");
    }
}
"""

# ë¶„í• í•˜ê³  ê²°ê³¼ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
c_splitter = RecursiveCharacterTextSplitter.from_language(
    language=Language.CSHARP, chunk_size=128, chunk_overlap=0
)
c_docs = c_splitter.create_documents([C_CODE])
c_docs
```

